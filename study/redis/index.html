<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸‹è½½|å®‰è£… | Study Notes</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/study/logo.svg">
    <meta name="description" content="">
    
    <link rel="preload" href="/study/assets/css/0.styles.c052bd8b.css" as="style"><link rel="preload" href="/study/assets/js/app.5ae4c37b.js" as="script"><link rel="preload" href="/study/assets/js/6.75122126.js" as="script"><link rel="preload" href="/study/assets/js/3.a4d08efe.js" as="script"><link rel="prefetch" href="/study/assets/js/10.c82dc82d.js"><link rel="prefetch" href="/study/assets/js/11.fb36448a.js"><link rel="prefetch" href="/study/assets/js/12.913821ba.js"><link rel="prefetch" href="/study/assets/js/13.e584bb50.js"><link rel="prefetch" href="/study/assets/js/14.96bc5e64.js"><link rel="prefetch" href="/study/assets/js/15.184489db.js"><link rel="prefetch" href="/study/assets/js/16.da78c363.js"><link rel="prefetch" href="/study/assets/js/17.b1345ea3.js"><link rel="prefetch" href="/study/assets/js/18.45eb7707.js"><link rel="prefetch" href="/study/assets/js/2.175d0748.js"><link rel="prefetch" href="/study/assets/js/4.16745613.js"><link rel="prefetch" href="/study/assets/js/5.0e45b1ba.js"><link rel="prefetch" href="/study/assets/js/7.bff868dd.js"><link rel="prefetch" href="/study/assets/js/8.168cfe47.js"><link rel="prefetch" href="/study/assets/js/9.5ac09e32.js">
    <link rel="stylesheet" href="/study/assets/css/0.styles.c052bd8b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study/" class="home-link router-link-active"><img src="/study/logo.svg" alt="Study Notes" class="logo"> <span class="site-name can-hide">Study Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/study/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/study/spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/study/springboot/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/study/es/" class="nav-link">
  Elasticsearch
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><span class="title">More</span> <span class="arrow down"></span></button> <button type="button" aria-label="More" class="mobile-dropdown-title"><span class="title">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/study/mybatisplus/" class="nav-link">
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/study/springcloudgateway/" class="nav-link">
  SpringCloudGateway
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/study/redis/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Redis
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/study/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/study/spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/study/springboot/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/study/es/" class="nav-link">
  Elasticsearch
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><span class="title">More</span> <span class="arrow down"></span></button> <button type="button" aria-label="More" class="mobile-dropdown-title"><span class="title">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/study/mybatisplus/" class="nav-link">
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/study/springcloudgateway/" class="nav-link">
  SpringCloudGateway
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/study/redis/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Redis
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ä¸‹è½½|å®‰è£…</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/redis/#ä¸‹è½½-å®‰è£…" class="sidebar-link">ä¸‹è½½|å®‰è£…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#æ•°æ®åº“è½¯ä»¶" class="sidebar-link">æ•°æ®åº“è½¯ä»¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#æŒ‡ä»¤" class="sidebar-link">æŒ‡ä»¤</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#å¯åŠ¨" class="sidebar-link">å¯åŠ¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#rediså‘½ä»¤æ–‡æ¡£" class="sidebar-link">Rediså‘½ä»¤æ–‡æ¡£</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#æ•°æ®ç±»å‹" class="sidebar-link">æ•°æ®ç±»å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/redis/#string" class="sidebar-link">String</a></li><li class="sidebar-sub-header"><a href="/study/redis/#list" class="sidebar-link">List</a></li><li class="sidebar-sub-header"><a href="/study/redis/#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/study/redis/#hash" class="sidebar-link">Hash</a></li><li class="sidebar-sub-header"><a href="/study/redis/#zset" class="sidebar-link">Zset</a></li></ul></li><li><a href="/study/redis/#é…ç½®æ–‡ä»¶" class="sidebar-link">é…ç½®æ–‡ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/redis/#å•ä½" class="sidebar-link">å•ä½</a></li><li class="sidebar-sub-header"><a href="/study/redis/#includes" class="sidebar-link">INCLUDES</a></li><li class="sidebar-sub-header"><a href="/study/redis/#ç½‘ç»œé…ç½®" class="sidebar-link">ç½‘ç»œé…ç½®</a></li><li class="sidebar-sub-header"><a href="/study/redis/#general" class="sidebar-link">GENERAL</a></li><li class="sidebar-sub-header"><a href="/study/redis/#å®‰å…¨é…ç½®" class="sidebar-link">å®‰å…¨é…ç½®</a></li><li class="sidebar-sub-header"><a href="/study/redis/#clients" class="sidebar-link">CLIENTS</a></li></ul></li><li><a href="/study/redis/#å‘å¸ƒè®¢é˜…" class="sidebar-link">å‘å¸ƒè®¢é˜…</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#æ–°æ•°æ®ç±»å‹" class="sidebar-link">æ–°æ•°æ®ç±»å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/redis/#geospatial" class="sidebar-link">Geospatial</a></li><li class="sidebar-sub-header"><a href="/study/redis/#hyperloglog" class="sidebar-link">HyperLogLog</a></li><li class="sidebar-sub-header"><a href="/study/redis/#bitmaps" class="sidebar-link">Bitmaps</a></li></ul></li><li><a href="/study/redis/#æ•´åˆspringbooté…ç½®" class="sidebar-link">æ•´åˆSpringBooté…ç½®</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#äº‹åŠ¡" class="sidebar-link">äº‹åŠ¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/redis/#é”™è¯¯å¤„ç†" class="sidebar-link">é”™è¯¯å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/study/redis/#äº‹åŠ¡å†²çª" class="sidebar-link">äº‹åŠ¡å†²çª</a></li><li class="sidebar-sub-header"><a href="/study/redis/#ä¸‰ç‰¹æ€§" class="sidebar-link">ä¸‰ç‰¹æ€§</a></li><li class="sidebar-sub-header"><a href="/study/redis/#ç§’æ€æ¡ˆä¾‹" class="sidebar-link">ç§’æ€æ¡ˆä¾‹</a></li></ul></li><li><a href="/study/redis/#redisæŒä¹…åŒ–" class="sidebar-link">RedisæŒä¹…åŒ–</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/redis/#rdb" class="sidebar-link">RDB</a></li><li class="sidebar-sub-header"><a href="/study/redis/#aof" class="sidebar-link">AOF</a></li></ul></li><li><a href="/study/redis/#ä¸»ä»å¤åˆ¶" class="sidebar-link">ä¸»ä»å¤åˆ¶</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#åå®¢ä¸ºä¸»" class="sidebar-link">åå®¢ä¸ºä¸»</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/redis/#å“¨å…µæ¨¡å¼" class="sidebar-link">å“¨å…µæ¨¡å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/redis/#ç¤ºä¾‹" class="sidebar-link">ç¤ºä¾‹</a></li><li class="sidebar-sub-header"><a href="/study/redis/#é€‰æ‹©æ¡ä»¶" class="sidebar-link">é€‰æ‹©æ¡ä»¶</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="ä¸‹è½½-å®‰è£…"><a href="#ä¸‹è½½-å®‰è£…" class="header-anchor">#</a> ä¸‹è½½|å®‰è£…</h2> <p><a href="https://www.yuque.com/naihe-layco/linux/redis?view=doc_embed" target="_blank" rel="noopener noreferrer">Linuxç³»ç»Ÿä¸‹é…ç½®Redisç¯å¢ƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h2> <p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ ç”±Cè¯­è¨€ç¼–å†™çš„é«˜æ€§èƒ½éå…³ç³»å‹æ•°æ®åº“</p> <div class="custom-block tip"><p class="custom-block-title">ğŸ˜</p> <p>NoSQL: æ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ åŒºåˆ«äºå…³ç³»å‹æ•°æ®åº“ ä¸ä¿è¯æ•°æ®çš„ACID(åŸå­æ€§ä¸€è‡´æ€§éš”ç¦»æ€§æŒä¹…æ€§)ç‰¹æ€§<br>è¯¥æ•°æ®åº“åœ¨æ•°æ®æ¨¡å‹ç®€å•éœ€è¦çµæ´»æ€§æ›´å¼ºçš„ç³»ç»Ÿå¯¹æ•°æ®åº“æ€§èƒ½è¦æ±‚é«˜å¯¹æ•°æ®çš„ä¸€è‡´æ€§æ²¡æœ‰ç‰¹åˆ«é«˜çš„è¦æ±‚ç­‰æƒ…å†µä¸‹è¾ƒé€‚ç”¨<br></p> <p>ç‰¹ç‚¹:</p> <ul><li>æ˜“æ‰©å±•</li> <li>é«˜æ€§èƒ½</li> <li>æ•°æ®æ¨¡å‹çµæ´»</li> <li>é«˜å¯ç”¨</li></ul> <p>åˆ†ç±»:</p> <ul><li>k-vå­˜å‚¨æ•°æ®åº“</li> <li>åˆ—å­˜å‚¨æ•°æ®åº“</li> <li>æ–‡æ¡£å­˜å‚¨æ•°æ®åº“</li> <li>å›¾å½¢å­˜å‚¨æ•°æ®åº“</li></ul></div> <table><thead><tr><th>åˆ†ç±»</th> <th>Examples</th> <th>åº”ç”¨åœºæ™¯</th> <th>æ•°æ®æ¨¡å‹</th> <th>ä¼˜ç‚¹</th> <th>ç¼ºç‚¹</th></tr></thead> <tbody><tr><td>key-value</td> <td>Redis</td> <td>å†…å®¹ç¼“å­˜, ä¸»è¦ç”¨äºå¤„ç†å¤§é‡æ•°æ®çš„é«˜è®¿é—®è´Ÿè½½ä¹Ÿç”¨äºæ—¥å¿—ç³»ç»Ÿ</td> <td>KeyæŒ‡å‘Valueçš„é”®å€¼å¯¹</td> <td>æŸ¥æ‰¾é€Ÿåº¦å¿«</td> <td>æ•°æ®æ— ç»“æ„åŒ– é€šå¸¸ä»¥å­—ç¬¦ä¸²æˆ–äºŒè¿›åˆ¶å­˜åœ¨</td></tr> <tr><td>åˆ—å­˜å‚¨</td> <td>Riak</td> <td>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</td> <td>ä»¥åˆ—ç°‡å¼å­˜å‚¨<br>å°†åŒä¸€ç±»å‹çš„æ•°æ®å­˜åœ¨ä¸€èµ·</td> <td>æŸ¥æ‰¾é€Ÿåº¦å¿«<br>å¯æ‰©å±•æ€§å¼º<br>æ›´å®¹æ˜“è¿›è¡Œåˆ†å¸ƒå¼æ‰©å±•</td> <td>åŠŸèƒ½ç›¸å¯¹å±€é™</td></tr> <tr><td>æ–‡æ¡£å­˜å‚¨</td> <td>MongoDb</td> <td>Webåº”ç”¨(ä¸kvç±»å‹, Valueæ˜¯ç»“æ„åŒ–çš„, ä¸åŒçš„æ˜¯æ•°æ®åº“èƒ½å¤Ÿäº†è§£Valueçš„å†…å®¹)</td> <td>Key-Valueå¯¹åº”çš„é”®å€¼å¯¹, Valueä¸ºç»“æ„åŒ–æ•°æ®</td> <td>æ•°æ®ç»“æ„è¦æ±‚ä¸ä¸¥æ ¼, è¡¨ç»“æ„å¯å˜, ä¸éœ€è¦åƒå…³ç³»å‹æ•°æ®åº“ä¸€æ · é¢„å…ˆå®šä¹‰è¡¨ç»“æ„</td> <td>æŸ¥è¯¢æ€§èƒ½ä½<br>ç¼ºä¹ç»Ÿä¸€çš„æŸ¥è¯¢è¯­æ³•</td></tr> <tr><td>å›¾å½¢å­˜å‚¨</td> <td>Neo4J</td> <td>ç¤¾äº¤ç½‘ç»œ, æ¨èç³»ç»Ÿç­‰<br>ä¸“æ³¨äºæ„å»ºå…³ç³»å›¾è°±</td> <td>å›¾ç»“æ„</td> <td>åˆ©ç”¨å›¾ç»“æ„ç›¸å…³ç®—æ³• å¦‚: æœ€çŸ­è·¯å¾„å¯»å€, Nåº¦å…³ç³»æŸ¥æ‰¾ç­‰</td> <td>å¤§å¤šæ—¶å€™éœ€è¦å¯¹æ•´ä¸ªå›¾åšè®¡ç®—æ‰èƒ½å¾—å‡ºæ‰€éœ€ä¿¡æ¯è€Œä¸”è¿™ç§ç»“æ„ä¸å¤ªå¥½åšåˆ†å¸ƒå¼é›†ç¾¤æ–¹æ¡ˆ</td></tr></tbody></table> <h2 id="æ•°æ®åº“è½¯ä»¶"><a href="#æ•°æ®åº“è½¯ä»¶" class="header-anchor">#</a> æ•°æ®åº“è½¯ä»¶</h2> <p><a href="http://memcached.org/" target="_blank" rel="noopener noreferrer">memcached - a distributed memory object caching system<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br><a href="https://www.mongodb.com/home" target="_blank" rel="noopener noreferrer">MongoDB: The Developer Data Platform<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="header-anchor">#</a> æŒ‡ä»¤</h2> <blockquote><p>åœ¨Rediså®‰è£…ç›®å½•/bin ä¸‹æˆ– /usr/local/bin ä¸‹æœ‰ä»¥ä¸‹æ–‡ä»¶</p></blockquote> <div class="language-powershell extra-class"><pre class="language-powershell"><code>redis-check-aof			<span class="token comment"># ä¿®å¤AOFæ–‡ä»¶</span>
redis-check-rdb			<span class="token comment"># ä¿®å¤RDBæ–‡ä»¶</span>
redis-sentinel			<span class="token comment"># å“¨å…µæ¨¡å¼ é›†ç¾¤</span>
redis-benchmark			<span class="token comment"># æ€§èƒ½æµ‹è¯•</span>
redis-server			<span class="token comment"># RedisæœåŠ¡</span>
redis-<span class="token function">cli</span>				<span class="token comment"># Rediså®¢æˆ·ç«¯</span>
</code></pre></div><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="header-anchor">#</a> å¯åŠ¨</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/bin <span class="token comment"># è¿›å…¥Rediså®‰è£…ç›®å½•/binä¸‹ä¹Ÿå¯ä»¥</span>
./redis-server
<span class="token comment"># è¯¥æ–¹å¼ä¸ºå‰å°å¯åŠ¨ å¦‚æœå‘½ä»¤çª—å£å…³é—­äº† RedisæœåŠ¡ä¹Ÿä¼šéšä¹‹å…³é—­</span>

<span class="token comment"># åå°å¯åŠ¨</span>
<span class="token comment"># ä¿®æ”¹Redisé…ç½®æ–‡ä»¶</span>
daemonize <span class="token function">yes</span>
<span class="token comment"># å¯åŠ¨RedisæœåŠ¡</span>
./redis-server
<span class="token comment"># æŸ¥çœ‹Redisè¿›ç¨‹</span>
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> redis
</code></pre></div><p><img src="/study/assets/img/1.89ec66a1.png" alt="image.png"></p> <blockquote><p>Rediså‘½ä»¤</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># é€‰æ‹©æ•°æ®åº“ é»˜è®¤æ•°æ®åº“ä¸º0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token keyword">select</span> <span class="token punctuation">[</span>index<span class="token punctuation">]</span>
<span class="token comment"># æŸ¥çœ‹å½“å‰åº“çš„keyæ•°é‡</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DBSIZE
<span class="token comment"># æ¸…ç©ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰key</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> FLUSHDB
<span class="token comment"># æ¸…ç©ºRedisæœåŠ¡æ‰€æœ‰æ•°æ®</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> FLUSHALL
</code></pre></div><h2 id="rediså‘½ä»¤æ–‡æ¡£"><a href="#rediså‘½ä»¤æ–‡æ¡£" class="header-anchor">#</a> Rediså‘½ä»¤æ–‡æ¡£</h2> <p><a href="http://redisdoc.com/" target="_blank" rel="noopener noreferrer">Redis å‘½ä»¤å‚è€ƒ â€” ä¸­æ–‡æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br><a href="https://redis.io/commands/" target="_blank" rel="noopener noreferrer">Redis å‘½ä»¤å‚è€ƒ â€” å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr> <h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="header-anchor">#</a> æ•°æ®ç±»å‹</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æŸ¥çœ‹æ‰€æœ‰key</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> KEYS *
<span class="token comment"># æ˜¯å¦å­˜åœ¨æŒ‡å®škey</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS key
<span class="token comment"># æŸ¥çœ‹keyç±»å‹</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> TYPE key
<span class="token comment"># åˆ é™¤key</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DEL key
<span class="token comment"># è®¾ç½®keyè¿‡æœŸæ—¶é—´ /s</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE key seconds
<span class="token comment"># æŸ¥çœ‹keyå‰©ä½™ç”Ÿå­˜æ—¶é—´ /s æ°¸ä¸è¿‡æœŸ -1 ä¸å­˜åœ¨ -2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> TTL key
<span class="token comment"># keyæ•°å­—å€¼åŠ ä¸€</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCRBY key
<span class="token comment"># keyæ•°å­—å€¼å¢åŠ æŒ‡å®šå¢é‡</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> INCRBY key increment
<span class="token comment"># keyæ•°å­—å€¼å‡ä¸€</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DECR key
<span class="token comment"># keyæ•°å­—å€¼å‡å»æŒ‡å®šå‡é‡</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> DECRBY key decrement
</code></pre></div><h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <blockquote><p>Stringæ˜¯Redisä¸­æœ€åŸºæœ¬çš„ç±»å‹, å®ƒæ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ å¯ä»¥å­˜å‚¨å›¾ç‰‡æˆ–åºåˆ—åŒ–å¯¹è±¡ç­‰
ä¸€ä¸ªå­—ç¬¦ä¸²Valueæœ€å¤§å¯ä»¥å­˜å‚¨512M</p></blockquote> <h4 id="è®¾ç½®å€¼"><a href="#è®¾ç½®å€¼" class="header-anchor">#</a> è®¾ç½®å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">set</span> key value <span class="token punctuation">[</span>EX seconds <span class="token operator">|</span> PX milliseconds <span class="token operator">|</span> NX <span class="token operator">|</span> XX<span class="token punctuation">]</span>
- EX seconds: è®¾ç½®è¿‡æœŸæ—¶é—´ /s ç­‰åŒäº SETEX key seconds value
- PX milliseconds: è®¾ç½®è¿‡æœŸæ—¶é—´ /ms ç­‰åŒäº PSETEX key milliseconds value
- NX: åªæœ‰å½“keyä¸å­˜åœ¨æ—¶ æ‰ä¼šå¯¹keyè¿›è¡Œæ“ä½œ ç­‰åŒäº SETNX key value
- XX: åªæœ‰å½“keyå­˜åœ¨æ—¶ æ‰ä¼šå¯¹keyè¿›è¡Œæ“ä½œ
</code></pre></div><h4 id="å¢é‡-or-å‡é‡"><a href="#å¢é‡-or-å‡é‡" class="header-anchor">#</a> å¢é‡ or å‡é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>incr key
<span class="token comment"># å¯¹æ•°å€¼è¿›è¡ŒåŸå­+1æ“ä½œ</span>
incrby key <span class="token operator">&lt;</span>increment<span class="token operator">&gt;</span>
- increment: å¢é‡
decr key
<span class="token comment"># å¯¹æ•°å€¼è¿›è¡ŒåŸå­-1æ“ä½œ</span>
decrby key <span class="token operator">&lt;</span>decrement<span class="token operator">&gt;</span>
- decrement: å‡é‡
</code></pre></div><blockquote><p>åŸå­æ“ä½œæ˜¯æŒ‡ä¸ä¼šè¢«çº¿ç¨‹è°ƒåº¦æœºåˆ¶æ‰€æ‰“æ–­çš„æ“ä½œ
è¿™ç§æ“ä½œä¸€æ—¦å¼€å§‹å°±ä¼šæ‰§è¡Œåˆ°ç»“æŸ
åœ¨å•çº¿ç¨‹ä¸­ èƒ½åœ¨å•æ¡å‘½ä»¤ä¸­å®Œæˆçš„æ“ä½œéƒ½å¯ä»¥è¢«ç§°ä¸ºåŸå­æ“ä½œ
åœ¨å¤šçº¿ç¨‹ä¸­ ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­çš„æ“ä½œå³å¯ç§°ä¸ºåŸå­æ“ä½œ</p></blockquote> <h4 id="åŒæ—¶ä¸ºå¤šä¸ªé”®è®¾ç½®å€¼"><a href="#åŒæ—¶ä¸ºå¤šä¸ªé”®è®¾ç½®å€¼" class="header-anchor">#</a> åŒæ—¶ä¸ºå¤šä¸ªé”®è®¾ç½®å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>mset key value <span class="token punctuation">[</span>key value<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token comment"># å¦‚æœæŸä¸ªç»™å®šé”®å·²ç»å­˜åœ¨ é‚£ä¹ˆ MSET å°†ä½¿ç”¨æ–°å€¼å»è¦†ç›–æ—§å€¼</span>
msetnx key value <span class="token punctuation">[</span>key value<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token comment"># åªæœ‰å½“ç»™å®šçš„keyä¸å­˜åœ¨æ—¶æ‰ä¼šæ‰§è¡Œ</span>
</code></pre></div><h4 id="è·å–å¤šä¸ªå€¼"><a href="#è·å–å¤šä¸ªå€¼" class="header-anchor">#</a> è·å–å¤šä¸ªå€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>mget key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token comment"># å¦‚æœæŸä¸ªkeyä¸å­˜åœ¨ å…¶å€¼å°†ä»¥nilè¡¨ç¤º</span>
</code></pre></div><h4 id="æˆªå–å­—ç¬¦ä¸²"><a href="#æˆªå–å­—ç¬¦ä¸²" class="header-anchor">#</a> æˆªå–å­—ç¬¦ä¸²</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>getrange key start end
- start: èµ·å§‹ä¸‹æ ‡ <span class="token number">0</span> ä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦
- end: ç»“æŸä¸‹æ ‡ <span class="token parameter variable">-1</span> æœ€åä¸€ä¸ªå­—ç¬¦ <span class="token parameter variable">-2</span> å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ ä»¥æ­¤ç±»æ¨
<span class="token builtin class-name">set</span> k1 abcd123
getrange <span class="token number">0</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;abcd&quot;</span> <span class="token comment"># å«å¤´å«å°¾</span>
getrange <span class="token parameter variable">-3</span> <span class="token parameter variable">-1</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;123&quot;</span>
</code></pre></div><h4 id="æŒ‡å®šä¸‹æ ‡è¦†ç›–å­—ç¬¦ä¸²"><a href="#æŒ‡å®šä¸‹æ ‡è¦†ç›–å­—ç¬¦ä¸²" class="header-anchor">#</a> æŒ‡å®šä¸‹æ ‡è¦†ç›–å­—ç¬¦ä¸²</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>setrange key offset value
- offset: èµ·å§‹ä¸‹æ ‡
setrange k1 <span class="token number">4</span> <span class="token number">666</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;abcd666&quot;</span>
</code></pre></div><h4 id="è®¾ç½®æ–°å€¼å¹¶è¿”å›æ—§å€¼"><a href="#è®¾ç½®æ–°å€¼å¹¶è¿”å›æ—§å€¼" class="header-anchor">#</a> è®¾ç½®æ–°å€¼å¹¶è¿”å›æ—§å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>getset key value
getset k1 abcd123
<span class="token operator">&gt;</span> <span class="token string">&quot;abcd666&quot;</span>
</code></pre></div><h4 id="è®¾ç½®å€¼å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´"><a href="#è®¾ç½®å€¼å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´" class="header-anchor">#</a> è®¾ç½®å€¼å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>setex key seconds value
- seconds: è¿‡æœŸæ—¶é—´ /s
<span class="token builtin class-name">set</span> k1 v1
<span class="token operator">&gt;</span> <span class="token string">&quot;OK&quot;</span>
</code></pre></div><h4 id="æŸ¥çœ‹keyè¿‡æœŸæ—¶é—´"><a href="#æŸ¥çœ‹keyè¿‡æœŸæ—¶é—´" class="header-anchor">#</a> æŸ¥çœ‹keyè¿‡æœŸæ—¶é—´</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>ttl key
ttl k1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
ttl k1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
ttl k1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span> <span class="token comment"># -2 è¡¨ç¤ºkeyä¸å­˜åœ¨</span>
</code></pre></div><p><img src="/study/assets/img/2.06cb0ed7.jpeg" alt="image.jpeg"></p> <h3 id="list"><a href="#list" class="header-anchor">#</a> List</h3> <blockquote><p>å•é”®å¤šå€¼ æŒ‰ç…§æ’å…¥çš„é¡ºåºè¿›è¡Œæ’åº åº•å±‚æ˜¯åŒå‘é“¾è¡¨ç»“æ„</p></blockquote> <h4 id="è®¾ç½®å€¼-2"><a href="#è®¾ç½®å€¼-2" class="header-anchor">#</a> è®¾ç½®å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lpush <span class="token operator">|</span> rpush key value <span class="token punctuation">[</span>value<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
lpush l1 v1 v2 v3
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h4 id="å–å€¼"><a href="#å–å€¼" class="header-anchor">#</a> å–å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lrange key start stop
- start: èµ·å§‹ä¸‹æ ‡ <span class="token number">0</span>
- stop: ç»“æŸä¸‹æ ‡ <span class="token parameter variable">-1</span>
lrange l1 <span class="token number">0</span> <span class="token parameter variable">-1</span> <span class="token comment"># ä»å·¦è¾¹å¼€å§‹å– å…ˆè¿›åå‡º</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;v3&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;v2&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;v1&quot;</span>
</code></pre></div><h4 id="ç§»é™¤å¹¶è¿”å›keyçš„å¤´å…ƒç´ "><a href="#ç§»é™¤å¹¶è¿”å›keyçš„å¤´å…ƒç´ " class="header-anchor">#</a> ç§»é™¤å¹¶è¿”å›keyçš„å¤´å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lpop <span class="token operator">|</span> rpop key
lpop l1
<span class="token operator">&gt;</span> <span class="token string">&quot;v3&quot;</span> <span class="token comment"># æ­¤æ—¶l1ä¸­å·²ç»æ²¡æœ‰v3è¿™ä¸ªå€¼äº†</span>
</code></pre></div><h4 id="å–å‡ºåˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ å¹¶æ’å…¥åˆ°æŒ‡å®šåˆ—è¡¨"><a href="#å–å‡ºåˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ å¹¶æ’å…¥åˆ°æŒ‡å®šåˆ—è¡¨" class="header-anchor">#</a> å–å‡ºåˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ å¹¶æ’å…¥åˆ°æŒ‡å®šåˆ—è¡¨</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>rpoplpush <span class="token builtin class-name">source</span> target
rpoplpush l1 l1
<span class="token operator">&gt;</span> <span class="token string">&quot;v1&quot;</span>
</code></pre></div><h4 id="å–å‡ºæŒ‡å®šä¸‹æ ‡çš„å…ƒç´ "><a href="#å–å‡ºæŒ‡å®šä¸‹æ ‡çš„å…ƒç´ " class="header-anchor">#</a> å–å‡ºæŒ‡å®šä¸‹æ ‡çš„å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lindex key index
lindex l1 <span class="token number">0</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;v1&quot;</span>
</code></pre></div><h4 id="åœ¨æŒ‡å®šå…ƒç´ ä¹‹å‰æˆ–ä¹‹åæ’å…¥å€¼"><a href="#åœ¨æŒ‡å®šå…ƒç´ ä¹‹å‰æˆ–ä¹‹åæ’å…¥å€¼" class="header-anchor">#</a> åœ¨æŒ‡å®šå…ƒç´ ä¹‹å‰æˆ–ä¹‹åæ’å…¥å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>linsert key before<span class="token operator">|</span>after pivot value
linsert l1 after v1 v3
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token comment"># æ“ä½œæˆåŠŸè¿”å›åˆ—è¡¨é•¿åº¦</span>
<span class="token comment"># æœªæ‰¾åˆ°pivot è¿”å›-1</span>
<span class="token comment"># keyä¸å­˜åœ¨æˆ–åˆ—è¡¨ä¸ºç©º è¿”å›0</span>
</code></pre></div><h4 id="è®¾ç½®æŒ‡å®šä¸‹æ ‡çš„å€¼"><a href="#è®¾ç½®æŒ‡å®šä¸‹æ ‡çš„å€¼" class="header-anchor">#</a> è®¾ç½®æŒ‡å®šä¸‹æ ‡çš„å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lset key index element
lset l1 <span class="token number">2</span> v4
<span class="token operator">&gt;</span> <span class="token string">&quot;OK&quot;</span>
</code></pre></div><h4 id="åˆ é™¤æŒ‡å®šæ•°é‡çš„å€¼"><a href="#åˆ é™¤æŒ‡å®šæ•°é‡çš„å€¼" class="header-anchor">#</a> åˆ é™¤æŒ‡å®šæ•°é‡çš„å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>lrem key count element
- count: <span class="token operator">&gt;</span><span class="token number">0</span> ä»å¤´å‘å°¾æœç´¢ <span class="token operator">&lt;</span><span class="token number">0</span> ä»å°¾å‘å¤´æœç´¢ <span class="token operator">=</span><span class="token number">0</span> ç§»é™¤æ‰€æœ‰ä¸elementç›¸ç­‰çš„å€¼
lrem l1 <span class="token number">0</span> v4
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># è¿”å›ç§»é™¤çš„æ•°é‡</span>
<span class="token comment"># keyä¸å­˜åœ¨è¿”å›0</span>
</code></pre></div><h4 id="è¿”å›åˆ—è¡¨çš„é•¿åº¦"><a href="#è¿”å›åˆ—è¡¨çš„é•¿åº¦" class="header-anchor">#</a> è¿”å›åˆ—è¡¨çš„é•¿åº¦</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>llen key
llen l1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre></div><h4 id="ä¿ç•™æŒ‡å®šåŒºé—´çš„å…ƒç´ "><a href="#ä¿ç•™æŒ‡å®šåŒºé—´çš„å…ƒç´ " class="header-anchor">#</a> ä¿ç•™æŒ‡å®šåŒºé—´çš„å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>ltrim key start stop
- start: èµ·å§‹ä¸‹æ ‡ <span class="token number">0</span>
- stop: ç»“æŸä¸‹æ ‡ <span class="token parameter variable">-1</span>
ltrim l1 <span class="token number">1</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;OK&quot;</span>
</code></pre></div><blockquote><p>Listçš„æ•°æ®ç»“æ„ä¸ºå¿«é€Ÿé“¾è¡¨ç»“æ„(QuickList)
åœ¨å…ƒç´ è¾ƒå°‘çš„æƒ…å†µä¸‹ä¼šä½¿ç”¨ä¸€å—è¿ç»­çš„å†…å­˜å­˜å‚¨ è¿™ä¸ªç»“æ„æ˜¯å‹ç¼©åˆ—è¡¨(ZipList)
å°†æ‰€æœ‰çš„å…ƒç´ ç´§æŒ¨ç€ä¸€èµ·å­˜å‚¨ åˆ†é…çš„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜
å½“æ•°æ®è¾ƒå¤šæ—¶æ‰ä¼šæ”¹æˆQuickList
æ™®é€šé“¾è¡¨éœ€è¦é™„åŠ çš„æŒ‡é’ˆç©ºé—´å¤ªå¤§ æµªè´¹ç©ºé—´ å¦‚: ä¸€ä¸ªåˆ—è¡¨é‡Œåªå­˜intç±»å‹çš„æ•°æ® ç»“æ„ä¸Šè¿˜éœ€è¦é™„åŠ ä¸¤ä¸ªé¢å¤–çš„æŒ‡é’ˆprevå’Œnext</p></blockquote> <p><img src="data:image/jpeg;base64,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" alt="image.jpeg"></p> <blockquote><p>Rediså°†é“¾è¡¨å’ŒZipListç»“åˆç»„æˆäº†QuickList
ä¹Ÿå°±æ˜¯å°†ZipListä½¿ç”¨åŒå‘æŒ‡é’ˆä¸²è”èµ·æ¥ä½¿ç”¨
è¿™æ ·æ—¢æ»¡è¶³äº†å¿«é€Ÿæ’å…¥åˆ é™¤çš„æ€§èƒ½ åˆä¸ä¼šå‡ºç°å¤ªå¤§çš„ç©ºé—´å†—ä½™</p></blockquote> <h3 id="set"><a href="#set" class="header-anchor">#</a> Set</h3> <blockquote><p>Setä¸Listç±»ä¼¼ ç‰¹æ®Šä¹‹å¤„åœ¨äºSetå¯ä»¥è‡ªåŠ¨æ’é‡
Setæä¾›äº†åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨çš„æ¥å£ è¿™æ˜¯Listæ‰€æ²¡æœ‰çš„
Setæ˜¯Stringç±»å‹çš„æ— åºé›†åˆ åº•å±‚æ˜¯ä¸€ä¸ªvalueä¸ºnullçš„hashè¡¨</p></blockquote> <h4 id="æ·»åŠ å€¼"><a href="#æ·»åŠ å€¼" class="header-anchor">#</a> æ·»åŠ å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sadd key member <span class="token punctuation">[</span>member<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
sadd s1 <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h4 id="åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨" class="header-anchor">#</a> åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sismember key member
sismember s1 <span class="token number">3</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># å­˜åœ¨è¿”å›1 ä¸å­˜åœ¨è¿”å›0</span>
</code></pre></div><h4 id="éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ æˆ–æŒ‡å®šä¸ªæ•°å…ƒç´ "><a href="#éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ æˆ–æŒ‡å®šä¸ªæ•°å…ƒç´ " class="header-anchor">#</a> éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ æˆ–æŒ‡å®šä¸ªæ•°å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>srandmemeber key <span class="token punctuation">[</span>count<span class="token punctuation">]</span>
- count: è¿”å›çš„å…ƒç´ ä¸ªæ•° å¦‚æœä¸å†™åˆ™éšæœºè¿”å›ä¸€ä¸ª
srandmember s1
<span class="token operator">&gt;</span> <span class="token string">&quot;3&quot;</span>
srandmember s1 <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;3&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;2&quot;</span>
</code></pre></div><h4 id="ç§»é™¤å¹¶è¿”å›å…ƒç´ ä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ "><a href="#ç§»é™¤å¹¶è¿”å›å…ƒç´ ä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ " class="header-anchor">#</a> ç§»é™¤å¹¶è¿”å›å…ƒç´ ä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>spop key <span class="token punctuation">[</span>count<span class="token punctuation">]</span>
- count: æŒ‡å®šç§»é™¤å…ƒç´ ä¸ªæ•°
spop s1
<span class="token operator">&gt;</span> <span class="token string">&quot;1&quot;</span>
<span class="token comment"># è¿”å›è¢«ç§»é™¤çš„å…ƒç´ </span>
</code></pre></div><h4 id="ç§»é™¤åˆ—è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ "><a href="#ç§»é™¤åˆ—è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ " class="header-anchor">#</a> ç§»é™¤åˆ—è¡¨ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>srem key member <span class="token punctuation">[</span>member<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
srem s1 <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># è¿”å›ç§»é™¤çš„å…ƒç´ ä¸ªæ•° å…ƒç´ ä¸å­˜åœ¨ä¼šè¢«å¿½ç•¥ è¿”å›0</span>
</code></pre></div><h4 id="å°†å…ƒç´ ä»ä¸€ä¸ªé›†åˆç§»åŠ¨åˆ°å¦ä¸€ä¸ªé›†åˆ"><a href="#å°†å…ƒç´ ä»ä¸€ä¸ªé›†åˆç§»åŠ¨åˆ°å¦ä¸€ä¸ªé›†åˆ" class="header-anchor">#</a> å°†å…ƒç´ ä»ä¸€ä¸ªé›†åˆç§»åŠ¨åˆ°å¦ä¸€ä¸ªé›†åˆ</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>smove <span class="token builtin class-name">source</span> destination member <span class="token comment"># è¯¥æ“ä½œæ˜¯åŸå­æ“ä½œ</span>
- source: æºé›†åˆ
- destination: ç›®æ ‡é›†åˆ
smove s1 s2 <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># å¦‚æœç›®æ ‡é›†åˆå·²å­˜åœ¨æŒ‡å®šå…ƒç´  åˆ™sourceä»…ä»…åªæ˜¯å•çº¯çš„ç§»é™¤æŒ‡å®šå…ƒç´ </span>
</code></pre></div><h4 id="è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°"><a href="#è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°" class="header-anchor">#</a> è¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>scard key
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token comment"># keyä¸å­˜åœ¨ è¿”å›0</span>
</code></pre></div><h4 id="è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜"><a href="#è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜" class="header-anchor">#</a> è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>smembers key
</code></pre></div><h4 id="è¿”å›æŒ‡å®šåˆ—è¡¨çš„äº¤é›†"><a href="#è¿”å›æŒ‡å®šåˆ—è¡¨çš„äº¤é›†" class="header-anchor">#</a> è¿”å›æŒ‡å®šåˆ—è¡¨çš„äº¤é›†</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sinter key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
sinter s1 s2
<span class="token operator">&gt;</span> <span class="token string">&quot;apple&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;banana&quot;</span>
sinter s1
<span class="token operator">&gt;</span> <span class="token string">&quot;apple&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;banana&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;orange&quot;</span>
<span class="token comment"># åªç»™å®šä¸€ä¸ªé›†åˆ åˆ™è¿”å›è¯¥é›†åˆæ‰€æœ‰å…ƒç´ </span>
</code></pre></div><h4 id="å°†å¤šä¸ªé›†åˆçš„äº¤é›†ä¿å­˜åˆ°æŒ‡å®šé›†åˆ"><a href="#å°†å¤šä¸ªé›†åˆçš„äº¤é›†ä¿å­˜åˆ°æŒ‡å®šé›†åˆ" class="header-anchor">#</a> å°†å¤šä¸ªé›†åˆçš„äº¤é›†ä¿å­˜åˆ°æŒ‡å®šé›†åˆ</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sinterstore destination key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
- destination: ç›®æ ‡é›†åˆ å¯ä»¥æ˜¯keyæœ¬èº«
sinterstore s3 s1 s2
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token comment"># è¿”å›äº¤é›†çš„ä¸ªæ•° å¦‚æœç›®æ ‡é›†åˆå·²å­˜åœ¨ åˆ™è¦†ç›–</span>
</code></pre></div><h4 id="è¿”å›ç»™å®šé›†åˆçš„å¹¶é›†"><a href="#è¿”å›ç»™å®šé›†åˆçš„å¹¶é›†" class="header-anchor">#</a> è¿”å›ç»™å®šé›†åˆçš„å¹¶é›†</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sunion key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><h4 id="å°†ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°æŒ‡å®šé›†åˆ"><a href="#å°†ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°æŒ‡å®šé›†åˆ" class="header-anchor">#</a> å°†ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°æŒ‡å®šé›†åˆ</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sunionstore destination key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
- destination: ç›®æ ‡é›†åˆ å¯ä»¥æ˜¯keyæœ¬èº«
sunionstore s4 s1 s2
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span> <span class="token comment"># å¹¶é›†å…ƒç´ æ•°</span>
</code></pre></div><h4 id="è¿”å›ç»™å®šé›†åˆçš„å·®é›†"><a href="#è¿”å›ç»™å®šé›†åˆçš„å·®é›†" class="header-anchor">#</a> è¿”å›ç»™å®šé›†åˆçš„å·®é›†</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sdiff</span> key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token function">sdiff</span> s1 s2
<span class="token operator">&gt;</span> <span class="token string">&quot;orange&quot;</span>
<span class="token comment"># è¿”å›aé›†åˆæœ‰bé›†åˆæ²¡æœ‰çš„å…ƒç´ </span>
</code></pre></div><h4 id="å­˜å‚¨ç»™å®šé›†åˆçš„å·®é›†"><a href="#å­˜å‚¨ç»™å®šé›†åˆçš„å·®é›†" class="header-anchor">#</a> å­˜å‚¨ç»™å®šé›†åˆçš„å·®é›†</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>sdiffstore distination key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
- distination: ç›®æ ‡é›†åˆ
sdiffstore s5 s1 s2
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> <span class="token comment"># å·®é›†ä¸ªæ•°</span>
</code></pre></div><h3 id="hash"><a href="#hash" class="header-anchor">#</a> Hash</h3> <blockquote><p>Hashæ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆ ç±»ä¼¼Javaçš„Map
Hashæ˜¯ä¸€ä¸ªStringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ é€‚åˆäºå¯¹è±¡çš„å­˜å‚¨</p></blockquote> <h4 id="æ·»åŠ å€¼-2"><a href="#æ·»åŠ å€¼-2" class="header-anchor">#</a> æ·»åŠ å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hset key field value <span class="token punctuation">[</span>field value<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
hset user:1 name Naihe age <span class="token number">19</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token comment"># ä¸hmsetè¯­æ³•ä¸€è‡´</span>
hmset key field value <span class="token punctuation">[</span>field value<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><h4 id="å½“æŒ‡å®šhashä¸å­˜åœ¨æ—¶-æ›´æ–°å­—æ®µ"><a href="#å½“æŒ‡å®šhashä¸å­˜åœ¨æ—¶-æ›´æ–°å­—æ®µ" class="header-anchor">#</a> å½“æŒ‡å®šhashä¸å­˜åœ¨æ—¶ æ›´æ–°å­—æ®µ</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hsetnx key field value
hsetnx user:1 age <span class="token number">18</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token comment"># å½“hashä¸å­˜åœ¨æ—¶ æ‰§è¡Œæ“ä½œ æˆåŠŸè¿”å›1</span>
<span class="token comment"># å¦‚æœhashå­˜åœ¨ è¿”å›0</span>
</code></pre></div><h4 id="è·å–å€¼"><a href="#è·å–å€¼" class="header-anchor">#</a> è·å–å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hget key field
- field: æŸ¥è¯¢å­—æ®µ
hget user:1 name
<span class="token operator">&gt;</span> <span class="token string">&quot;Naihe&quot;</span>
</code></pre></div><h4 id="åˆ¤æ–­æŒ‡å®šfieldæ˜¯å¦å­˜åœ¨äºhashä¸­"><a href="#åˆ¤æ–­æŒ‡å®šfieldæ˜¯å¦å­˜åœ¨äºhashä¸­" class="header-anchor">#</a> åˆ¤æ–­æŒ‡å®šfieldæ˜¯å¦å­˜åœ¨äºhashä¸­</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hexists key field
hexists user:1 age
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
hexists user:1 sex
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token comment"># fieldå­˜åœ¨è¿”å›1 ä¸å­˜åœ¨è¿”å›0</span>
</code></pre></div><h4 id="åˆ é™¤hashä¸­çš„field"><a href="#åˆ é™¤hashä¸­çš„field" class="header-anchor">#</a> åˆ é™¤hashä¸­çš„field</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hdel key field <span class="token punctuation">[</span>field<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
hdel user:3 name
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># hdelä¸€æ¬¡åªèƒ½åˆ é™¤ä¸€ä¸ªfield</span>
<span class="token comment"># å¦‚æœfieldéƒ½åˆ å®Œäº† åˆ™keyä¹Ÿä¸å­˜åœ¨äº†</span>
</code></pre></div><h4 id="è·å–hashä¸­çš„fieldæ•°é‡"><a href="#è·å–hashä¸­çš„fieldæ•°é‡" class="header-anchor">#</a> è·å–hashä¸­çš„fieldæ•°é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hlen key
hlen user:1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span> <span class="token comment"># ä¸å­˜åœ¨è¿”å›0</span>
</code></pre></div><h4 id="è·å–æŒ‡å®šhashä¸­fieldçš„é•¿åº¦"><a href="#è·å–æŒ‡å®šhashä¸­fieldçš„é•¿åº¦" class="header-anchor">#</a> è·å–æŒ‡å®šhashä¸­fieldçš„é•¿åº¦</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hstrlen key field
hstrlen user:1 name
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
<span class="token comment"># keyæˆ–fieldä¸å­˜åœ¨ è¿”å›0</span>
</code></pre></div><h4 id="è·å–æŒ‡å®šhashçš„æ‰€æœ‰fieldå’Œvalue"><a href="#è·å–æŒ‡å®šhashçš„æ‰€æœ‰fieldå’Œvalue" class="header-anchor">#</a> è·å–æŒ‡å®šhashçš„æ‰€æœ‰fieldå’Œvalue</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hgetall key
hgetall user:1
<span class="token operator">&gt;</span> <span class="token string">&quot;name&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;Naihe&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;age&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;19&quot;</span>
</code></pre></div><h4 id="ä¸ºhashä¸­fieldçš„å€¼åŠ ä¸ŠæŒ‡å®šå¢é‡"><a href="#ä¸ºhashä¸­fieldçš„å€¼åŠ ä¸ŠæŒ‡å®šå¢é‡" class="header-anchor">#</a> ä¸ºhashä¸­fieldçš„å€¼åŠ ä¸ŠæŒ‡å®šå¢é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hincrby key field increment
hincrby user:1 age <span class="token parameter variable">-1</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">18</span> <span class="token comment"># è¿”å›å¢é‡åçš„ç»“æœ</span>
<span class="token comment"># å¦‚æœfieldä¸å­˜åœ¨ åœ¨æ‰§è¡Œå‘½ä»¤å‰ä¼šåˆå§‹åŒ–fieldçš„å€¼ä¸º0</span>
</code></pre></div><h4 id="ä¸ºhashä¸­fieldçš„å€¼åŠ ä¸ŠæŒ‡å®šæµ®ç‚¹å‹å¢é‡"><a href="#ä¸ºhashä¸­fieldçš„å€¼åŠ ä¸ŠæŒ‡å®šæµ®ç‚¹å‹å¢é‡" class="header-anchor">#</a> ä¸ºhashä¸­fieldçš„å€¼åŠ ä¸ŠæŒ‡å®šæµ®ç‚¹å‹å¢é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hincrbyfloat key field incrment
hincrbyfloat user:1 age <span class="token number">0.1</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;18.1&quot;</span>
</code></pre></div><h4 id="è¿”å›hashä¸­æŒ‡å®šfieldçš„å€¼"><a href="#è¿”å›hashä¸­æŒ‡å®šfieldçš„å€¼" class="header-anchor">#</a> è¿”å›hashä¸­æŒ‡å®šfieldçš„å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hmget key field <span class="token punctuation">[</span>field<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
hmget user:1 name age
<span class="token operator">&gt;</span> <span class="token string">&quot;Naihe&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;18.1&quot;</span>
</code></pre></div><h4 id="è¿”å›hashä¸­æ‰€æœ‰çš„field"><a href="#è¿”å›hashä¸­æ‰€æœ‰çš„field" class="header-anchor">#</a> è¿”å›hashä¸­æ‰€æœ‰çš„field</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hkeys key
hkeys user:1
<span class="token operator">&gt;</span> <span class="token string">&quot;name&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;age&quot;</span>
</code></pre></div><h4 id="è¿”å›hashä¸­æ‰€æœ‰fieldçš„value"><a href="#è¿”å›hashä¸­æ‰€æœ‰fieldçš„value" class="header-anchor">#</a> è¿”å›hashä¸­æ‰€æœ‰fieldçš„value</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>hvals key
hvals user:1
<span class="token operator">&gt;</span> <span class="token string">&quot;Naihe&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;18.1&quot;</span>
</code></pre></div><blockquote><p>Hashç±»å‹å¯¹åº”çš„æ•°æ®ç»“æ„æœ‰ä¸¤ç§: å‹ç¼©åˆ—è¡¨(ZipList)å’Œå“ˆå¸Œè¡¨(HashTable)
å½“field-valueé•¿åº¦è¾ƒçŸ­ä¸”ä¸ªæ•°è¾ƒå°‘æ—¶ ä½¿ç”¨ZipList åä¹‹ä½¿ç”¨HashTable</p></blockquote> <h3 id="zset"><a href="#zset" class="header-anchor">#</a> Zset</h3> <blockquote><p>Zsetç±»å‹å’ŒSetç±»å‹åŸºæœ¬ç›¸ä¼¼ ä¸åŒä¹‹å¤„åœ¨äºZseté›†åˆæ˜¯æœ‰åºçš„ å› æ­¤ä¹Ÿè¢«ç§°ä¸ºæœ‰åºé›†åˆ
Zsetä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å…³è”äº†ä¸€ä¸ªè¯„åˆ†(score) è¯¥è¯„åˆ†è¢«ç”¨æ¥è¿›è¡Œå‡åºçš„æ’åº
Zsetä¸­å…ƒç´ æ˜¯å”¯ä¸€çš„ ä½†è¯„åˆ†ä¸æ˜¯å”¯ä¸€çš„</p></blockquote> <h4 id="æ·»åŠ å€¼-3"><a href="#æ·»åŠ å€¼-3" class="header-anchor">#</a> æ·»åŠ å€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zadd key <span class="token punctuation">[</span>NX<span class="token operator">|</span>XX<span class="token punctuation">]</span> <span class="token punctuation">[</span>GT<span class="token operator">|</span>LT<span class="token punctuation">]</span> <span class="token punctuation">[</span>CH<span class="token punctuation">]</span> <span class="token punctuation">[</span>INCR<span class="token punctuation">]</span> score member <span class="token punctuation">[</span>score member<span class="token punctuation">]</span>
- score: è¯„åˆ†
zadd class <span class="token number">98</span> yuwen <span class="token number">88</span> shuxue <span class="token number">99</span> yingyu
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h4 id="è·å–é›†åˆçš„å…ƒç´ æ•°é‡"><a href="#è·å–é›†åˆçš„å…ƒç´ æ•°é‡" class="header-anchor">#</a> è·å–é›†åˆçš„å…ƒç´ æ•°é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zcard key
zcard class
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h4 id="ä¸ºæŒ‡å®šé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ åŠ ä¸Šå¢é‡"><a href="#ä¸ºæŒ‡å®šé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ åŠ ä¸Šå¢é‡" class="header-anchor">#</a> ä¸ºæŒ‡å®šé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ åŠ ä¸Šå¢é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zincrby key increment member
</code></pre></div><h4 id="è¿”å›æŒ‡å®šå…ƒç´ çš„scoreå€¼"><a href="#è¿”å›æŒ‡å®šå…ƒç´ çš„scoreå€¼" class="header-anchor">#</a> è¿”å›æŒ‡å®šå…ƒç´ çš„scoreå€¼</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zscore key member
zscore class yingyu
<span class="token operator">&gt;</span> <span class="token string">&quot;99&quot;</span>
</code></pre></div><h4 id="è·å–é›†åˆä¸­scoreåœ¨minå’Œmaxä¹‹é—´çš„å…ƒç´ æ•°é‡"><a href="#è·å–é›†åˆä¸­scoreåœ¨minå’Œmaxä¹‹é—´çš„å…ƒç´ æ•°é‡" class="header-anchor">#</a> è·å–é›†åˆä¸­scoreåœ¨minå’Œmaxä¹‹é—´çš„å…ƒç´ æ•°é‡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zcount key min max
- min: æœ€å°å€¼
- max: æœ€å¤§å€¼
zcount class <span class="token number">0</span> <span class="token number">99</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h4 id="è¿”å›æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ "><a href="#è¿”å›æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ " class="header-anchor">#</a> è¿”å›æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zrange key start stop <span class="token punctuation">[</span>BYSCORE<span class="token operator">|</span>BYLEX<span class="token punctuation">]</span> <span class="token punctuation">[</span>REV<span class="token punctuation">]</span> <span class="token punctuation">[</span>LIMIT offset count<span class="token punctuation">]</span> <span class="token punctuation">[</span>WITHSCORES<span class="token punctuation">]</span>
- start: èµ·å§‹ä¸‹æ ‡ <span class="token number">0</span>
- stop: ç»“æŸä¸‹æ ‡ <span class="token parameter variable">-1</span>
- withscores: å…ƒç´ å€¼å’Œscoreä¸€èµ·è¿”å›
zrange class <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;shuxue&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;yuwen&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;yingyu&quot;</span>
zrange class <span class="token number">0</span> <span class="token parameter variable">-1</span> withscores
<span class="token operator">&gt;</span> <span class="token string">&quot;shuxue&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;88&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;yuwen&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;98&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;yingyu&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;99&quot;</span>
</code></pre></div><h4 id="ä»¥é™åºæ–¹å¼è¿”å›æŒ‡å®šåŒºé—´å…ƒç´ "><a href="#ä»¥é™åºæ–¹å¼è¿”å›æŒ‡å®šåŒºé—´å…ƒç´ " class="header-anchor">#</a> ä»¥é™åºæ–¹å¼è¿”å›æŒ‡å®šåŒºé—´å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zrevrange key start stop <span class="token punctuation">[</span>WITHSCORES<span class="token punctuation">]</span>
zrevrange class <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;yingyu&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;yuwen&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;shuxue&quot;</span>
</code></pre></div><h4 id="è¿”å›é›†åˆå†…çš„å…ƒç´ æ’å"><a href="#è¿”å›é›†åˆå†…çš„å…ƒç´ æ’å" class="header-anchor">#</a> è¿”å›é›†åˆå†…çš„å…ƒç´ æ’å</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zrank key member
zrank class yuwen
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># æœ€å°æ’åä¸º0</span>
</code></pre></div><h4 id="ä»¥é™åºæ–¹å¼è¿”å›é›†åˆå†…å…ƒç´ æ’å"><a href="#ä»¥é™åºæ–¹å¼è¿”å›é›†åˆå†…å…ƒç´ æ’å" class="header-anchor">#</a> ä»¥é™åºæ–¹å¼è¿”å›é›†åˆå†…å…ƒç´ æ’å</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zrevrank key member
zrevrank class yingyu
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</code></pre></div><h4 id="ç§»é™¤æŒ‡å®šå…ƒç´ "><a href="#ç§»é™¤æŒ‡å®šå…ƒç´ " class="header-anchor">#</a> ç§»é™¤æŒ‡å®šå…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zrem key member <span class="token punctuation">[</span>member<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><h4 id="ç§»é™¤æŒ‡å®šæ’ååŒºé—´å†…çš„å…ƒç´ "><a href="#ç§»é™¤æŒ‡å®šæ’ååŒºé—´å†…çš„å…ƒç´ " class="header-anchor">#</a> ç§»é™¤æŒ‡å®šæ’ååŒºé—´å†…çš„å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zremrangebyrank key start stop
<span class="token comment"># è¿”å›ç§»é™¤å…ƒç´ çš„æ•°é‡</span>
</code></pre></div><h4 id="ç§»é™¤scoreåœ¨minå’Œmaxä¹‹é—´çš„å…ƒç´ "><a href="#ç§»é™¤scoreåœ¨minå’Œmaxä¹‹é—´çš„å…ƒç´ " class="header-anchor">#</a> ç§»é™¤scoreåœ¨minå’Œmaxä¹‹é—´çš„å…ƒç´ </h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zremrangebyscore key min max
<span class="token comment"># è¿”å›ç§»é™¤å…ƒç´ æ•°é‡</span>
</code></pre></div><h4 id="å½“scoreç›¸ç­‰æ—¶-ä»¥å­—å…¸åºè¿›è¡Œæ’åºå¹¶è¿”å›"><a href="#å½“scoreç›¸ç­‰æ—¶-ä»¥å­—å…¸åºè¿›è¡Œæ’åºå¹¶è¿”å›" class="header-anchor">#</a> å½“scoreç›¸ç­‰æ—¶ ä»¥å­—å…¸åºè¿›è¡Œæ’åºå¹¶è¿”å›</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>zrangebylex key min max
</code></pre></div><blockquote><p>Zsetæ˜¯Redisæä¾›çš„ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„æ•°æ®ç»“æ„
ä¸€æ–¹é¢ç­‰ä»·äºJavaä¸­çš„Map å¯ä»¥ç»™æ¯ä¸€ä¸ªå…ƒç´ èµ‹äºˆæƒé‡score
å¦ä¸€æ–¹é¢ç±»ä¼¼TreeSet å†…éƒ¨å…ƒç´ ä¼šæŒ‰ç…§scoreè¿›è¡Œæ’åº å¯ä»¥å¾—åˆ°æ¯ä¸ªå…ƒç´ çš„åæ¬¡ è¿˜å¯ä»¥é€šè¿‡scoreçš„èŒƒå›´æ¥è·å–å…ƒç´ çš„åˆ—è¡¨
Zsetåº•å±‚ä½¿ç”¨äº†ä¸¤ä¸ªæ•°æ®ç»“æ„ Hashå’Œè·³è·ƒè¡¨
Hashçš„ä½œç”¨å°±æ˜¯å…³è”å…ƒç´ valueå’Œæƒé‡score ä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§ é€šè¿‡valueå¯ä»¥æ‰¾åˆ°score
è·³è·ƒè¡¨çš„ç›®çš„åœ¨äºç»™å…ƒç´ æ’åº æ ¹æ®scoreçš„èŒƒå›´è·å–å…ƒç´ åˆ—è¡¨</p></blockquote> <p><img src="/study/assets/img/4.60617e81.jpeg" alt="image.jpeg"></p> <h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="header-anchor">#</a> é…ç½®æ–‡ä»¶</h2> <h3 id="å•ä½"><a href="#å•ä½" class="header-anchor">#</a> å•ä½</h3> <blockquote><p>å¤§å°å†™ä¸æ•æ„Ÿ</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># Redis configuration file example.</span>
<span class="token comment">#</span>
<span class="token comment"># Note that in order to read the configuration file, Redis must be</span>
<span class="token comment"># started with the file path as first argument:</span>
<span class="token comment">#</span>
<span class="token comment"># ./redis-server /path/to/redis.conf</span>

<span class="token comment"># Note on units: when memory size is needed, it is possible to specify</span>
<span class="token comment"># it in the usual form of 1k 5GB 4M and so forth:</span>
<span class="token comment">#</span>
<span class="token comment"># 1k =&gt; 1000 bytes</span>
<span class="token comment"># 1kb =&gt; 1024 bytes</span>
<span class="token comment"># 1m =&gt; 1000000 bytes</span>
<span class="token comment"># 1mb =&gt; 1024*1024 bytes</span>
<span class="token comment"># 1g =&gt; 1000000000 bytes</span>
<span class="token comment"># 1gb =&gt; 1024*1024*1024 bytes</span>
<span class="token comment">#</span>
<span class="token comment"># units are case insensitive so 1GB 1Gb 1gB are all the same.</span>
</code></pre></div><h3 id="includes"><a href="#includes" class="header-anchor">#</a> INCLUDES</h3> <blockquote><p>å¯ä»¥å¼•å…¥å…¶ä»–é…ç½®æ–‡ä»¶</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################## INCLUDES ###################################</span>

<span class="token comment"># Include one or more other config files here.  This is useful if you</span>
<span class="token comment"># have a standard template that goes to all Redis servers but also need</span>
<span class="token comment"># to customize a few per-server settings.  Include files can include</span>
<span class="token comment"># other files, so use this wisely.</span>
<span class="token comment">#</span>
<span class="token comment"># Note that option &quot;include&quot; won't be rewritten by command &quot;CONFIG REWRITE&quot;</span>
<span class="token comment"># from admin or Redis Sentinel. Since Redis always uses the last processed</span>
<span class="token comment"># line as value of a configuration directive, you'd better put includes</span>
<span class="token comment"># at the beginning of this file to avoid overwriting config change at runtime.</span>
<span class="token comment">#</span>
<span class="token comment"># If instead you are interested in using includes to override configuration</span>
<span class="token comment"># options, it is better to use include as the last line.</span>
<span class="token comment">#</span>
<span class="token comment"># Included paths may contain wildcards. All files matching the wildcards will</span>
<span class="token comment"># be included in alphabetical order.</span>
<span class="token comment"># Note that if an include path contains a wildcards but no files match it when</span>
<span class="token comment"># the server is started, the include statement will be ignored and no error will</span>
<span class="token comment"># be emitted.  It is safe, therefore, to include wildcard files from empty</span>
<span class="token comment"># directories.</span>
<span class="token comment">#</span>
<span class="token comment"># include /path/to/local.conf</span>
<span class="token comment"># include /path/to/other.conf</span>
<span class="token comment"># include /path/to/fragments/*.conf</span>
<span class="token comment">#</span>
</code></pre></div><h3 id="ç½‘ç»œé…ç½®"><a href="#ç½‘ç»œé…ç½®" class="header-anchor">#</a> ç½‘ç»œé…ç½®</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################## NETWORK #####################################</span>

<span class="token comment"># By default, if no &quot;bind&quot; configuration directive is specified, Redis listens</span>
<span class="token comment"># for connections from all available network interfaces on the host machine.</span>
<span class="token comment"># It is possible to listen to just one or multiple selected interfaces using</span>
<span class="token comment"># the &quot;bind&quot; configuration directive, followed by one or more IP addresses.</span>
<span class="token comment"># Each address can be prefixed by &quot;-&quot;, which means that redis will not fail to</span>
<span class="token comment"># start if the address is not available. Being not available only refers to</span>
<span class="token comment"># addresses that does not correspond to any network interface. Addresses that</span>
<span class="token comment"># are already in use will always fail, and unsupported protocols will always BE</span>
<span class="token comment"># silently skipped.</span>
<span class="token comment">#</span>
<span class="token comment"># Examples:</span>
<span class="token comment">#</span>
<span class="token comment"># bind 192.168.1.100 10.0.0.1     # listens on two specific IPv4 addresses</span>
<span class="token comment"># bind 127.0.0.1 ::1              # listens on loopback IPv4 and IPv6</span>
<span class="token comment"># bind * -::*                     # like the default, all available interfaces</span>
<span class="token comment">#</span>
<span class="token comment"># ~~~ WARNING ~~~ If the computer running Redis is directly exposed to the</span>
<span class="token comment"># internet, binding to all the interfaces is dangerous and will expose the</span>
<span class="token comment"># instance to everybody on the internet. So by default we uncomment the</span>
<span class="token comment"># following bind directive, that will force Redis to listen only on the</span>
<span class="token comment"># IPv4 and IPv6 (if available) loopback interface addresses (this means Redis</span>
<span class="token comment"># will only be able to accept client connections from the same host that it is</span>
<span class="token comment"># running on).</span>
<span class="token comment">#</span>
<span class="token comment"># IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span>
<span class="token comment"># COMMENT OUT THE FOLLOWING LINE.</span>
<span class="token comment">#</span>
<span class="token comment"># You will also need to set a password unless you explicitly disable protected</span>
<span class="token comment"># mode.</span>
<span class="token comment"># ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="token comment"># bind 127.0.0.1 -::1</span>
<span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
å¦‚æœbindçš„å€¼ä¸º127.0.0.1 åªèƒ½åœ¨æœ¬åœ°è®¿é—®

<span class="token comment"># By default, outgoing connections (from replica to master, from Sentinel to</span>
<span class="token comment"># instances, cluster bus, etc.) are not bound to a specific local address. In</span>
<span class="token comment"># most cases, this means the operating system will handle that based on routing</span>
<span class="token comment"># and the interface through which the connection goes out.</span>
<span class="token comment">#</span>
<span class="token comment"># Using bind-source-addr it is possible to configure a specific address to bind</span>
<span class="token comment"># to, which may also affect how the connection gets routed.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment">#</span>
<span class="token comment"># bind-source-addr 10.0.0.1</span>

<span class="token comment"># Protected mode is a layer of security protection, in order to avoid that</span>
<span class="token comment"># Redis instances left open on the internet are accessed and exploited.</span>
<span class="token comment">#</span>
<span class="token comment"># When protected mode is on and the default user has no password, the server</span>
<span class="token comment"># only accepts local connections from the IPv4 address (127.0.0.1), IPv6 address</span>
<span class="token comment"># (::1) or Unix domain sockets.</span>
<span class="token comment">#</span>
<span class="token comment"># By default protected mode is enabled. You should disable it only if</span>
<span class="token comment"># you are sure you want clients from other hosts to connect to Redis</span>
<span class="token comment"># even if no authentication is configured.</span>
protected-mode <span class="token function">yes</span>
é»˜è®¤å¯åŠ¨ä¿æŠ¤æ¨¡å¼

<span class="token comment"># Redis uses default hardened security configuration directives to reduce the</span>
<span class="token comment"># attack surface on innocent users. Therefore, several sensitive configuration</span>
<span class="token comment"># directives are immutable, and some potentially-dangerous commands are blocked.</span>
<span class="token comment">#</span>
<span class="token comment"># Configuration directives that control files that Redis writes to (e.g., 'dir'</span>
<span class="token comment"># and 'dbfilename') and that aren't usually modified during runtime</span>
<span class="token comment"># are protected by making them immutable.</span>
<span class="token comment">#</span>
<span class="token comment"># Commands that can increase the attack surface of Redis and that aren't usually</span>
<span class="token comment"># called by users are blocked by default.</span>
<span class="token comment">#</span>
<span class="token comment"># These can be exposed to either all connections or just local ones by setting</span>
<span class="token comment"># each of the configs listed below to either of these values:</span>
<span class="token comment">#</span>
<span class="token comment"># no    - Block for any connection (remain immutable)</span>
<span class="token comment"># yes   - Allow for any connection (no protection)</span>
<span class="token comment"># local - Allow only for local connections. Ones originating from the</span>
<span class="token comment">#         IPv4 address (127.0.0.1), IPv6 address (::1) or Unix domain sockets.</span>
<span class="token comment">#</span>
<span class="token comment"># enable-protected-configs no</span>
<span class="token comment"># enable-debug-command no</span>
<span class="token comment"># enable-module-command no</span>

<span class="token comment"># Accept connections on the specified port, default is 6379 (IANA #815344).</span>
<span class="token comment"># If port 0 is specified Redis will not listen on a TCP socket.</span>
port <span class="token number">6379</span>
ç«¯å£å·

<span class="token comment"># TCP listen() backlog.</span>
<span class="token comment">#</span>
<span class="token comment"># In high requests-per-second environments you need a high backlog in order</span>
<span class="token comment"># to avoid slow clients connection issues. Note that the Linux kernel</span>
<span class="token comment"># will silently truncate it to the value of /proc/sys/net/core/somaxconn so</span>
<span class="token comment"># make sure to raise both the value of somaxconn and tcp_max_syn_backlog</span>
<span class="token comment"># in order to get the desired effect.</span>
tcp-backlog <span class="token number">511</span>
è®¾ç½®tcpçš„backlogå€¼
backlogæ˜¯ä¸€ä¸ªè¿æ¥é˜Ÿåˆ— backlogæ€»å’Œ <span class="token operator">=</span> æœªå®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ— + å·²å®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ—

<span class="token comment"># Unix socket.</span>
<span class="token comment">#</span>
<span class="token comment"># Specify the path for the Unix socket that will be used to listen for</span>
<span class="token comment"># incoming connections. There is no default, so Redis will not listen</span>
<span class="token comment"># on a unix socket when not specified.</span>
<span class="token comment">#</span>
<span class="token comment"># unixsocket /run/redis.sock</span>
<span class="token comment"># unixsocketperm 700</span>

<span class="token comment"># Close the connection after a client is idle for N seconds (0 to disable)</span>
<span class="token function">timeout</span> <span class="token number">0</span>
ä¼šè¯è¶…æ—¶å…³é—­æ—¶é—´ /s
<span class="token number">0</span>ä¸ºæ°¸ä¸è¶…æ—¶

<span class="token comment"># TCP keepalive.</span>
<span class="token comment">#</span>
<span class="token comment"># If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence</span>
<span class="token comment"># of communication. This is useful for two reasons:</span>
<span class="token comment">#</span>
<span class="token comment"># 1) Detect dead peers.</span>
<span class="token comment"># 2) Force network equipment in the middle to consider the connection to be</span>
<span class="token comment">#    alive.</span>
<span class="token comment">#</span>
<span class="token comment"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span>
<span class="token comment"># Note that to close the connection the double of the time is needed.</span>
<span class="token comment"># On other kernels the period depends on the kernel configuration.</span>
<span class="token comment">#</span>
<span class="token comment"># A reasonable value for this option is 300 seconds, which is the new</span>
<span class="token comment"># Redis default starting with Redis 3.2.1.</span>
tcp-keepalive <span class="token number">300</span>
å¿ƒè·³æ£€æŸ¥æ—¶é—´ /s

<span class="token comment"># Apply OS-specific mechanism to mark the listening socket with the specified</span>
<span class="token comment"># ID, to support advanced routing and filtering capabilities.</span>
<span class="token comment">#</span>
<span class="token comment"># On Linux, the ID represents a connection mark.</span>
<span class="token comment"># On FreeBSD, the ID represents a socket cookie ID.</span>
<span class="token comment"># On OpenBSD, the ID represents a route table ID.</span>
<span class="token comment">#</span>
<span class="token comment"># The default value is 0, which implies no marking is required.</span>
<span class="token comment"># socket-mark-id 0</span>

<span class="token comment">################################# TLS/SSL #####################################</span>

<span class="token comment"># By default, TLS/SSL is disabled. To enable it, the &quot;tls-port&quot; configuration</span>
<span class="token comment"># directive can be used to define TLS-listening ports. To enable TLS on the</span>
<span class="token comment"># default port, use:</span>
<span class="token comment">#</span>
<span class="token comment"># port 0</span>
<span class="token comment"># tls-port 6379</span>

<span class="token comment"># Configure a X.509 certificate and private key to use for authenticating the</span>
<span class="token comment"># server to connected clients, masters or cluster peers.  These files should be</span>
<span class="token comment"># PEM formatted.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-cert-file redis.crt</span>
<span class="token comment"># tls-key-file redis.key</span>
<span class="token comment">#</span>
<span class="token comment"># If the key file is encrypted using a passphrase, it can be included here</span>
<span class="token comment"># as well.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-key-file-pass secret</span>

<span class="token comment"># Normally Redis uses the same certificate for both server functions (accepting</span>
<span class="token comment"># connections) and client functions (replicating from a master, establishing</span>
<span class="token comment"># cluster bus connections, etc.).</span>
<span class="token comment">#</span>
<span class="token comment"># Sometimes certificates are issued with attributes that designate them as</span>
<span class="token comment"># client-only or server-only certificates. In that case it may be desired to use</span>
<span class="token comment"># different certificates for incoming (server) and outgoing (client)</span>
<span class="token comment"># connections. To do that, use the following directives:</span>
<span class="token comment">#</span>
<span class="token comment"># tls-client-cert-file client.crt</span>
<span class="token comment"># tls-client-key-file client.key</span>
<span class="token comment">#</span>
<span class="token comment"># If the key file is encrypted using a passphrase, it can be included here</span>
<span class="token comment"># as well.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-client-key-file-pass secret</span>

<span class="token comment"># Configure a DH parameters file to enable Diffie-Hellman (DH) key exchange,</span>
<span class="token comment"># required by older versions of OpenSSL (&lt;3.0). Newer versions do not require</span>
<span class="token comment"># this configuration and recommend against it.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-dh-params-file redis.dh</span>

<span class="token comment"># Configure a CA certificate(s) bundle or directory to authenticate TLS/SSL</span>
<span class="token comment"># clients and peers.  Redis requires an explicit configuration of at least one</span>
<span class="token comment"># of these, and will not implicitly use the system wide configuration.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-ca-cert-file ca.crt</span>
<span class="token comment"># tls-ca-cert-dir /etc/ssl/certs</span>

<span class="token comment"># By default, clients (including replica servers) on a TLS port are required</span>
<span class="token comment"># to authenticate using valid client side certificates.</span>
<span class="token comment">#</span>
<span class="token comment"># If &quot;no&quot; is specified, client certificates are not required and not accepted.</span>
<span class="token comment"># If &quot;optional&quot; is specified, client certificates are accepted and must be</span>
<span class="token comment"># valid if provided, but are not required.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-auth-clients no</span>
<span class="token comment"># tls-auth-clients optional</span>

<span class="token comment"># By default, a Redis replica does not attempt to establish a TLS connection</span>
<span class="token comment"># with its master.</span>
<span class="token comment">#</span>
<span class="token comment"># Use the following directive to enable TLS on replication links.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-replication yes</span>

<span class="token comment"># By default, the Redis Cluster bus uses a plain TCP connection. To enable</span>
<span class="token comment"># TLS for the bus protocol, use the following directive:</span>
<span class="token comment">#</span>
<span class="token comment"># tls-cluster yes</span>

<span class="token comment"># By default, only TLSv1.2 and TLSv1.3 are enabled and it is highly recommended</span>
<span class="token comment"># that older formally deprecated versions are kept disabled to reduce the attack surface.</span>
<span class="token comment"># You can explicitly specify TLS versions to support.</span>
<span class="token comment"># Allowed values are case insensitive and include &quot;TLSv1&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1.2&quot;,</span>
<span class="token comment"># &quot;TLSv1.3&quot; (OpenSSL &gt;= 1.1.1) or any combination.</span>
<span class="token comment"># To enable only TLSv1.2 and TLSv1.3, use:</span>
<span class="token comment">#</span>
<span class="token comment"># tls-protocols &quot;TLSv1.2 TLSv1.3&quot;</span>

<span class="token comment"># Configure allowed ciphers.  See the ciphers(1ssl) manpage for more information</span>
<span class="token comment"># about the syntax of this string.</span>
<span class="token comment">#</span>
<span class="token comment"># Note: this configuration applies only to &lt;= TLSv1.2.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-ciphers DEFAULT:!MEDIUM</span>

<span class="token comment"># Configure allowed TLSv1.3 ciphersuites.  See the ciphers(1ssl) manpage for more</span>
<span class="token comment"># information about the syntax of this string, and specifically for TLSv1.3</span>
<span class="token comment"># ciphersuites.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-ciphersuites TLS_CHACHA20_POLY1305_SHA256</span>

<span class="token comment"># When choosing a cipher, use the server's preference instead of the client</span>
<span class="token comment"># preference. By default, the server follows the client's preference.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-prefer-server-ciphers yes</span>

<span class="token comment"># By default, TLS session caching is enabled to allow faster and less expensive</span>
<span class="token comment"># reconnections by clients that support it. Use the following directive to disable</span>
<span class="token comment"># caching.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-session-caching no</span>

<span class="token comment"># Change the default number of TLS sessions cached. A zero value sets the cache</span>
<span class="token comment"># to unlimited size. The default size is 20480.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-session-cache-size 5000</span>

<span class="token comment"># Change the default timeout of cached TLS sessions. The default timeout is 300</span>
<span class="token comment"># seconds.</span>
<span class="token comment">#</span>
<span class="token comment"># tls-session-cache-timeout 60</span>
</code></pre></div><h3 id="general"><a href="#general" class="header-anchor">#</a> GENERAL</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################# GENERAL #####################################</span>

<span class="token comment"># By default Redis does not run as a daemon. Use 'yes' if you need it.</span>
<span class="token comment"># Note that Redis will write a pid file in /var/run/redis.pid when daemonized.</span>
<span class="token comment"># When Redis is supervised by upstart or systemd, this parameter has no impact.</span>
daemonize <span class="token function">yes</span>
æ˜¯å¦ä¸ºåå°è¿›ç¨‹

<span class="token comment"># If you run Redis from upstart or systemd, Redis can interact with your</span>
<span class="token comment"># supervision tree. Options:</span>
<span class="token comment">#   supervised no      - no supervision interaction</span>
<span class="token comment">#   supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span>
<span class="token comment">#                        requires &quot;expect stop&quot; in your upstart job config</span>
<span class="token comment">#   supervised systemd - signal systemd by writing READY=1 to $NOTIFY_SOCKET</span>
<span class="token comment">#                        on startup, and updating Redis status on a regular</span>
<span class="token comment">#                        basis.</span>
<span class="token comment">#   supervised auto    - detect upstart or systemd method based on</span>
<span class="token comment">#                        UPSTART_JOB or NOTIFY_SOCKET environment variables</span>
<span class="token comment"># Note: these supervision methods only signal &quot;process is ready.&quot;</span>
<span class="token comment">#       They do not enable continuous pings back to your supervisor.</span>
<span class="token comment">#</span>
<span class="token comment"># The default is &quot;no&quot;. To run under upstart/systemd, you can simply uncomment</span>
<span class="token comment"># the line below:</span>
<span class="token comment">#</span>
<span class="token comment"># supervised auto</span>

<span class="token comment"># If a pid file is specified, Redis writes it where specified at startup</span>
<span class="token comment"># and removes it at exit.</span>
<span class="token comment">#</span>
<span class="token comment"># When the server runs non daemonized, no pid file is created if none is</span>
<span class="token comment"># specified in the configuration. When the server is daemonized, the pid file</span>
<span class="token comment"># is used even if not specified, defaulting to &quot;/var/run/redis.pid&quot;.</span>
<span class="token comment">#</span>
<span class="token comment"># Creating a pid file is best effort: if Redis is not able to create it</span>
<span class="token comment"># nothing bad happens, the server will start and run normally.</span>
<span class="token comment">#</span>
<span class="token comment"># Note that on modern Linux systems &quot;/run/redis.pid&quot; is more conforming</span>
<span class="token comment"># and should be used instead.</span>
pidfile /var/run/redis_6379.pid
Redisè¿›ç¨‹IDæ–‡ä»¶å­˜æ”¾ä½ç½®

<span class="token comment"># Specify the server verbosity level.</span>
<span class="token comment"># This can be one of:</span>
<span class="token comment"># debug (a lot of information, useful for development/testing)</span>
<span class="token comment"># verbose (many rarely useful info, but not a mess like the debug level)</span>
<span class="token comment"># notice (moderately verbose, what you want in production probably)</span>
<span class="token comment"># warning (only very important / critical messages are logged)</span>
loglevel notice
æ—¥å¿—çº§åˆ«

<span class="token comment"># Specify the log file name. Also the empty string can be used to force</span>
<span class="token comment"># Redis to log on the standard output. Note that if you use standard</span>
<span class="token comment"># output for logging but daemonize, logs will be sent to /dev/null</span>
logfile <span class="token string">&quot;&quot;</span>
æ—¥å¿—æ–‡ä»¶è¾“å‡ºè·¯å¾„

<span class="token comment"># To enable logging to the system logger, just set 'syslog-enabled' to yes,</span>
<span class="token comment"># and optionally update the other syslog parameters to suit your needs.</span>
<span class="token comment"># syslog-enabled no</span>

<span class="token comment"># Specify the syslog identity.</span>
<span class="token comment"># syslog-ident redis</span>

<span class="token comment"># Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.</span>
<span class="token comment"># syslog-facility local0</span>

<span class="token comment"># To disable the built in crash log, which will possibly produce cleaner core</span>
<span class="token comment"># dumps when they are needed, uncomment the following:</span>
<span class="token comment">#</span>
<span class="token comment"># crash-log-enabled no</span>

<span class="token comment"># To disable the fast memory check that's run as part of the crash log, which</span>
<span class="token comment"># will possibly let redis terminate sooner, uncomment the following:</span>
<span class="token comment">#</span>
<span class="token comment"># crash-memcheck-enabled no</span>

<span class="token comment"># Set the number of databases. The default database is DB 0, you can select</span>
<span class="token comment"># a different one on a per-connection basis using SELECT &lt;dbid&gt; where</span>
<span class="token comment"># dbid is a number between 0 and 'databases'-1</span>
databases <span class="token number">16</span>
æ•°æ®åº“æ•°é‡ é»˜è®¤16ä¸ªåº“

<span class="token comment"># By default Redis shows an ASCII art logo only when started to log to the</span>
<span class="token comment"># standard output and if the standard output is a TTY and syslog logging is</span>
<span class="token comment"># disabled. Basically this means that normally a logo is displayed only in</span>
<span class="token comment"># interactive sessions.</span>
<span class="token comment">#</span>
<span class="token comment"># However it is possible to force the pre-4.0 behavior and always show a</span>
<span class="token comment"># ASCII art logo in startup logs by setting the following option to yes.</span>
always-show-logo no

<span class="token comment"># By default, Redis modifies the process title (as seen in 'top' and 'ps') to</span>
<span class="token comment"># provide some runtime information. It is possible to disable this and leave</span>
<span class="token comment"># the process name as executed by setting the following to no.</span>
set-proc-title <span class="token function">yes</span>

<span class="token comment"># When changing the process title, Redis uses the following template to construct</span>
<span class="token comment"># the modified title.</span>
<span class="token comment">#</span>
<span class="token comment"># Template variables are specified in curly brackets. The following variables are</span>
<span class="token comment"># supported:</span>
<span class="token comment">#</span>
<span class="token comment"># {title}           Name of process as executed if parent, or type of child process.</span>
<span class="token comment"># {listen-addr}     Bind address or '*' followed by TCP or TLS port listening on, or</span>
<span class="token comment">#                   Unix socket if only that's available.</span>
<span class="token comment"># {server-mode}     Special mode, i.e. &quot;[sentinel]&quot; or &quot;[cluster]&quot;.</span>
<span class="token comment"># {port}            TCP port listening on, or 0.</span>
<span class="token comment"># {tls-port}        TLS port listening on, or 0.</span>
<span class="token comment"># {unixsocket}      Unix domain socket listening on, or &quot;&quot;.</span>
<span class="token comment"># {config-file}     Name of configuration file used.</span>
<span class="token comment">#</span>
proc-title-template <span class="token string">&quot;{title} {listen-addr} {server-mode}&quot;</span>
</code></pre></div><h3 id="å®‰å…¨é…ç½®"><a href="#å®‰å…¨é…ç½®" class="header-anchor">#</a> å®‰å…¨é…ç½®</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################# REPLICATION #################################</span>

<span class="token comment"># Master-Replica replication. Use replicaof to make a Redis instance a copy of</span>
<span class="token comment"># another Redis server. A few things to understand ASAP about Redis replication.</span>
<span class="token comment">#</span>
<span class="token comment">#   +------------------+      +---------------+</span>
<span class="token comment">#   |      Master      | ---&gt; |    Replica    |</span>
<span class="token comment">#   | (receive writes) |      |  (exact copy) |</span>
<span class="token comment">#   +------------------+      +---------------+</span>
<span class="token comment">#</span>
<span class="token comment"># 1) Redis replication is asynchronous, but you can configure a master to</span>
<span class="token comment">#    stop accepting writes if it appears to be not connected with at least</span>
<span class="token comment">#    a given number of replicas.</span>
<span class="token comment"># 2) Redis replicas are able to perform a partial resynchronization with the</span>
<span class="token comment">#    master if the replication link is lost for a relatively small amount of</span>
<span class="token comment">#    time. You may want to configure the replication backlog size (see the next</span>
<span class="token comment">#    sections of this file) with a sensible value depending on your needs.</span>
<span class="token comment"># 3) Replication is automatic and does not need user intervention. After a</span>
<span class="token comment">#    network partition replicas automatically try to reconnect to masters</span>
<span class="token comment">#    and resynchronize with them.</span>
<span class="token comment">#</span>
<span class="token comment"># replicaof &lt;masterip&gt; &lt;masterport&gt;</span>

<span class="token comment"># If the master is password protected (using the &quot;requirepass&quot; configuration</span>
<span class="token comment"># directive below) it is possible to tell the replica to authenticate before</span>
<span class="token comment"># starting the replication synchronization process, otherwise the master will</span>
<span class="token comment"># refuse the replica request.</span>
requirepass root
Rediså¯†ç 
<span class="token comment">#</span>
<span class="token comment"># masterauth &lt;master-password&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># However this is not enough if you are using Redis ACLs (for Redis version</span>
<span class="token comment"># 6 or greater), and the default user is not capable of running the PSYNC</span>
<span class="token comment"># command and/or other commands needed for replication. In this case it's</span>
<span class="token comment"># better to configure a special user to use with replication, and specify the</span>
<span class="token comment"># masteruser configuration as such:</span>
<span class="token comment">#</span>
<span class="token comment"># masteruser &lt;username&gt;</span>
<span class="token comment">#</span>
<span class="token comment"># When masteruser is specified, the replica will authenticate against its</span>
<span class="token comment"># master using the new AUTH form: AUTH &lt;username&gt; &lt;password&gt;.</span>

<span class="token comment"># When a replica loses its connection with the master, or when the replication</span>
<span class="token comment"># is still in progress, the replica can act in two different ways:</span>
<span class="token comment">#</span>
<span class="token comment"># 1) if replica-serve-stale-data is set to 'yes' (the default) the replica will</span>
<span class="token comment">#    still reply to client requests, possibly with out of date data, or the</span>
<span class="token comment">#    data set may just be empty if this is the first synchronization.</span>
<span class="token comment">#</span>
<span class="token comment"># 2) If replica-serve-stale-data is set to 'no' the replica will reply with error</span>
<span class="token comment">#    &quot;MASTERDOWN Link with MASTER is down and replica-serve-stale-data is set to 'no'&quot;</span>
<span class="token comment">#    to all data access commands, excluding commands such as:</span>
<span class="token comment">#    INFO, REPLICAOF, AUTH, SHUTDOWN, REPLCONF, ROLE, CONFIG, SUBSCRIBE,</span>
<span class="token comment">#    UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB, COMMAND, POST,</span>
<span class="token comment">#    HOST and LATENCY.</span>
<span class="token comment">#</span>
replica-serve-stale-data <span class="token function">yes</span>

<span class="token comment"># You can configure a replica instance to accept writes or not. Writing against</span>
<span class="token comment"># a replica instance may be useful to store some ephemeral data (because data</span>
<span class="token comment"># written on a replica will be easily deleted after resync with the master) but</span>
<span class="token comment"># may also cause problems if clients are writing to it because of a</span>
<span class="token comment"># misconfiguration.</span>
<span class="token comment">#</span>
<span class="token comment"># Since Redis 2.6 by default replicas are read-only.</span>
<span class="token comment">#</span>
<span class="token comment"># Note: read only replicas are not designed to be exposed to untrusted clients</span>
<span class="token comment"># on the internet. It's just a protection layer against misuse of the instance.</span>
<span class="token comment"># Still a read only replica exports by default all the administrative commands</span>
<span class="token comment"># such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span>
<span class="token comment"># security of read only replicas using 'rename-command' to shadow all the</span>
<span class="token comment"># administrative / dangerous commands.</span>
replica-read-only <span class="token function">yes</span>

<span class="token comment"># Replication SYNC strategy: disk or socket.</span>
<span class="token comment">#</span>
<span class="token comment"># New replicas and reconnecting replicas that are not able to continue the</span>
<span class="token comment"># replication process just receiving differences, need to do what is called a</span>
<span class="token comment"># &quot;full synchronization&quot;. An RDB file is transmitted from the master to the</span>
<span class="token comment"># replicas.</span>
<span class="token comment">#</span>
<span class="token comment"># The transmission can happen in two different ways:</span>
<span class="token comment">#</span>
<span class="token comment"># 1) Disk-backed: The Redis master creates a new process that writes the RDB</span>
<span class="token comment">#                 file on disk. Later the file is transferred by the parent</span>
<span class="token comment">#                 process to the replicas incrementally.</span>
<span class="token comment"># 2) Diskless: The Redis master creates a new process that directly writes the</span>
<span class="token comment">#              RDB file to replica sockets, without touching the disk at all.</span>
<span class="token comment">#</span>
<span class="token comment"># With disk-backed replication, while the RDB file is generated, more replicas</span>
<span class="token comment"># can be queued and served with the RDB file as soon as the current child</span>
<span class="token comment"># producing the RDB file finishes its work. With diskless replication instead</span>
<span class="token comment"># once the transfer starts, new replicas arriving will be queued and a new</span>
<span class="token comment"># transfer will start when the current one terminates.</span>
<span class="token comment">#</span>
<span class="token comment"># When diskless replication is used, the master waits a configurable amount of</span>
<span class="token comment"># time (in seconds) before starting the transfer in the hope that multiple</span>
<span class="token comment"># replicas will arrive and the transfer can be parallelized.</span>
<span class="token comment">#</span>
<span class="token comment"># With slow disks and fast (large bandwidth) networks, diskless replication</span>
<span class="token comment"># works better.</span>
repl-diskless-sync <span class="token function">yes</span>

<span class="token comment"># When diskless replication is enabled, it is possible to configure the delay</span>
<span class="token comment"># the server waits in order to spawn the child that transfers the RDB via socket</span>
<span class="token comment"># to the replicas.</span>
<span class="token comment">#</span>
<span class="token comment"># This is important since once the transfer starts, it is not possible to serve</span>
<span class="token comment"># new replicas arriving, that will be queued for the next RDB transfer, so the</span>
<span class="token comment"># server waits a delay in order to let more replicas arrive.</span>
<span class="token comment">#</span>
<span class="token comment"># The delay is specified in seconds, and by default is 5 seconds. To disable</span>
<span class="token comment"># it entirely just set it to 0 seconds and the transfer will start ASAP.</span>
repl-diskless-sync-delay <span class="token number">5</span>

<span class="token comment"># When diskless replication is enabled with a delay, it is possible to let</span>
<span class="token comment"># the replication start before the maximum delay is reached if the maximum</span>
<span class="token comment"># number of replicas expected have connected. Default of 0 means that the</span>
<span class="token comment"># maximum is not defined and Redis will wait the full delay.</span>
repl-diskless-sync-max-replicas <span class="token number">0</span>

<span class="token comment"># -----------------------------------------------------------------------------</span>
<span class="token comment"># WARNING: RDB diskless load is experimental. Since in this setup the replica</span>
<span class="token comment"># does not immediately store an RDB on disk, it may cause data loss during</span>
<span class="token comment"># failovers. RDB diskless load + Redis modules not handling I/O reads may also</span>
<span class="token comment"># cause Redis to abort in case of I/O errors during the initial synchronization</span>
<span class="token comment"># stage with the master. Use only if you know what you are doing.</span>
<span class="token comment"># -----------------------------------------------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># Replica can load the RDB it reads from the replication link directly from the</span>
<span class="token comment"># socket, or store the RDB to a file and read that file after it was completely</span>
<span class="token comment"># received from the master.</span>
<span class="token comment">#</span>
<span class="token comment"># In many cases the disk is slower than the network, and storing and loading</span>
<span class="token comment"># the RDB file may increase replication time (and even increase the master's</span>
<span class="token comment"># Copy on Write memory and replica buffers).</span>
<span class="token comment"># However, parsing the RDB file directly from the socket may mean that we have</span>
<span class="token comment"># to flush the contents of the current database before the full rdb was</span>
<span class="token comment"># received. For this reason we have the following options:</span>
<span class="token comment">#</span>
<span class="token comment"># &quot;disabled&quot;    - Don't use diskless load (store the rdb file to the disk first)</span>
<span class="token comment"># &quot;on-empty-db&quot; - Use diskless load only when it is completely safe.</span>
<span class="token comment"># &quot;swapdb&quot;      - Keep current db contents in RAM while parsing the data directly</span>
<span class="token comment">#                 from the socket. Replicas in this mode can keep serving current</span>
<span class="token comment">#                 data set while replication is in progress, except for cases where</span>
<span class="token comment">#                 they can't recognize master as having a data set from same</span>
<span class="token comment">#                 replication history.</span>
<span class="token comment">#                 Note that this requires sufficient memory, if you don't have it,</span>
<span class="token comment">#                 you risk an OOM kill.</span>
repl-diskless-load disabled

<span class="token comment"># Master send PINGs to its replicas in a predefined interval. It's possible to</span>
<span class="token comment"># change this interval with the repl_ping_replica_period option. The default</span>
<span class="token comment"># value is 10 seconds.</span>
<span class="token comment">#</span>
<span class="token comment"># repl-ping-replica-period 10</span>

<span class="token comment"># The following option sets the replication timeout for:</span>
<span class="token comment">#</span>
<span class="token comment"># 1) Bulk transfer I/O during SYNC, from the point of view of replica.</span>
<span class="token comment"># 2) Master timeout from the point of view of replicas (data, pings).</span>
<span class="token comment"># 3) Replica timeout from the point of view of masters (REPLCONF ACK pings).</span>
<span class="token comment">#</span>
<span class="token comment"># It is important to make sure that this value is greater than the value</span>
<span class="token comment"># specified for repl-ping-replica-period otherwise a timeout will be detected</span>
<span class="token comment"># every time there is low traffic between the master and the replica. The default</span>
<span class="token comment"># value is 60 seconds.</span>
<span class="token comment">#</span>
<span class="token comment"># repl-timeout 60</span>

<span class="token comment"># Disable TCP_NODELAY on the replica socket after SYNC?</span>
<span class="token comment">#</span>
<span class="token comment"># If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and</span>
<span class="token comment"># less bandwidth to send data to replicas. But this can add a delay for</span>
<span class="token comment"># the data to appear on the replica side, up to 40 milliseconds with</span>
<span class="token comment"># Linux kernels using a default configuration.</span>
<span class="token comment">#</span>
<span class="token comment"># If you select &quot;no&quot; the delay for data to appear on the replica side will</span>
<span class="token comment"># be reduced but more bandwidth will be used for replication.</span>
<span class="token comment">#</span>
<span class="token comment"># By default we optimize for low latency, but in very high traffic conditions</span>
<span class="token comment"># or when the master and replicas are many hops away, turning this to &quot;yes&quot; may</span>
<span class="token comment"># be a good idea.</span>
repl-disable-tcp-nodelay no

<span class="token comment"># Set the replication backlog size. The backlog is a buffer that accumulates</span>
<span class="token comment"># replica data when replicas are disconnected for some time, so that when a</span>
<span class="token comment"># replica wants to reconnect again, often a full resync is not needed, but a</span>
<span class="token comment"># partial resync is enough, just passing the portion of data the replica</span>
<span class="token comment"># missed while disconnected.</span>
<span class="token comment">#</span>
<span class="token comment"># The bigger the replication backlog, the longer the replica can endure the</span>
<span class="token comment"># disconnect and later be able to perform a partial resynchronization.</span>
<span class="token comment">#</span>
<span class="token comment"># The backlog is only allocated if there is at least one replica connected.</span>
<span class="token comment">#</span>
<span class="token comment"># repl-backlog-size 1mb</span>

<span class="token comment"># After a master has no connected replicas for some time, the backlog will be</span>
<span class="token comment"># freed. The following option configures the amount of seconds that need to</span>
<span class="token comment"># elapse, starting from the time the last replica disconnected, for the backlog</span>
<span class="token comment"># buffer to be freed.</span>
<span class="token comment">#</span>
<span class="token comment"># Note that replicas never free the backlog for timeout, since they may be</span>
<span class="token comment"># promoted to masters later, and should be able to correctly &quot;partially</span>
<span class="token comment"># resynchronize&quot; with other replicas: hence they should always accumulate backlog.</span>
<span class="token comment">#</span>
<span class="token comment"># A value of 0 means to never release the backlog.</span>
<span class="token comment">#</span>
<span class="token comment"># repl-backlog-ttl 3600</span>

<span class="token comment"># The replica priority is an integer number published by Redis in the INFO</span>
<span class="token comment"># output. It is used by Redis Sentinel in order to select a replica to promote</span>
<span class="token comment"># into a master if the master is no longer working correctly.</span>
<span class="token comment">#</span>
<span class="token comment"># A replica with a low priority number is considered better for promotion, so</span>
<span class="token comment"># for instance if there are three replicas with priority 10, 100, 25 Sentinel</span>
<span class="token comment"># will pick the one with priority 10, that is the lowest.</span>
<span class="token comment">#</span>
<span class="token comment"># However a special priority of 0 marks the replica as not able to perform the</span>
<span class="token comment"># role of master, so a replica with priority of 0 will never be selected by</span>
<span class="token comment"># Redis Sentinel for promotion.</span>
<span class="token comment">#</span>
<span class="token comment"># By default the priority is 100.</span>
replica-priority <span class="token number">100</span>

<span class="token comment"># The propagation error behavior controls how Redis will behave when it is</span>
<span class="token comment"># unable to handle a command being processed in the replication stream from a master</span>
<span class="token comment"># or processed while reading from an AOF file. Errors that occur during propagation</span>
<span class="token comment"># are unexpected, and can cause data inconsistency. However, there are edge cases</span>
<span class="token comment"># in earlier versions of Redis where it was possible for the server to replicate or persist</span>
<span class="token comment"># commands that would fail on future versions. For this reason the default behavior</span>
<span class="token comment"># is to ignore such errors and continue processing commands.</span>
<span class="token comment">#</span>
<span class="token comment"># If an application wants to ensure there is no data divergence, this configuration</span>
<span class="token comment"># should be set to 'panic' instead. The value can also be set to 'panic-on-replicas'</span>
<span class="token comment"># to only panic when a replica encounters an error on the replication stream. One of</span>
<span class="token comment"># these two panic values will become the default value in the future once there are</span>
<span class="token comment"># sufficient safety mechanisms in place to prevent false positive crashes.</span>
<span class="token comment">#</span>
<span class="token comment"># propagation-error-behavior ignore</span>

<span class="token comment"># Replica ignore disk write errors controls the behavior of a replica when it is</span>
<span class="token comment"># unable to persist a write command received from its master to disk. By default,</span>
<span class="token comment"># this configuration is set to 'no' and will crash the replica in this condition.</span>
<span class="token comment"># It is not recommended to change this default, however in order to be compatible</span>
<span class="token comment"># with older versions of Redis this config can be toggled to 'yes' which will just</span>
<span class="token comment"># log a warning and execute the write command it got from the master.</span>
<span class="token comment">#</span>
<span class="token comment"># replica-ignore-disk-write-errors no</span>

<span class="token comment"># -----------------------------------------------------------------------------</span>
<span class="token comment"># By default, Redis Sentinel includes all replicas in its reports. A replica</span>
<span class="token comment"># can be excluded from Redis Sentinel's announcements. An unannounced replica</span>
<span class="token comment"># will be ignored by the 'sentinel replicas &lt;master&gt;' command and won't be</span>
<span class="token comment"># exposed to Redis Sentinel's clients.</span>
<span class="token comment">#</span>
<span class="token comment"># This option does not change the behavior of replica-priority. Even with</span>
<span class="token comment"># replica-announced set to 'no', the replica can be promoted to master. To</span>
<span class="token comment"># prevent this behavior, set replica-priority to 0.</span>
<span class="token comment">#</span>
<span class="token comment"># replica-announced yes</span>

<span class="token comment"># It is possible for a master to stop accepting writes if there are less than</span>
<span class="token comment"># N replicas connected, having a lag less or equal than M seconds.</span>
<span class="token comment">#</span>
<span class="token comment"># The N replicas need to be in &quot;online&quot; state.</span>
<span class="token comment">#</span>
<span class="token comment"># The lag in seconds, that must be &lt;= the specified value, is calculated from</span>
<span class="token comment"># the last ping received from the replica, that is usually sent every second.</span>
<span class="token comment">#</span>
<span class="token comment"># This option does not GUARANTEE that N replicas will accept the write, but</span>
<span class="token comment"># will limit the window of exposure for lost writes in case not enough replicas</span>
<span class="token comment"># are available, to the specified number of seconds.</span>
<span class="token comment">#</span>
<span class="token comment"># For example to require at least 3 replicas with a lag &lt;= 10 seconds use:</span>
<span class="token comment">#</span>
<span class="token comment"># min-replicas-to-write 3</span>
<span class="token comment"># min-replicas-max-lag 10</span>
<span class="token comment">#</span>
<span class="token comment"># Setting one or the other to 0 disables the feature.</span>
<span class="token comment">#</span>
<span class="token comment"># By default min-replicas-to-write is set to 0 (feature disabled) and</span>
<span class="token comment"># min-replicas-max-lag is set to 10.</span>

<span class="token comment"># A Redis master is able to list the address and port of the attached</span>
<span class="token comment"># replicas in different ways. For example the &quot;INFO replication&quot; section</span>
<span class="token comment"># offers this information, which is used, among other tools, by</span>
<span class="token comment"># Redis Sentinel in order to discover replica instances.</span>
<span class="token comment"># Another place where this info is available is in the output of the</span>
<span class="token comment"># &quot;ROLE&quot; command of a master.</span>
<span class="token comment">#</span>
<span class="token comment"># The listed IP address and port normally reported by a replica is</span>
<span class="token comment"># obtained in the following way:</span>
<span class="token comment">#</span>
<span class="token comment">#   IP: The address is auto detected by checking the peer address</span>
<span class="token comment">#   of the socket used by the replica to connect with the master.</span>
<span class="token comment">#</span>
<span class="token comment">#   Port: The port is communicated by the replica during the replication</span>
<span class="token comment">#   handshake, and is normally the port that the replica is using to</span>
<span class="token comment">#   listen for connections.</span>
<span class="token comment">#</span>
<span class="token comment"># However when port forwarding or Network Address Translation (NAT) is</span>
<span class="token comment"># used, the replica may actually be reachable via different IP and port</span>
<span class="token comment"># pairs. The following two options can be used by a replica in order to</span>
<span class="token comment"># report to its master a specific set of IP and port, so that both INFO</span>
<span class="token comment"># and ROLE will report those values.</span>
<span class="token comment">#</span>
<span class="token comment"># There is no need to use both the options if you need to override just</span>
<span class="token comment"># the port or the IP address.</span>
<span class="token comment">#</span>
<span class="token comment"># replica-announce-ip 5.5.5.5</span>
<span class="token comment"># replica-announce-port 1234</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################## SECURITY ###################################</span>

<span class="token comment"># Warning: since Redis is pretty fast, an outside user can try up to</span>
<span class="token comment"># 1 million passwords per second against a modern box. This means that you</span>
<span class="token comment"># should use very strong passwords, otherwise they will be very easy to break.</span>
<span class="token comment"># Note that because the password is really a shared secret between the client</span>
<span class="token comment"># and the server, and should not be memorized by any human, the password</span>
<span class="token comment"># can be easily a long string from /dev/urandom or whatever, so by using a</span>
<span class="token comment"># long and unguessable password no brute force attack will be possible.</span>

<span class="token comment"># Redis ACL users are defined in the following format:</span>
<span class="token comment">#</span>
<span class="token comment">#   user &lt;username&gt; ... acl rules ...</span>
<span class="token comment">#</span>
<span class="token comment"># For example:</span>
<span class="token comment">#</span>
<span class="token comment">#   user worker +@list +@connection ~jobs:* on &gt;ffa9203c493aa99</span>
<span class="token comment">#</span>
<span class="token comment"># The special username &quot;default&quot; is used for new connections. If this user</span>
<span class="token comment"># has the &quot;nopass&quot; rule, then new connections will be immediately authenticated</span>
<span class="token comment"># as the &quot;default&quot; user without the need of any password provided via the</span>
<span class="token comment"># AUTH command. Otherwise if the &quot;default&quot; user is not flagged with &quot;nopass&quot;</span>
<span class="token comment"># the connections will start in not authenticated state, and will require</span>
<span class="token comment"># AUTH (or the HELLO command AUTH option) in order to be authenticated and</span>
<span class="token comment"># start to work.</span>
<span class="token comment">#</span>
<span class="token comment"># The ACL rules that describe what a user can do are the following:</span>
<span class="token comment">#</span>
<span class="token comment">#  on           Enable the user: it is possible to authenticate as this user.</span>
<span class="token comment">#  off          Disable the user: it's no longer possible to authenticate</span>
<span class="token comment">#               with this user, however the already authenticated connections</span>
<span class="token comment">#               will still work.</span>
<span class="token comment">#  skip-sanitize-payload    RESTORE dump-payload sanitization is skipped.</span>
<span class="token comment">#  sanitize-payload         RESTORE dump-payload is sanitized (default).</span>
<span class="token comment">#  +&lt;command&gt;   Allow the execution of that command.</span>
<span class="token comment">#               May be used with `|` for allowing subcommands (e.g &quot;+config|get&quot;)</span>
<span class="token comment">#  -&lt;command&gt;   Disallow the execution of that command.</span>
<span class="token comment">#               May be used with `|` for blocking subcommands (e.g &quot;-config|set&quot;)</span>
<span class="token comment">#  +@&lt;category&gt; Allow the execution of all the commands in such category</span>
<span class="token comment">#               with valid categories are like @admin, @set, @sortedset, ...</span>
<span class="token comment">#               and so forth, see the full list in the server.c file where</span>
<span class="token comment">#               the Redis command table is described and defined.</span>
<span class="token comment">#               The special category @all means all the commands, but currently</span>
<span class="token comment">#               present in the server, and that will be loaded in the future</span>
<span class="token comment">#               via modules.</span>
<span class="token comment">#  +&lt;command&gt;|first-arg  Allow a specific first argument of an otherwise</span>
<span class="token comment">#                        disabled command. It is only supported on commands with</span>
<span class="token comment">#                        no sub-commands, and is not allowed as negative form</span>
<span class="token comment">#                        like -SELECT|1, only additive starting with &quot;+&quot;. This</span>
<span class="token comment">#                        feature is deprecated and may be removed in the future.</span>
<span class="token comment">#  allcommands  Alias for +@all. Note that it implies the ability to execute</span>
<span class="token comment">#               all the future commands loaded via the modules system.</span>
<span class="token comment">#  nocommands   Alias for -@all.</span>
<span class="token comment">#  ~&lt;pattern&gt;   Add a pattern of keys that can be mentioned as part of</span>
<span class="token comment">#               commands. For instance ~* allows all the keys. The pattern</span>
<span class="token comment">#               is a glob-style pattern like the one of KEYS.</span>
<span class="token comment">#               It is possible to specify multiple patterns.</span>
<span class="token comment"># %R~&lt;pattern&gt;  Add key read pattern that specifies which keys can be read</span>
<span class="token comment">#               from.</span>
<span class="token comment"># %W~&lt;pattern&gt;  Add key write pattern that specifies which keys can be</span>
<span class="token comment">#               written to.</span>
<span class="token comment">#  allkeys      Alias for ~*</span>
<span class="token comment">#  resetkeys    Flush the list of allowed keys patterns.</span>
<span class="token comment">#  &amp;&lt;pattern&gt;   Add a glob-style pattern of Pub/Sub channels that can be</span>
<span class="token comment">#               accessed by the user. It is possible to specify multiple channel</span>
<span class="token comment">#               patterns.</span>
<span class="token comment">#  allchannels  Alias for &amp;*</span>
<span class="token comment">#  resetchannels            Flush the list of allowed channel patterns.</span>
<span class="token comment">#  &gt;&lt;password&gt;  Add this password to the list of valid password for the user.</span>
<span class="token comment">#               For example &gt;mypass will add &quot;mypass&quot; to the list.</span>
<span class="token comment">#               This directive clears the &quot;nopass&quot; flag (see later).</span>
<span class="token comment">#  &lt;&lt;password&gt;  Remove this password from the list of valid passwords.</span>
<span class="token comment">#  nopass       All the set passwords of the user are removed, and the user</span>
<span class="token comment">#               is flagged as requiring no password: it means that every</span>
<span class="token comment">#               password will work against this user. If this directive is</span>
<span class="token comment">#               used for the default user, every new connection will be</span>
<span class="token comment">#               immediately authenticated with the default user without</span>
<span class="token comment">#               any explicit AUTH command required. Note that the &quot;resetpass&quot;</span>
<span class="token comment">#               directive will clear this condition.</span>
<span class="token comment">#  resetpass    Flush the list of allowed passwords. Moreover removes the</span>
<span class="token comment">#               &quot;nopass&quot; status. After &quot;resetpass&quot; the user has no associated</span>
<span class="token comment">#               passwords and there is no way to authenticate without adding</span>
<span class="token comment">#               some password (or setting it as &quot;nopass&quot; later).</span>
<span class="token comment">#  reset        Performs the following actions: resetpass, resetkeys, off,</span>
<span class="token comment">#               -@all. The user returns to the same state it has immediately</span>
<span class="token comment">#               after its creation.</span>
<span class="token comment"># (&lt;options&gt;)   Create a new selector with the options specified within the</span>
<span class="token comment">#               parentheses and attach it to the user. Each option should be</span>
<span class="token comment">#               space separated. The first character must be ( and the last</span>
<span class="token comment">#               character must be ).</span>
<span class="token comment"># clearselectors            Remove all of the currently attached selectors.</span>
<span class="token comment">#                           Note this does not change the &quot;root&quot; user permissions,</span>
<span class="token comment">#                           which are the permissions directly applied onto the</span>
<span class="token comment">#                           user (outside the parentheses).</span>
<span class="token comment">#</span>
<span class="token comment"># ACL rules can be specified in any order: for instance you can start with</span>
<span class="token comment"># passwords, then flags, or key patterns. However note that the additive</span>
<span class="token comment"># and subtractive rules will CHANGE MEANING depending on the ordering.</span>
<span class="token comment"># For instance see the following example:</span>
<span class="token comment">#</span>
<span class="token comment">#   user alice on +@all -DEBUG ~* &gt;somepassword</span>
<span class="token comment">#</span>
<span class="token comment"># This will allow &quot;alice&quot; to use all the commands with the exception of the</span>
<span class="token comment"># DEBUG command, since +@all added all the commands to the set of the commands</span>
<span class="token comment"># alice can use, and later DEBUG was removed. However if we invert the order</span>
<span class="token comment"># of two ACL rules the result will be different:</span>
<span class="token comment">#</span>
<span class="token comment">#   user alice on -DEBUG +@all ~* &gt;somepassword</span>
<span class="token comment">#</span>
<span class="token comment"># Now DEBUG was removed when alice had yet no commands in the set of allowed</span>
<span class="token comment"># commands, later all the commands are added, so the user will be able to</span>
<span class="token comment"># execute everything.</span>
<span class="token comment">#</span>
<span class="token comment"># Basically ACL rules are processed left-to-right.</span>
<span class="token comment">#</span>
<span class="token comment"># The following is a list of command categories and their meanings:</span>
<span class="token comment"># * keyspace - Writing or reading from keys, databases, or their metadata</span>
<span class="token comment">#     in a type agnostic way. Includes DEL, RESTORE, DUMP, RENAME, EXISTS, DBSIZE,</span>
<span class="token comment">#     KEYS, EXPIRE, TTL, FLUSHALL, etc. Commands that may modify the keyspace,</span>
<span class="token comment">#     key or metadata will also have `write` category. Commands that only read</span>
<span class="token comment">#     the keyspace, key or metadata will have the `read` category.</span>
<span class="token comment"># * read - Reading from keys (values or metadata). Note that commands that don't</span>
<span class="token comment">#     interact with keys, will not have either `read` or `write`.</span>
<span class="token comment"># * write - Writing to keys (values or metadata)</span>
<span class="token comment"># * admin - Administrative commands. Normal applications will never need to use</span>
<span class="token comment">#     these. Includes REPLICAOF, CONFIG, DEBUG, SAVE, MONITOR, ACL, SHUTDOWN, etc.</span>
<span class="token comment"># * dangerous - Potentially dangerous (each should be considered with care for</span>
<span class="token comment">#     various reasons). This includes FLUSHALL, MIGRATE, RESTORE, SORT, KEYS,</span>
<span class="token comment">#     CLIENT, DEBUG, INFO, CONFIG, SAVE, REPLICAOF, etc.</span>
<span class="token comment"># * connection - Commands affecting the connection or other connections.</span>
<span class="token comment">#     This includes AUTH, SELECT, COMMAND, CLIENT, ECHO, PING, etc.</span>
<span class="token comment"># * blocking - Potentially blocking the connection until released by another</span>
<span class="token comment">#     command.</span>
<span class="token comment"># * fast - Fast O(1) commands. May loop on the number of arguments, but not the</span>
<span class="token comment">#     number of elements in the key.</span>
<span class="token comment"># * slow - All commands that are not Fast.</span>
<span class="token comment"># * pubsub - PUBLISH / SUBSCRIBE related</span>
<span class="token comment"># * transaction - WATCH / MULTI / EXEC related commands.</span>
<span class="token comment"># * scripting - Scripting related.</span>
<span class="token comment"># * set - Data type: sets related.</span>
<span class="token comment"># * sortedset - Data type: zsets related.</span>
<span class="token comment"># * list - Data type: lists related.</span>
<span class="token comment"># * hash - Data type: hashes related.</span>
<span class="token comment"># * string - Data type: strings related.</span>
<span class="token comment"># * bitmap - Data type: bitmaps related.</span>
<span class="token comment"># * hyperloglog - Data type: hyperloglog related.</span>
<span class="token comment"># * geo - Data type: geo related.</span>
<span class="token comment"># * stream - Data type: streams related.</span>
<span class="token comment">#</span>
<span class="token comment"># For more information about ACL configuration please refer to</span>
<span class="token comment"># the Redis web site at https://redis.io/topics/acl</span>

<span class="token comment"># ACL LOG</span>
<span class="token comment">#</span>
<span class="token comment"># The ACL Log tracks failed commands and authentication events associated</span>
<span class="token comment"># with ACLs. The ACL Log is useful to troubleshoot failed commands blocked</span>
<span class="token comment"># by ACLs. The ACL Log is stored in memory. You can reclaim memory with</span>
<span class="token comment"># ACL LOG RESET. Define the maximum entry length of the ACL Log below.</span>
acllog-max-len <span class="token number">128</span>

<span class="token comment"># Using an external ACL file</span>
<span class="token comment">#</span>
<span class="token comment"># Instead of configuring users here in this file, it is possible to use</span>
<span class="token comment"># a stand-alone file just listing users. The two methods cannot be mixed:</span>
<span class="token comment"># if you configure users here and at the same time you activate the external</span>
<span class="token comment"># ACL file, the server will refuse to start.</span>
<span class="token comment">#</span>
<span class="token comment"># The format of the external ACL user file is exactly the same as the</span>
<span class="token comment"># format that is used inside redis.conf to describe users.</span>
<span class="token comment">#</span>
<span class="token comment"># aclfile /etc/redis/users.acl</span>

<span class="token comment"># IMPORTANT NOTE: starting with Redis 6 &quot;requirepass&quot; is just a compatibility</span>
<span class="token comment"># layer on top of the new ACL system. The option effect will be just setting</span>
<span class="token comment"># the password for the default user. Clients will still authenticate using</span>
<span class="token comment"># AUTH &lt;password&gt; as usually, or more explicitly with AUTH default &lt;password&gt;</span>
<span class="token comment"># if they follow the new protocol: both will work.</span>
<span class="token comment">#</span>
<span class="token comment"># The requirepass is not compatible with aclfile option and the ACL LOAD</span>
<span class="token comment"># command, these will cause requirepass to be ignored.</span>
<span class="token comment">#</span>
<span class="token comment"># requirepass foobared</span>
å¯†ç è®¾ç½®

<span class="token comment"># New users are initialized with restrictive permissions by default, via the</span>
<span class="token comment"># equivalent of this ACL rule 'off resetkeys -@all'. Starting with Redis 6.2, it</span>
<span class="token comment"># is possible to manage access to Pub/Sub channels with ACL rules as well. The</span>
<span class="token comment"># default Pub/Sub channels permission if new users is controlled by the</span>
<span class="token comment"># acl-pubsub-default configuration directive, which accepts one of these values:</span>
<span class="token comment">#</span>
<span class="token comment"># allchannels: grants access to all Pub/Sub channels</span>
<span class="token comment"># resetchannels: revokes access to all Pub/Sub channels</span>
<span class="token comment">#</span>
<span class="token comment"># From Redis 7.0, acl-pubsub-default defaults to 'resetchannels' permission.</span>
<span class="token comment">#</span>
<span class="token comment"># acl-pubsub-default resetchannels</span>

<span class="token comment"># Command renaming (DEPRECATED).</span>
<span class="token comment">#</span>
<span class="token comment"># ------------------------------------------------------------------------</span>
<span class="token comment"># WARNING: avoid using this option if possible. Instead use ACLs to remove</span>
<span class="token comment"># commands from the default user, and put them only in some admin user you</span>
<span class="token comment"># create for administrative purposes.</span>
<span class="token comment"># ------------------------------------------------------------------------</span>
<span class="token comment">#</span>
<span class="token comment"># It is possible to change the name of dangerous commands in a shared</span>
<span class="token comment"># environment. For instance the CONFIG command may be renamed into something</span>
<span class="token comment"># hard to guess so that it will still be available for internal-use tools</span>
<span class="token comment"># but not available for general clients.</span>
<span class="token comment">#</span>
<span class="token comment"># Example:</span>
<span class="token comment">#</span>
<span class="token comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span>
<span class="token comment">#</span>
<span class="token comment"># It is also possible to completely kill a command by renaming it into</span>
<span class="token comment"># an empty string:</span>
<span class="token comment">#</span>
<span class="token comment"># rename-command CONFIG &quot;&quot;</span>
<span class="token comment">#</span>
<span class="token comment"># Please note that changing the name of commands that are logged into the</span>
<span class="token comment"># AOF file or transmitted to replicas may cause problems.</span>
</code></pre></div><h3 id="clients"><a href="#clients" class="header-anchor">#</a> CLIENTS</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">################################### CLIENTS ####################################</span>

<span class="token comment"># Set the max number of connected clients at the same time. By default</span>
<span class="token comment"># this limit is set to 10000 clients, however if the Redis server is not</span>
<span class="token comment"># able to configure the process file limit to allow for the specified limit</span>
<span class="token comment"># the max number of allowed clients is set to the current file limit</span>
<span class="token comment"># minus 32 (as Redis reserves a few file descriptors for internal uses).</span>
<span class="token comment">#</span>
<span class="token comment"># Once the limit is reached Redis will close all the new connections sending</span>
<span class="token comment"># an error 'max number of clients reached'.</span>
<span class="token comment">#</span>
<span class="token comment"># IMPORTANT: When Redis Cluster is used, the max number of connections is also</span>
<span class="token comment"># shared with the cluster bus: every node in the cluster will use two</span>
<span class="token comment"># connections, one incoming and another outgoing. It is important to size the</span>
<span class="token comment"># limit accordingly in case of very large clusters.</span>
<span class="token comment">#</span>
<span class="token comment"># maxclients 10000</span>
è®¾ç½®RedisåŒæ—¶å¯ä»¥ä¸å¤šå°‘ä¸ªå®¢æˆ·ç«¯è¿›è¡Œè¿æ¥
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">############################## MEMORY MANAGEMENT ################################</span>

<span class="token comment"># Set a memory usage limit to the specified amount of bytes.</span>
<span class="token comment"># When the memory limit is reached Redis will try to remove keys</span>
<span class="token comment"># according to the eviction policy selected (see maxmemory-policy).</span>
<span class="token comment">#</span>
<span class="token comment"># If Redis can't remove keys according to the policy, or if the policy is</span>
<span class="token comment"># set to 'noeviction', Redis will start to reply with errors to commands</span>
<span class="token comment"># that would use more memory, like SET, LPUSH, and so on, and will continue</span>
<span class="token comment"># to reply to read-only commands like GET.</span>
<span class="token comment">#</span>
<span class="token comment"># This option is usually useful when using Redis as an LRU or LFU cache, or to</span>
<span class="token comment"># set a hard memory limit for an instance (using the 'noeviction' policy).</span>
<span class="token comment">#</span>
<span class="token comment"># WARNING: If you have replicas attached to an instance with maxmemory on,</span>
<span class="token comment"># the size of the output buffers needed to feed the replicas are subtracted</span>
<span class="token comment"># from the used memory count, so that network problems / resyncs will</span>
<span class="token comment"># not trigger a loop where keys are evicted, and in turn the output</span>
<span class="token comment"># buffer of replicas is full with DELs of keys evicted triggering the deletion</span>
<span class="token comment"># of more keys, and so forth until the database is completely emptied.</span>
<span class="token comment">#</span>
<span class="token comment"># In short... if you have replicas attached it is suggested that you set a lower</span>
<span class="token comment"># limit for maxmemory so that there is some free RAM on the system for replica</span>
<span class="token comment"># output buffers (but this is not needed if the policy is 'noeviction').</span>
<span class="token comment">#</span>
<span class="token comment"># maxmemory &lt;bytes&gt;</span>
è®¾ç½®Rediså¯ä»¥ä½¿ç”¨çš„å†…å­˜é‡
è¾¾åˆ°ä¸Šé™Redisä¼šå°è¯•ç§»é™¤å†…éƒ¨æ•°æ® ç§»é™¤è§„åˆ™å¯ä»¥é€šè¿‡maxmemory-policyæŒ‡å®š

<span class="token comment"># MAXMEMORY POLICY: how Redis will select what to remove when maxmemory</span>
<span class="token comment"># is reached. You can select one from the following behaviors:</span>
<span class="token comment">#</span>
<span class="token comment"># volatile-lru -&gt; Evict using approximated LRU, only keys with an expire set.</span>
<span class="token comment"># allkeys-lru -&gt; Evict any key using approximated LRU.</span>
<span class="token comment"># volatile-lfu -&gt; Evict using approximated LFU, only keys with an expire set.</span>
<span class="token comment"># allkeys-lfu -&gt; Evict any key using approximated LFU.</span>
<span class="token comment"># volatile-random -&gt; Remove a random key having an expire set.</span>
<span class="token comment"># allkeys-random -&gt; Remove a random key, any key.</span>
<span class="token comment"># volatile-ttl -&gt; Remove the key with the nearest expire time (minor TTL)</span>
<span class="token comment"># noeviction -&gt; Don't evict anything, just return an error on write operations.</span>
<span class="token comment">#</span>
<span class="token comment"># LRU means Least Recently Used</span>
<span class="token comment"># LFU means Least Frequently Used</span>
<span class="token comment">#</span>
<span class="token comment"># Both LRU, LFU and volatile-ttl are implemented using approximated</span>
<span class="token comment"># randomized algorithms.</span>
<span class="token comment">#</span>
<span class="token comment"># Note: with any of the above policies, when there are no suitable keys for</span>
<span class="token comment"># eviction, Redis will return an error on write operations that require</span>
<span class="token comment"># more memory. These are usually commands that create new keys, add data or</span>
<span class="token comment"># modify existing keys. A few examples are: SET, INCR, HSET, LPUSH, SUNIONSTORE,</span>
<span class="token comment"># SORT (due to the STORE argument), and EXEC (if the transaction includes any</span>
<span class="token comment"># command that requires memory).</span>
<span class="token comment">#</span>
<span class="token comment"># The default is:</span>
<span class="token comment">#</span>
<span class="token comment"># maxmemory-policy noeviction</span>
ç§»é™¤è§„åˆ™
volatile-lru: ä½¿ç”¨LRUç®—æ³•ç§»é™¤key åªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyæœ‰æ•ˆ
allkeys-lru: åœ¨æ‰€æœ‰keyä¸­ ä½¿ç”¨LRUç®—æ³•ç§»é™¤
volatile-random: åœ¨è¿‡æœŸé›†åˆä¸­ç§»é™¤éšæœºçš„key åªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyæœ‰æ•ˆ
allkeys-random: åœ¨æ‰€æœ‰keyä¸­ ç§»é™¤éšæœºçš„key
volatile-ttl: ç§»é™¤TTLå€¼æœ€å°çš„key å³æœ€è¿‘ä¸€æ®µæ—¶é—´å°±è¦è¿‡æœŸçš„key
noeviction: ä¸è¿›è¡Œç§»é™¤ é’ˆå¯¹å†™æ“ä½œ åªæ˜¯è¿”å›é”™è¯¯ä¿¡æ¯

<span class="token comment"># LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated</span>
<span class="token comment"># algorithms (in order to save memory), so you can tune it for speed or</span>
<span class="token comment"># accuracy. By default Redis will check five keys and pick the one that was</span>
<span class="token comment"># used least recently, you can change the sample size using the following</span>
<span class="token comment"># configuration directive.</span>
<span class="token comment">#</span>
<span class="token comment"># The default of 5 produces good enough results. 10 Approximates very closely</span>
<span class="token comment"># true LRU but costs more CPU. 3 is faster but not very accurate.</span>
<span class="token comment">#</span>
<span class="token comment"># maxmemory-samples 5</span>

<span class="token comment"># Eviction processing is designed to function well with the default setting.</span>
<span class="token comment"># If there is an unusually large amount of write traffic, this value may need to</span>
<span class="token comment"># be increased.  Decreasing this value may reduce latency at the risk of</span>
<span class="token comment"># eviction processing effectiveness</span>
<span class="token comment">#   0 = minimum latency, 10 = default, 100 = process without regard to latency</span>
<span class="token comment">#</span>
<span class="token comment"># maxmemory-eviction-tenacity 10</span>

<span class="token comment"># Starting from Redis 5, by default a replica will ignore its maxmemory setting</span>
<span class="token comment"># (unless it is promoted to master after a failover or manually). It means</span>
<span class="token comment"># that the eviction of keys will be just handled by the master, sending the</span>
<span class="token comment"># DEL commands to the replica as keys evict in the master side.</span>
<span class="token comment">#</span>
<span class="token comment"># This behavior ensures that masters and replicas stay consistent, and is usually</span>
<span class="token comment"># what you want, however if your replica is writable, or you want the replica</span>
<span class="token comment"># to have a different memory setting, and you are sure all the writes performed</span>
<span class="token comment"># to the replica are idempotent, then you may change this default (but be sure</span>
<span class="token comment"># to understand what you are doing).</span>
<span class="token comment">#</span>
<span class="token comment"># Note that since the replica by default does not evict, it may end using more</span>
<span class="token comment"># memory than the one set via maxmemory (there are certain buffers that may</span>
<span class="token comment"># be larger on the replica, or data structures may sometimes take more memory</span>
<span class="token comment"># and so forth). So make sure you monitor your replicas and make sure they</span>
<span class="token comment"># have enough memory to never hit a real out-of-memory condition before the</span>
<span class="token comment"># master hits the configured maxmemory setting.</span>
<span class="token comment">#</span>
<span class="token comment"># replica-ignore-maxmemory yes</span>

<span class="token comment"># Redis reclaims expired keys in two ways: upon access when those keys are</span>
<span class="token comment"># found to be expired, and also in background, in what is called the</span>
<span class="token comment"># &quot;active expire key&quot;. The key space is slowly and interactively scanned</span>
<span class="token comment"># looking for expired keys to reclaim, so that it is possible to free memory</span>
<span class="token comment"># of keys that are expired and will never be accessed again in a short time.</span>
<span class="token comment">#</span>
<span class="token comment"># The default effort of the expire cycle will try to avoid having more than</span>
<span class="token comment"># ten percent of expired keys still in memory, and will try to avoid consuming</span>
<span class="token comment"># more than 25% of total memory and to add latency to the system. However</span>
<span class="token comment"># it is possible to increase the expire &quot;effort&quot; that is normally set to</span>
<span class="token comment"># &quot;1&quot;, to a greater value, up to the value &quot;10&quot;. At its maximum value the</span>
<span class="token comment"># system will use more CPU, longer cycles (and technically may introduce</span>
<span class="token comment"># more latency), and will tolerate less already expired keys still present</span>
<span class="token comment"># in the system. It's a tradeoff between memory, CPU and latency.</span>
<span class="token comment">#</span>
<span class="token comment"># active-expire-effort 1</span>
</code></pre></div><h2 id="å‘å¸ƒè®¢é˜…"><a href="#å‘å¸ƒè®¢é˜…" class="header-anchor">#</a> å‘å¸ƒè®¢é˜…</h2> <blockquote><p>Rediså‘å¸ƒè®¢é˜…(pub/sub)æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼
å‘é€è€…(pub)å‘é€æ¶ˆæ¯
æ¥æ”¶è€…(sub)æ¥æ”¶æ¶ˆæ¯
Rediså®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æ‰“å¼€ä¸¤ä¸ªå®¢æˆ·ç«¯</span>
<span class="token comment"># åœ¨å…¶ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œè®¢é˜…æ“ä½œ</span>
SUBSCRIBE channel <span class="token punctuation">[</span>channel<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
SUBSCRIBE c1
</code></pre></div><p><img src="data:image/png;base64,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" alt="è®¢é˜…é¢‘é“" title="è®¢é˜…é¢‘é“"></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># åœ¨å¦ä¸€ä¸ªå®¢æˆ·ç«¯æ‰§è¡Œå‘é€æ“ä½œ</span>
PUBLISH channel message
</code></pre></div><p><img src="data:image/png;base64,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" alt="å‘é€æ¶ˆæ¯" title="å‘é€æ¶ˆæ¯"></p> <blockquote><p>è®¢é˜…è€…æ¥æ”¶æ¶ˆæ¯</p></blockquote> <p><img src="data:image/png;base64,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" alt="æ¥æ”¶æ¶ˆæ¯" title="æ¥æ”¶æ¶ˆæ¯"></p> <blockquote><p>æœªè®¢é˜…é¢‘é“æ˜¯æ¥æ”¶ä¸åˆ°å‘å¸ƒè€…å‘å¸ƒçš„æ¶ˆæ¯çš„</p></blockquote> <h2 id="æ–°æ•°æ®ç±»å‹"><a href="#æ–°æ•°æ®ç±»å‹" class="header-anchor">#</a> æ–°æ•°æ®ç±»å‹</h2> <h3 id="geospatial"><a href="#geospatial" class="header-anchor">#</a> Geospatial</h3> <blockquote><p>åœ°ç†ä½ç½®</p></blockquote> <h5 id="æ·»åŠ ä½ç½®"><a href="#æ·»åŠ ä½ç½®" class="header-anchor">#</a> æ·»åŠ ä½ç½®</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>geoadd key <span class="token punctuation">[</span>NX<span class="token operator">|</span>XX<span class="token punctuation">]</span> longitude latitude member <span class="token punctuation">[</span>longitude latitude member<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
- longitude: ç»åº¦
- latitude: çº¬åº¦
geoadd city <span class="token number">121.472</span> <span class="token number">31.231</span> shanghai
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
geoadd city <span class="token number">116.405</span> <span class="token number">39.904</span> beijing
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
geoadd city <span class="token number">117.283</span> <span class="token number">31.861</span> anhui
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><h5 id="è·å–ä½ç½®"><a href="#è·å–ä½ç½®" class="header-anchor">#</a> è·å–ä½ç½®</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>geopos key member <span class="token punctuation">[</span>member<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
geopos city shanghai
<span class="token operator">&gt;</span> <span class="token string">&quot;121.47200256586074829&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;31.23100025461577189&quot;</span>
</code></pre></div><h5 id="è·å–ç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»"><a href="#è·å–ç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»" class="header-anchor">#</a> è·å–ç»™å®šä½ç½®ä¹‹é—´çš„è·ç¦»</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>geodist key member1 member2 <span class="token punctuation">[</span>M<span class="token operator">|</span>KM<span class="token operator">|</span>FT<span class="token operator">|</span>MI<span class="token punctuation">]</span>
- M: ç±³
- KM:åƒç±³
- FT: è‹±å°º
- MI: è‹±é‡Œ
geodist city shanghai beijing
<span class="token operator">&gt;</span> <span class="token string">&quot;1067557.6637&quot;</span> <span class="token comment"># ä¸ç»™å®šå•ä½ é»˜è®¤ä¸ºç±³</span>
</code></pre></div><h5 id="ä»¥ç»™å®šç»çº¬åº¦ä¸ºä¸­å¿ƒ-è¿”å›æœ€å¤§è·ç¦»èŒƒå›´å†…çš„æ‰€æœ‰ä½ç½®"><a href="#ä»¥ç»™å®šç»çº¬åº¦ä¸ºä¸­å¿ƒ-è¿”å›æœ€å¤§è·ç¦»èŒƒå›´å†…çš„æ‰€æœ‰ä½ç½®" class="header-anchor">#</a> ä»¥ç»™å®šç»çº¬åº¦ä¸ºä¸­å¿ƒ è¿”å›æœ€å¤§è·ç¦»èŒƒå›´å†…çš„æ‰€æœ‰ä½ç½®</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>georadius key longitude latitude radius M<span class="token operator">|</span>KM<span class="token operator">|</span>FT<span class="token operator">|</span>MI
- longitude: ç»åº¦
- latitude: çº¬åº¦
- radius: åŠå¾„è·ç¦»
georadius city <span class="token number">110.405</span> <span class="token number">30.110</span> <span class="token number">1000</span> KM
<span class="token operator">&gt;</span> <span class="token string">&quot;anhui&quot;</span>
<span class="token comment"># ç»™å®šå½•å…¥å¥½çš„ä½ç½®ä¿¡æ¯ è¿”å›æœ€å¤§è·ç¦»èŒƒå›´å†…çš„æ‰€æœ‰ä½ç½®</span>
georadiusbymember key member radius M<span class="token operator">|</span>KM<span class="token operator">|</span>FT<span class="token operator">|</span>MI <span class="token punctuation">[</span>COUNT<span class="token punctuation">]</span>
- count: è¿‡æ»¤è¿”å›æ¡æ•°
georadiusbymember city shanghai <span class="token number">1000</span> KM
<span class="token operator">&gt;</span> <span class="token string">&quot;anhui&quot;</span>
<span class="token operator">&gt;</span> <span class="token string">&quot;shanghai&quot;</span>
</code></pre></div><h5 id="è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„geohash"><a href="#è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„geohash" class="header-anchor">#</a> è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªä½ç½®å…ƒç´ çš„Geohash</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>geohash key member <span class="token punctuation">[</span>member<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
geohash city shanghai
<span class="token operator">&gt;</span> <span class="token string">&quot;wtw3sjmjyb0&quot;</span>
</code></pre></div><h3 id="hyperloglog"><a href="#hyperloglog" class="header-anchor">#</a> HyperLogLog</h3> <blockquote><p>åŸºæ•°: å¯ä»¥ç†è§£ä¸ºä¸é‡å¤çš„å…ƒç´ </p></blockquote> <h5 id="æ·»åŠ å€¼-4"><a href="#æ·»åŠ å€¼-4" class="header-anchor">#</a> æ·»åŠ å€¼</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>pfadd key <span class="token punctuation">[</span>element <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
pfadd j1 <span class="token function">java</span> python nodejs
</code></pre></div><h5 id="è¿”å›ä¸é‡å¤çš„å…ƒç´ ä¸ªæ•°"><a href="#è¿”å›ä¸é‡å¤çš„å…ƒç´ ä¸ªæ•°" class="header-anchor">#</a> è¿”å›ä¸é‡å¤çš„å…ƒç´ ä¸ªæ•°</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>pfcount key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
pfcount j1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h5 id="å°†å¤šä¸ªhyperloglogåˆå¹¶ä¸ºä¸€ä¸ªhyperloglog"><a href="#å°†å¤šä¸ªhyperloglogåˆå¹¶ä¸ºä¸€ä¸ªhyperloglog" class="header-anchor">#</a> å°†å¤šä¸ªHyperLogLogåˆå¹¶ä¸ºä¸€ä¸ªHyperLogLog</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>pfmerge destkey sourcekey <span class="token punctuation">[</span>sourcekey<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
- å°†sourcekeyåˆå¹¶åˆ°destkey
pfmerge j1 j2
<span class="token operator">&gt;</span> OK
pfcount j1
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">5</span>
</code></pre></div><h3 id="bitmaps"><a href="#bitmaps" class="header-anchor">#</a> Bitmaps</h3> <blockquote><p>ä½å›¾
Redisæä¾›çš„Bitmapså¯ä»¥å®ç°å¯¹ä½çš„æ“ä½œ
å…¶æœ¬äº‹å¹¶ä¸æ˜¯ä¸€ç§æ•°æ®ç±»å‹ æœ¬è´¨è¿˜æ˜¯å­—ç¬¦ä¸² åªä¸è¿‡å¯ä»¥å®ƒå¯ä»¥å¯¹å­—ç¬¦ä¸²çš„ä½è¿›è¡Œæ“ä½œ
Bitmapså•ç‹¬æä¾›äº†ä¸€å¥—å‘½ä»¤ å› æ­¤ä¸å­—ç¬¦ä¸²çš„æ“ä½œè¿˜æ˜¯æœ‰äº›è®¸ä¸åŒçš„
å¯ä»¥æŠŠBitmapsæƒ³è±¡ä¸ºä¸€ä¸ªä»¥ä½ä¸ºå•ä½çš„æ•°ç»„ æ•°ç»„çš„æ¯ä¸ªå•å…ƒåªèƒ½å­˜å‚¨0 or 1 æ•°ç»„çš„ä¸‹æ ‡åœ¨Bitmapsä¸­å«åšåç§»é‡
Bitmapsæ˜¯é€šè¿‡æ“ä½œäºŒè¿›åˆ¶ä½æ¥è¿›è¡Œè®°å½•çš„ åªæœ‰ 0 1 ä¸¤ç§çŠ¶æ€
å¯ä»¥ç”¨æ¥åšç”¨æˆ·æ´»è·ƒä¿¡æ¯ ç”¨æˆ·ç™»å½•ä¿¡æ¯ æ‰“å¡ä¿¡æ¯ç­‰</p></blockquote> <p><img src="data:image/jpeg;base64,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" alt="image.jpeg"></p> <blockquote><p>æ¨¡æ‹Ÿä¸€ä¸ªåœºæ™¯
å°†ç”¨æˆ·çš„ç­¾åˆ°ä¿¡æ¯å­˜å…¥Bitmapsä¸­ 10ä¸ªç”¨æˆ· ç­¾åˆ°è®°1 æœªç­¾åˆ°è®°0</p></blockquote> <h5 id="è®¾ç½®å€¼-3"><a href="#è®¾ç½®å€¼-3" class="header-anchor">#</a> è®¾ç½®å€¼</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>setbit key offset value
<span class="token comment"># è®¾ç½®éƒ¨åˆ†ç”¨æˆ·å·²ç­¾åˆ°</span>
setbit date:221212 <span class="token number">1</span> <span class="token number">1</span>
setbit date:221212 <span class="token number">2</span> <span class="token number">1</span>
setbit date:221212 <span class="token number">3</span> <span class="token number">1</span>
setbit date:221212 <span class="token number">4</span> <span class="token number">0</span>
setbit date:221212 <span class="token number">5</span> <span class="token number">0</span>
setbit date:221212 <span class="token number">6</span> <span class="token number">0</span>
setbit date:221212 <span class="token number">7</span> <span class="token number">0</span>
setbit date:221212 <span class="token number">8</span> <span class="token number">1</span>
setbit date:221212 <span class="token number">9</span> <span class="token number">1</span>
setbit date:221212 <span class="token number">10</span> <span class="token number">1</span>
</code></pre></div><h5 id="è·å–å€¼-2"><a href="#è·å–å€¼-2" class="header-anchor">#</a> è·å–å€¼</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>getbit key offset
- offset: åç§»é‡ å¯ä»¥ç†è§£ä¸ºä¸‹æ ‡
getbit date:221212 <span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
getbit date:221212 <span class="token number">7</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span> <span class="token comment"># åç§»é‡è®¾ç½®çš„å°±æ˜¯0</span>
<span class="token comment"># å½“offsetæ¯”å­—ç¬¦ä¸²çš„é•¿åº¦å¤§ æˆ–è€…keyä¸å­˜åœ¨æ—¶ è¿”å›0</span>
</code></pre></div><h5 id="ç»Ÿè®¡è¢«è®¾ç½®ä¸º1çš„ä½å›¾æ•°é‡"><a href="#ç»Ÿè®¡è¢«è®¾ç½®ä¸º1çš„ä½å›¾æ•°é‡" class="header-anchor">#</a> ç»Ÿè®¡è¢«è®¾ç½®ä¸º1çš„ä½å›¾æ•°é‡</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>bitcount key <span class="token punctuation">[</span>start end <span class="token punctuation">[</span>BYTE<span class="token operator">|</span>BIT<span class="token punctuation">]</span><span class="token punctuation">]</span>
- é€šè¿‡è®¾ç½®startå’Œendå¯ä»¥è®©è®¡æ•°åªåœ¨ç‰¹å®šä½ä¸Šè¿›è¡Œ
bitcount date:221212 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
</code></pre></div><h5 id="è¿”å›ä½å›¾ä¸­ç¬¬ä¸€ä¸ªå€¼ä¸º-bit-çš„äºŒè¿›åˆ¶ä½ä½ç½®"><a href="#è¿”å›ä½å›¾ä¸­ç¬¬ä¸€ä¸ªå€¼ä¸º-bit-çš„äºŒè¿›åˆ¶ä½ä½ç½®" class="header-anchor">#</a> è¿”å›ä½å›¾ä¸­ç¬¬ä¸€ä¸ªå€¼ä¸º&lt;bit&gt;çš„äºŒè¿›åˆ¶ä½ä½ç½®</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>bitpos key bit <span class="token punctuation">[</span>start <span class="token punctuation">[</span>end <span class="token punctuation">[</span>BYTE<span class="token operator">|</span>BIT<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
bitpos date:221212 <span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><h5 id="è®¡ç®—ç»™å®šä½å›¾çš„-å¹¶-æˆ–-å¼‚æˆ–-é-å¹¶ä¿å­˜åˆ°æ–°çš„ä½å›¾"><a href="#è®¡ç®—ç»™å®šä½å›¾çš„-å¹¶-æˆ–-å¼‚æˆ–-é-å¹¶ä¿å­˜åˆ°æ–°çš„ä½å›¾" class="header-anchor">#</a> è®¡ç®—ç»™å®šä½å›¾çš„[å¹¶|æˆ–|å¼‚æˆ–|é]å¹¶ä¿å­˜åˆ°æ–°çš„ä½å›¾</h5> <div class="language-shell extra-class"><pre class="language-shell"><code>bitop operation destkey key <span class="token punctuation">[</span>key<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
- operation: å¯ä»¥æ˜¯ AND OR NOT XORå››ç§æ“ä½œå…¶ä¸­ä¸€ç§
- destkey: ä¿å­˜åˆ°çš„ç›®æ ‡ä½å›¾
<span class="token comment"># è¿”å›ä¿å­˜åˆ°destkeyçš„å­—ç¬¦ä¸²é•¿åº¦</span>
<span class="token comment"># è¯¥æ“ä½œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šè¿›è¡Œå»é‡æ“ä½œ</span>
bitop and date:221213 date:221212 date:221211
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</code></pre></div><h2 id="æ•´åˆspringbooté…ç½®"><a href="#æ•´åˆspringbooté…ç½®" class="header-anchor">#</a> æ•´åˆSpringBooté…ç½®</h2> <blockquote><p>ä¾èµ–</p></blockquote> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 116.205.179.35
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token comment"># æœ€å¤§è¿æ¥æ•°</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">3</span>
        <span class="token comment"># æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´</span>
        <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> <span class="token number">-1</span>
        <span class="token comment"># æœ€å¤§ç©ºé—²è¿æ¥æ•°</span>
        <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">5</span>
        <span class="token comment"># æœ€å°ç©ºé—²è¿æ¥æ•°</span>
        <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@EnableCaching</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token keyword">extends</span> <span class="token class-name">CachingConfigurerSupport</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StringRedisSerializer</span> stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">PropertyAccessor</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">,</span> <span class="token class-name">JsonAutoDetect<span class="token punctuation">.</span>Visibility</span><span class="token punctuation">.</span><span class="token constant">ANY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">activateDefaultTyping</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">.</span><span class="token function">getPolymorphicTypeValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ObjectMapper<span class="token punctuation">.</span>DefaultTyping</span><span class="token punctuation">.</span><span class="token constant">NON_FINAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>redisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span>redisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CacheManager</span> <span class="token function">cacheManager</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">StringRedisSerializer</span> stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> redisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">PropertyAccessor</span><span class="token punctuation">.</span><span class="token constant">ALL</span><span class="token punctuation">,</span> <span class="token class-name">JsonAutoDetect<span class="token punctuation">.</span>Visibility</span><span class="token punctuation">.</span><span class="token constant">ANY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">activateDefaultTyping</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">.</span><span class="token function">getPolymorphicTypeValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ObjectMapper<span class="token punctuation">.</span>DefaultTyping</span><span class="token punctuation">.</span><span class="token constant">NON_FINAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">RedisCacheConfiguration</span> redisCacheConfiguration <span class="token operator">=</span> <span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">.</span><span class="token function">defaultCacheConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">entryTtl</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">serializeKeysWith</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializationContext<span class="token punctuation">.</span>SerializationPair</span><span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">serializeValuesWith</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializationContext<span class="token punctuation">.</span>SerializationPair</span><span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span>redisSerializer<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">disableCachingNullValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token class-name">RedisCacheManager</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">cacheDefaults</span><span class="token punctuation">(</span>redisCacheConfiguration<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="header-anchor">#</a> äº‹åŠ¡</h2> <blockquote><p>Redisäº‹åŠ¡æ˜¯ä¸€ä¸ªå•ç‹¬çš„éš”ç¦»æ“ä½œ
äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ– æŒ‰é¡ºåºçš„æ‰§è¡Œ
äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ ä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘æ¥çš„å‘½ä»¤è¯·æ±‚æ‰€æ‰“æ–­
ä¸»è¦ä½œç”¨å°±æ˜¯ä¸²è”å¤šä¸ªå‘½ä»¤é˜²æ­¢åˆ«çš„å‘½ä»¤æ’é˜Ÿ</p></blockquote> <blockquote><p>ä»è¾“å…¥Multiå‘½ä»¤å¼€å§‹ è¾“å…¥çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šä¾æ¬¡è¿›å…¥å‘½ä»¤é˜Ÿåˆ—ä¸­ ä½†ä¸ä¼šæ‰§è¡Œ ç›´åˆ°è¾“å…¥Execå‘½ä»¤å Redisæ‰ä¼šå°†å‘½ä»¤é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ä¾æ¬¡æ‰§è¡Œ
Multi: å¼€å¯äº‹åŠ¡
Exec: æ‰§è¡Œå‘½ä»¤
Discard: æ”¾å¼ƒç»„é˜Ÿ ç±»ä¼¼äºå›æ»šæ“ä½œ</p></blockquote> <p><img src="/study/assets/img/9.77ba1209.jpeg" alt="image.jpeg"></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> FLUSHDB
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> name hicloud-redis
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> EXEC
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;hicloud-redis&quot;</span>
</code></pre></div><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="header-anchor">#</a> é”™è¯¯å¤„ç†</h3> <blockquote><p>ç»„é˜Ÿè¿‡ç¨‹ä¸­ å¦‚æœä¸€æ¡å‘½ä»¤å‡ºç°äº†é”™è¯¯ é‚£ä¹ˆæ‰§è¡Œæ—¶æ•´ä¸ªé˜Ÿåˆ—éƒ½ä¼šè¢«å–æ¶ˆ</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k3
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR wrong number of arguments <span class="token keyword">for</span> <span class="token string">'set'</span> <span class="token builtin class-name">command</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> EXEC
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> EXECABORT Transaction discarded because of previous errors.
</code></pre></div><blockquote><p>æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ–æ‰§è¡Œé˜¶æ®µæ—¶ å¦‚æœä¸€æ¡å‘½ä»¤å‡ºé”™äº† é‚£ä¹ˆåªæœ‰å‡ºé”™çš„å‘½ä»¤ä¸ä¼šè¢«æ‰§è¡Œ å…¶ä»–å‘½ä»¤ä¾æ—§æ‰§è¡Œ ä¸ä¼šå›æ»š</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> INCR name
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> EXEC
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not an integer or out of range
<span class="token number">2</span><span class="token punctuation">)</span> OK
</code></pre></div><h3 id="äº‹åŠ¡å†²çª"><a href="#äº‹åŠ¡å†²çª" class="header-anchor">#</a> äº‹åŠ¡å†²çª</h3> <blockquote><p>å‡å¦‚ä¸€ä¸ªè´¦æˆ·ä½™é¢ä¸€ä¸‡å…ƒ å¤šäººåŒæ—¶ä½¿ç”¨
Aä½¿ç”¨5000å…ƒ Bä½¿ç”¨4000å…ƒ Cä½¿ç”¨3000å…ƒ
æœ€ç»ˆè´¦æˆ·ä½™é¢-2000å…ƒ
å› ä¸ºä¸‰äººåœ¨æ¶ˆè´¹æ—¶ çœ‹åˆ°çš„è´¦æˆ·ä½™é¢éƒ½ä¸ºä¸€ä¸‡å…ƒ éƒ½è®¤ä¸ºä½™é¢å……è¶³ ä½†å…¶å®è¿™æ˜¯ä¸ªå‡æ•°æ® åœ¨çœŸå®ä¸šåŠ¡åœºæ™¯ä¸­æ˜¯ä¸è¢«å…è®¸çš„
è§£å†³è¿™ç§é—®é¢˜æœ‰ä¸¤ç§æ–¹å¼ æ‚²è§‚é” å’Œ ä¹è§‚é”</p></blockquote> <h4 id="æ‚²è§‚é”"><a href="#æ‚²è§‚é”" class="header-anchor">#</a> æ‚²è§‚é”</h4> <blockquote><p>æ¯æ¬¡æ‹¿æ•°æ®æ—¶ éƒ½è®¤ä¸ºæ•°æ®ä¼šè¢«ä¿®æ”¹ æ‰€ä»¥æ¯æ¬¡æ‹¿æ•°æ®æ—¶éƒ½ä¼šè¿›è¡Œä¸Šé” è¿™æ ·å…¶ä»–äººæƒ³æ‹¿å–è¿™ä¸ªæ•°æ®æ—¶éœ€è¦ç­‰å¾… ç›´åˆ°æ‹¿åˆ°é”</p></blockquote> <h4 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="header-anchor">#</a> ä¹è§‚é”</h4> <blockquote><p>æ¯æ¬¡æ‹¿æ•°æ®æ—¶ éƒ½è®¤ä¸ºæ•°æ®ä¸ä¼šè¢«ä¿®æ”¹ å› æ­¤ä¸ä¼šä¸Šé” ä½†åœ¨æ›´æ–°æ—¶ä¼šå»åˆ¤æ–­åœ¨æ­¤æœŸé—´æœ‰æ²¡æœ‰å…¶ä»–äººæ›´æ–°è¿™ä¸ªæ•°æ® å¯ä»¥é€šè¿‡ç‰ˆæœ¬å·æœºåˆ¶ç­‰</p></blockquote> <blockquote><p>ç»™æ•°æ®å¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·å­—æ®µ æ¯æ¬¡æ‹¿æ•°æ®æ—¶æ¯”å¯¹ç‰ˆæœ¬å· ç‰ˆæœ¬å·ä¸ä¸€è‡´ä¸è¿›è¡Œæ“ä½œ
ABåŒæ—¶æ“ä½œ æ‹¿å–æ•°æ®ç‰ˆæœ¬å·ä¸ºv1.0
æ­¤æ—¶Aç½‘é€Ÿå¿«äº› æ“ä½œå®Œæ•°æ®å ç‰ˆæœ¬å·ä¿®æ”¹ä¸ºv2.0
è¿™æ—¶Bå†å»æ“ä½œ é€šè¿‡å¯¹æ¯”ç‰ˆæœ¬å·å‘ç°ç‰ˆæœ¬å·ä¸ä¸€è‡´ å› æ­¤Bçš„æ“ä½œä¸ä¼šè¢«æ‰§è¡Œ</p></blockquote> <h4 id="watch"><a href="#watch" class="header-anchor">#</a> Watch</h4> <blockquote><p>ä½¿ç”¨Watchç›‘è§†key å¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œå‰ keyè¢«ä¿®æ”¹äº† é‚£äº‹åŠ¡ä¸åœ¨æ‰§è¡ŒæˆåŠŸ</p></blockquote> <blockquote><p>å‡†å¤‡ä¸¤å°RedisæœåŠ¡å™¨ åŒæ—¶ç›‘è§†money</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> money <span class="token number">100</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> WATCH money
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> INCRBY money <span class="token number">50</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> EXEC
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">150</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> WATCH money
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> MULTI
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> INCR money
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> EXEC
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>Aæœºå™¨ä¿®æ”¹å®Œmoneyå Bæœºå™¨å†å»ä¿®æ”¹ä¼šå‘ç°æ²¡æœ‰ä¿®æ”¹æˆåŠŸ
Aä¿®æ”¹å®Œå keyçš„ç‰ˆæœ¬å·å˜äº† è€ŒBæ‹¿åˆ°çš„è¿˜æ˜¯æœ€å¼€å§‹çš„ç‰ˆæœ¬å· åœ¨ä¿®æ”¹æ—¶ ç‰ˆæœ¬å·ä¸ä¸€è‡´ æ‰€æœ‰äº‹åŠ¡æ‰§è¡Œå¤±è´¥</p></blockquote> <h4 id="unwatch"><a href="#unwatch" class="header-anchor">#</a> Unwatch</h4> <blockquote><p>å–æ¶ˆWatchå¯¹keyçš„ç›‘æ§
å¦‚æœåœ¨æ‰§è¡ŒUnwatchä¹‹å‰ å·²ç»æ‰§è¡Œäº†Execæˆ–Discard é‚£ä¹ˆå°±ä¸éœ€è¦å†æ‰§è¡ŒUnwatchå‘½ä»¤äº†</p></blockquote> <h3 id="ä¸‰ç‰¹æ€§"><a href="#ä¸‰ç‰¹æ€§" class="header-anchor">#</a> ä¸‰ç‰¹æ€§</h3> <ul><li>å•ç‹¬çš„éš”ç¦»æ“ä½œ
<ul><li>äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ– æŒ‰é¡ºåºçš„æ‰§è¡Œ äº‹åŠ¡å†æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰€æ‰“æ–­</li></ul></li> <li>æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ
<ul><li>é˜Ÿåˆ—ä¸­çš„å‘½ä»¤åœ¨æäº¤ä¹‹å‰éƒ½ä¸ä¼šè¢«æ‰§è¡Œ å› ä¸ºäº‹åŠ¡æäº¤å‰ä»»ä½•å‘½ä»¤éƒ½ä¸ä¼šè¢«æ‰§è¡Œ</li></ul></li> <li>ä¸ä¿è¯åŸå­æ€§
<ul><li>äº‹åŠ¡ä¸­å¦‚æœä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ å…¶ä»–å‘½ä»¤ä¾æ—§æ‰§è¡Œ ä¸ä¼šå›æ»š</li></ul></li></ul> <h3 id="ç§’æ€æ¡ˆä¾‹"><a href="#ç§’æ€æ¡ˆä¾‹" class="header-anchor">#</a> ç§’æ€æ¡ˆä¾‹</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeckillServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SeckillService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">doSeckill</span><span class="token punctuation">(</span><span class="token class-name">String</span> proId<span class="token punctuation">,</span> <span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>proId<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å•†å“IDæˆ–ç”¨æˆ·IDä¸èƒ½ä¸ºç©º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;116.205.179.35&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            jedis<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// TODO uidæ˜¯å¦å·²å‚ä¸æ´»åŠ¨</span>
            <span class="token class-name">Boolean</span> sismember <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">sismember</span><span class="token punctuation">(</span><span class="token string">&quot;sckill:user&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sismember<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ‚¨å·²å‚ä¸è¯¥æ´»åŠ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// TODO åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span>
            <span class="token class-name">String</span> store <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>proId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ‰‹æ…¢äº†, å•†å“å·²æŠ¢å®Œ!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// TODO ç§’æ€æˆåŠŸ åº“å­˜-10</span>
            jedis<span class="token punctuation">.</span><span class="token function">decrBy</span><span class="token punctuation">(</span>proId<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedis<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot;sckill:user&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç§’æ€æˆåŠŸ!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uId <span class="token operator">+</span> <span class="token string">&quot;: ç§’æ€å•†å“ã€Œ&quot;</span> <span class="token operator">+</span> proId <span class="token operator">+</span> <span class="token string">&quot;ã€æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> http://localhost:8088/sc/kill <span class="token parameter variable">-X</span> POST
</code></pre></div><blockquote><p>åœ¨å•è¯·æ±‚ä¸‹ ç§’æ€ä¸šåŠ¡æ˜¯æ²¡æœ‰é—®é¢˜çš„
æ¥ä¸‹æ¥ æ¨¡æ‹Ÿå¹¶å‘è¯·æ±‚ä¸‹ä¸šåŠ¡åœºæ™¯</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># å®‰è£…httpd-toolså·¥å…·</span>
$ yum <span class="token function">install</span> httpd-tools <span class="token parameter variable">-y</span>
</code></pre></div><blockquote><p>å‘é€è¯·æ±‚æµ‹è¯•
1000è¯·æ±‚
100å¹¶å‘</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">touch</span> postfile
ab <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">100</span> <span class="token parameter variable">-p</span> ./postfile <span class="token parameter variable">-T</span> application/x-www-form-urlencoded http://192.168.0.196:8088/sc/kill
</code></pre></div><p><img src="/study/assets/img/10.7a72c7fc.png" alt="image.png"></p> <blockquote><p>æŸ¥çœ‹ä¸€ä¸‹åº“å­˜</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get computer:huawei:hw2022
<span class="token string">&quot;-240&quot;</span>
<span class="token comment"># åº“å­˜ç»“æœç›´æ¥é™åˆ°äº†-240</span>
<span class="token comment"># æ¥ç€æ¥çœ‹ä¸‹ç§’æ€æˆåŠŸçš„ç”¨æˆ·</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS sckill:user
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;11387683&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;19440799&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;20335247&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;21289751&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;21956260&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;22635703&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;24799381&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;34168411&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;38000245&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;40787954&quot;</span>
<span class="token number">11</span><span class="token punctuation">)</span> <span class="token string">&quot;42268713&quot;</span>
<span class="token number">12</span><span class="token punctuation">)</span> <span class="token string">&quot;43987076&quot;</span>
<span class="token number">13</span><span class="token punctuation">)</span> <span class="token string">&quot;47171925&quot;</span>
<span class="token number">14</span><span class="token punctuation">)</span> <span class="token string">&quot;47878229&quot;</span>
<span class="token number">15</span><span class="token punctuation">)</span> <span class="token string">&quot;48062031&quot;</span>
<span class="token number">16</span><span class="token punctuation">)</span> <span class="token string">&quot;52416624&quot;</span>
<span class="token number">17</span><span class="token punctuation">)</span> <span class="token string">&quot;54756159&quot;</span>
<span class="token number">18</span><span class="token punctuation">)</span> <span class="token string">&quot;56906009&quot;</span>
<span class="token number">19</span><span class="token punctuation">)</span> <span class="token string">&quot;60810919&quot;</span>
<span class="token number">20</span><span class="token punctuation">)</span> <span class="token string">&quot;61447459&quot;</span>
<span class="token number">21</span><span class="token punctuation">)</span> <span class="token string">&quot;65571068&quot;</span>
<span class="token number">22</span><span class="token punctuation">)</span> <span class="token string">&quot;66770471&quot;</span>
<span class="token number">23</span><span class="token punctuation">)</span> <span class="token string">&quot;69809311&quot;</span>
<span class="token number">24</span><span class="token punctuation">)</span> <span class="token string">&quot;71395383&quot;</span>
<span class="token number">25</span><span class="token punctuation">)</span> <span class="token string">&quot;76781435&quot;</span>
<span class="token number">26</span><span class="token punctuation">)</span> <span class="token string">&quot;77614865&quot;</span>
<span class="token number">27</span><span class="token punctuation">)</span> <span class="token string">&quot;78385710&quot;</span>
<span class="token number">28</span><span class="token punctuation">)</span> <span class="token string">&quot;79337370&quot;</span>
<span class="token number">29</span><span class="token punctuation">)</span> <span class="token string">&quot;79648797&quot;</span>
<span class="token number">30</span><span class="token punctuation">)</span> <span class="token string">&quot;83331270&quot;</span>
<span class="token number">31</span><span class="token punctuation">)</span> <span class="token string">&quot;91625962&quot;</span>
<span class="token number">32</span><span class="token punctuation">)</span> <span class="token string">&quot;93590255&quot;</span>
<span class="token number">33</span><span class="token punctuation">)</span> <span class="token string">&quot;95650346&quot;</span>
<span class="token number">34</span><span class="token punctuation">)</span> <span class="token string">&quot;99157592&quot;</span>
<span class="token comment"># ç¨‹åºè®¾å®šç§’æ€äººæ•°åªå…è®¸åœ¨10ä½ ä½†ç»“æœæ˜¾ç¤ºæœ‰33ä½ç”¨æˆ·ç§’æ€æˆåŠŸ</span>
</code></pre></div><p><img src="/study/assets/img/11.ddc7e8e3.png" alt="ç§’æ€æˆåŠŸç”¨æˆ·å·²ç»è¶…è¿‡10ä½" title="ç§’æ€æˆåŠŸç”¨æˆ·å·²ç»è¶…è¿‡10ä½"></p> <blockquote><p>ç»¼åˆä»¥ä¸Šç»“æœæ¥çœ‹ åœ¨å¹¶å‘æƒ…å†µä¸‹ æˆ‘ä»¬çš„ç§’æ€æœåŠ¡è¿˜æ˜¯æœ‰äº›é—®é¢˜çš„</p></blockquote> <h4 id="è¶…å–é—®é¢˜"><a href="#è¶…å–é—®é¢˜" class="header-anchor">#</a> è¶…å–é—®é¢˜</h4> <blockquote><p>å–å‡ºçš„å•†å“è¿œè¿œè¶…è¿‡äº†å·²æœ‰åº“å­˜æ•°
å·²ç»ç§’å…‰ ä½†è¿˜å­˜åœ¨åº“å­˜
åŸå› å°±æ˜¯ä¹è§‚é”å¯¼è‡´å¾ˆå¤šè¯·æ±‚å¤±è´¥ å…ˆç‚¹çš„æ²¡æŠ¢åˆ° åç‚¹çš„æŠ¢åˆ°äº†</p></blockquote> <h4 id="è¶…æ—¶é—®é¢˜"><a href="#è¶…æ—¶é—®é¢˜" class="header-anchor">#</a> è¶…æ—¶é—®é¢˜</h4> <blockquote><p>é€šè¿‡Redisè¿æ¥æ± è§£å†³</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JedisPoolUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">JedisPool</span> <span class="token function">getJedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jedisPool <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>jedisPool <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">JedisPoolConfig</span> jedisPoolConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// å¯åˆ†é…å®ä¾‹</span>
                    jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// æœ€å¤§ç©ºé—²æ•°</span>
                    jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// æœ€å¤§ç­‰å¾…æ—¶é—´</span>
                    jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setMaxWaitMillis</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setBlockWhenExhausted</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    jedisPoolConfig<span class="token punctuation">.</span><span class="token function">setTestOnBorrow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    jedisPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>jedisPoolConfig<span class="token punctuation">,</span> <span class="token string">&quot;116.205.179.35&quot;</span><span class="token punctuation">,</span> <span class="token number">6379</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> jedisPool<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">releaseJedisPool</span><span class="token punctuation">(</span><span class="token class-name">JedisPool</span> jedisPool<span class="token punctuation">,</span> <span class="token class-name">Jedis</span> jedis<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jedis <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeckillServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SeckillService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">doSeckill</span><span class="token punctuation">(</span><span class="token class-name">String</span> proId<span class="token punctuation">,</span> <span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>proId<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>uId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å•†å“IDæˆ–ç”¨æˆ·IDä¸èƒ½ä¸ºç©º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Jedis jedis = new Jedis(&quot;116.205.179.35&quot;, 6379)</span>
        <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token function">getJedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// jedis.auth(&quot;root&quot;);</span>
            <span class="token comment">// TODO uidæ˜¯å¦å·²å‚ä¸æ´»åŠ¨</span>
            <span class="token class-name">Boolean</span> sismember <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">sismember</span><span class="token punctuation">(</span><span class="token string">&quot;sckill:user&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sismember<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ‚¨å·²å‚ä¸è¯¥æ´»åŠ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// ç›‘è§†åº“å­˜</span>
            jedis<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>proId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// TODO åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³</span>
            <span class="token class-name">String</span> store <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>proId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;æ‰‹æ…¢äº†, å•†å“å·²æŠ¢å®Œ!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> result<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// TODO ç§’æ€æˆåŠŸ åº“å­˜-10</span>
            <span class="token class-name">Transaction</span> multi <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            multi<span class="token punctuation">.</span><span class="token function">decrBy</span><span class="token punctuation">(</span>proId<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            multi<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot;sckill:user&quot;</span><span class="token punctuation">,</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> exec <span class="token operator">=</span> multi<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>exec <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> exec<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç§’æ€å¤±è´¥!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uId <span class="token operator">+</span> <span class="token string">&quot;: ç§’æ€å•†å“ã€Œ&quot;</span> <span class="token operator">+</span> proId <span class="token operator">+</span> <span class="token string">&quot;ã€å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç§’æ€æˆåŠŸ!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uId <span class="token operator">+</span> <span class="token string">&quot;: ç§’æ€å•†å“ã€Œ&quot;</span> <span class="token operator">+</span> proId <span class="token operator">+</span> <span class="token string">&quot;ã€æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token function">releaseJedisPool</span><span class="token punctuation">(</span>jedisPool<span class="token punctuation">,</span> jedis<span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;flag&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç§’æ€å¤±è´¥!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uId <span class="token operator">+</span> <span class="token string">&quot;: ç§’æ€å•†å“ã€Œ&quot;</span> <span class="token operator">+</span> proId <span class="token operator">+</span> <span class="token string">&quot;ã€å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token function">releaseJedisPool</span><span class="token punctuation">(</span>jedisPool<span class="token punctuation">,</span> jedis<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> seckill.log
<span class="token function">touch</span> seckill.log
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>ab <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">100</span> <span class="token parameter variable">-p</span> ./postfile <span class="token parameter variable">-T</span> application/x-www-form-urlencoded http://192.168.0.196:8088/sc/kill
</code></pre></div><p><img src="/study/assets/img/12.9298c6c8.png" alt="image.png"><br><img src="/study/assets/img/13.6aa99398.png" alt="éƒ¨åˆ†æ•°æ® æœ‰æˆåŠŸæœ‰å¤±è´¥" title="éƒ¨åˆ†æ•°æ® æœ‰æˆåŠŸæœ‰å¤±è´¥"><br><img src="data:image/png;base64,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" alt="image.png"></p> <blockquote><p>åº“å­˜å’Œç§’æ€ç”¨æˆ·éƒ½æ˜¯æ­£å¸¸çš„</p></blockquote> <h4 id="åº“å­˜é—ç•™é—®é¢˜"><a href="#åº“å­˜é—ç•™é—®é¢˜" class="header-anchor">#</a> åº“å­˜é—ç•™é—®é¢˜</h4> <blockquote><p>è°ƒæ•´åº“å­˜ä¸º500
æ¯æ¬¡ç§’æ€-1</p></blockquote> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">seckill</span><span class="token punctuation">:</span>
  <span class="token key atrule">store</span><span class="token punctuation">:</span> <span class="token number">100</span>
  <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token number">10</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SckillApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SckillApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token function">getJedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;computer:huawei:hw2022&quot;</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">&quot;sckill:user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> seckill.jar <span class="token parameter variable">--seckill.store</span><span class="token operator">=</span><span class="token number">500</span> <span class="token parameter variable">--seckill.value</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator">&gt;</span> ./seckill.log <span class="token operator">&amp;</span>
<span class="token comment"># 1000ä¸ªè¯·æ±‚ 200å¹¶å‘</span>
ab <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">200</span> <span class="token parameter variable">-p</span> ./postfile <span class="token parameter variable">-T</span> application/x-www-form-urlencoded http://192.168.0.196:8088/sc/kill
</code></pre></div><p><img src="data:image/png;base64,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" alt="image.png"></p> <blockquote><p>ç»è¿‡ä¸€è½®åŠˆå¤©ç›–åœ°çš„ç§’æ€ä¹‹å åº“å­˜ç«Ÿç„¶è¿˜å‰©465 è€Œç§’æ€ç”¨æˆ·ä»…ä»…åªæœ‰35ä½
ä¸å¯¹å‘€ æ€ä¹ˆè·Ÿé¢„æƒ³çš„ä¸å¤ªä¸€æ ·å‘¢
500åº“å­˜ 1000è¯·æ±‚ ç§’æ€ç”¨æˆ·æ€ä¹ˆç€ä¹Ÿå¾—400èµ·æ­¥å§
è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢</p></blockquote> <blockquote><p>è¿™å°±èŠåˆ°äº†ä¹è§‚é”çš„é—®é¢˜
500åº“å­˜ 1000äººæ¥è¿›è¡Œç§’æ€
å‡è®¾ç¬¬ä¸€ä¸ªäººæŠ¢åˆ°äº† å¹¶ä¸”æ“ä½œæ•°æ®ä¿®æ”¹äº†ç‰ˆæœ¬å·
é‚£ä¹ˆåé¢çš„äººæ‰€æ‹¿åˆ°çš„ç‰ˆæœ¬å·ä¸çœŸå®çš„ç‰ˆæœ¬å·ä¸ä¸€è‡´ ä¹Ÿå°±æ— æ³•è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œäº†</p></blockquote> <blockquote><p>é‚£å¦‚ä½•è§£å†³å‘¢
å¯ä»¥ä½¿ç”¨æ‚²è§‚é”æœºåˆ¶
ä½†Redisæ— æ³•ç›´æ¥ä½¿ç”¨æ‚²è§‚é”
å¯ä»¥é€šè¿‡Luaè„šæœ¬è¿›è¡Œæ“ä½œ</p></blockquote> <h4 id="lua"><a href="#lua" class="header-anchor">#</a> Lua</h4> <blockquote><p>Luaæ˜¯ç”±Cè¯­è¨€ç¼–å†™çš„ä¸€ä¸ªè½»é‡å°å·§çš„è„šæœ¬è¯­è¨€
è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†é€šè¿‡çµæ´»åµŒå…¥åº”ç”¨ç¨‹åºä¸­ä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½
Luaè¯­è¨€ä»£ç ç®€æ´ åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šéƒ½å¯ä»¥è¿è¡Œ</p></blockquote> <blockquote><p>å¯ä»¥å°†ä¼—å¤šRedisæ“ä½œå†™æˆä¸€ä¸ªLuaè„šæœ¬ ä¸€æ¬¡æ€§äº¤ç»™Redisæ‰§è¡Œ ä»¥å‡å°‘è¿æ¥æ¬¡æ•° æé«˜æ€§èƒ½
Luaè„šæœ¬ç±»ä¼¼Redisäº‹åŠ¡ æœ‰ä¸€å®šçš„åŸå­æ€§ ä¸ä¼šè¢«å…¶ä»–æ“ä½œæ‰“æ–­ å¯ä»¥å®Œæˆä¸€äº›Redisäº‹åŠ¡æ€§æ“ä½œ
ä½†åªæ”¯æŒRedis2.6ç‰ˆæœ¬ä»¥ä¸Šä½¿ç”¨</p></blockquote> <blockquote><p>é€šè¿‡Luaè„šæœ¬è§£å†³äº‰æŠ¢é—®é¢˜ å®é™…ä¸Šåˆ©ç”¨Rediså•çº¿ç¨‹ç‰¹æ€§ ç”¨ä»»åŠ¡é˜Ÿåˆ—çš„æ–¹å¼è§£å†³å¤šä»»åŠ¡å¹¶å‘é—®é¢˜</p></blockquote> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> uid<span class="token operator">=</span>KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">local</span> prokey<span class="token operator">=</span><span class="token string">&quot;computer:huawei:hw2022&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">local</span> userkey<span class="token operator">=</span><span class="token string">&quot;sckill:user&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">local</span> existsUsr<span class="token operator">=</span>redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;sismember&quot;</span><span class="token punctuation">,</span> userkey<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>existsUsr<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span> <span class="token keyword">then</span>
  <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">local</span> kc<span class="token operator">=</span>redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> prokey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>kc<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span> <span class="token keyword">then</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
  redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;decr&quot;</span><span class="token punctuation">,</span> prokey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;sadd&quot;</span><span class="token punctuation">,</span> userkey<span class="token punctuation">,</span> uid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeckillServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SeckillService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">LUA_SCRIPT</span> <span class="token operator">=</span> <span class="token string">&quot;local uid=KEYS[1];\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;local prokey=\&quot;computer:huawei:hw2022\&quot;;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;local userkey=\&quot;sckill:user\&quot;;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;local existsUsr=redis.call(\&quot;sismember\&quot;, userkey, uid);\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;if tonumber(existsUsr)==1 then\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;  return 2;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;end\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;local kc=redis.call(\&quot;get\&quot;, prokey);\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;if tonumber(kc)&lt;=0 then\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;  return 0;\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;else\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;  redis.call(\&quot;decr\&quot;, prokey);\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;  redis.call(\&quot;sadd\&quot;, userkey, uid);\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;end\n&quot;</span> <span class="token operator">+</span>
            <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doSeckillByLua</span><span class="token punctuation">(</span><span class="token class-name">String</span> uId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">JedisPool</span> jedisPool <span class="token operator">=</span> <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token function">getJedisPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> jedisPool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> load <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">scriptLoad</span><span class="token punctuation">(</span><span class="token constant">LUA_SCRIPT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> evalsha <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">evalsha</span><span class="token punctuation">(</span>load<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> uId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>evalsha<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;äº§å“å·²æŠ¢ç©º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uId <span class="token operator">+</span> <span class="token string">&quot;: ç§’æ€æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uId <span class="token operator">+</span> <span class="token string">&quot;: å·²å‚ä¸ç§’æ€æ´»åŠ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç§’æ€å¤±è´¥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">JedisPoolUtil</span><span class="token punctuation">.</span><span class="token function">releaseJedisPool</span><span class="token punctuation">(</span>jedisPool<span class="token punctuation">,</span> jedis<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>ab <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">200</span> <span class="token parameter variable">-p</span> ./postfile <span class="token parameter variable">-T</span> application/x-www-form-urlencoded http://192.168.0.196:8088/sc/kill/lua
</code></pre></div><p><img src="/study/assets/img/16.dbcd9a86.png" alt="image.png"><br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYkAAABUCAYAAAB3Csv4AAAUBUlEQVR4nO2dPW/yvtfHv79b/3fBEtEuzB7ZIiGm5hWYMQNL1S2rV7ZLLB0YnVdAJ1QpW8bMXVqUJa8j9+AE8mAnDqSUXtf5SEcq1Pjh2PHxY85/AHIQBEEQhIb/++kMEARBEPcLGQmCIAjCCBkJgiAIwggZCYIgCMIIGQmCIAjCCBkJgiAIwggZCYIgCMJIj5FgEHGGLMuQSa4PISTirAiTxZCc6X/fkhiCaaM054Z3pXX7eGz0MwQuM2SxQDM3TMRaHZ6TtNfzeGW/JQxcSIhfkdexuZ+yczlOO/8RmFDt/sL8j1n27j6zCGPxnFrFYxGmjw4jwSHjPXwnRZqagkjsfRfYBfC8ALsIcDfbVuef7gJ4nneWIBqcUXCJ/aZMy0OwA9zNHoPrbax4bPQzMF8bF4heBZLGvxLxXNffLgKQ4uujHq5Pz0zE2rLHQ631D/C4cLF4/Olc/Az/ctn/Omz6TJs+yjYei/7ZhlwnXGZ5FouclX9L3gjDchE3v29+pz7HgrXjbsXXLbrf/Hg8nfoZIoXeivg6wzKRx1mWS97+fbee9WGYiO3S/VHR5/3fkPsp+/Xt/PfKOGW36TNt+ij7vrcvLRsxzyQOAbx5e1Rb5fM9wu5QHc4m+Dyi9lk8e3gW1Vg4li4QHcKOmJswPE6BtDF0/vhKgelja3nm++OBlX5OqRbLRcYRO3+B7+hnEY2IEO99YOdhVVOfjZ5neHCA42c9heTzCDgPmJW/GnFpo7pMFkuunbJ3TqvLJYJsD98BHH9/XkbTLMv15qeZlqY++vMjIbg81aeubstlQ16Z6seNcut0UftuQNl7lya4RJZJcF7Nj15/vW0VjXpthOstlynP1Xi4PJeRCcSVJVMus9qIuq/szaVam3JdVHbLPPf3mXZ9VH88dmFsMBqJMAx7OsAEoVhBhNVQmgImST0evoSLCINsxB3Sr58zswcHAOA8zDT/ZRBrF0h3+NOpEwax9eEgxRGz9gNuqefpY+MhepzWPn8AWGz2yOIrjQWX2PvOaQnsFUusp5owrWl1ZTqcvOE1CBAEO0QpkEY7BEGg5PXNWv+1tKJKWr5mCt+7FDnFw+MBwS6C42/x8vmMYJfC8V9QC+b4WD984dXz1P/dzbAlTduy9+nwhIv1UuXHCyLA9bHXZKi7rQKYrvHy8KrSilI4TR3aUKmLwFQX5wzBgQOVHYbHaWWZ1aLs56XaALueZeHRym7Ms2Wf2YtNPGOlpRhvqsVlnmVxLtiQ6Zb9NC0WrEhDLbcMXyoZK54Rp6JFPmIp8zjLir+5Ji8s50LmUsZFOJnzQdPaIp9ZnAuuli4YV0tXuqVELor8xPIUfrBOajq9ZFqtqbcR66j5XW8YJvL41L55Lss6qH2vK/sFaVmW3SoezXPJRNzThr6vThkXuRTcHA8TeVzkjYk4l1IW5ee5bOrZeun4ujbUW3bLPLekVTcX9lG9fa9lGI2MdwSWCcQbF+nuGcI0xGNPWDhDl5qafCFFiq8rYhg3nuvgSxdAiuPhD55Po7yNZpSnRgar1RzzSYAILtamabFBz+EqQJQ68Ddq6WK7XsCBrj5UWvOJh+C9mFlccrLj+FkZ7V821f1OwtUEk9Uvn9Jac0R1pTH5PF524GKEOk1CgZUIzfEknzhiikcGzB6Ar8MX8DAD2COmjXLclK6yX5Ln3j7Tso+y6nstwhj437DgJjjk3ocTBZh05IA9LeAgwus1z2UoMA+Fik/cQTxXofYN0t0zVuW0MFnh+THG3l+CI4ReVSEO0QabhxmgWXQx6znEah4CjIEBmL3ssUHXMleCj88vHFMXzmUF7MfdIMs29e8uOPz2T3OJDsMV5j9lH5mA3Ppwm43qlOcPfKUOHmYMmB7xGX7iYV2sx6dfqC2W3E37GZBnAFZ9plUfZdP32vXPJkYwEgwi3sBNd/A6R2UMTwsHiF4NHd+/i3Yz+QQD4zPMPkKEVvVroeckQcIEti4QBfrNcsYFXtY+XCdFFHiY2CXema/HKYDmyDMK4P1pPELJTw0Vfym/Sodqb83FDoH3duo81YClRI3SHzDDA77whg88YonZDHCOh3p7vZuyD8izdZ/Zh00816d19XITl3v4ToSg76QPe8LCSbHr2p3lEnEcazaDVAU0N5Rm6rhOO91vj2csPqAOLWg2kyujj6f1Buun+iVF4waUjZ4B8BcfjmaznHGJOM6w3yyAVw+Tyfw8yxlSsq8UcNenzW/Gn7AwhE2SpCKDk7qYn7wc1j5Rd/mmIvBzOmzSXy51yi56FQgredbFM10uMT1+IkGCz+MUy+VUq597KrtNnrv7TPs+yqbvte6fOzAaCcY4OFfyOAUwfTx9LhsAEzE2booo+IMPxsBOosnsiw8nfcdbR0750oXjOHCX7Qc3PKi1+lhwMMbARawun2n2N24Rj41+TvFI063sBG/v6pRENT9730H6Xp5gKcNsIQUHYxxCbuE7Kd41yrTRM5jA2nBxb7ac4niFcTiVTDxjV9n/2K+B98Ysol0XEnG2x7a111I8OIuXk465rpF1cEpLmut9SNvoZ4EXKcAN8SRv70gdH9syP8Y67S67vQ7tMLdVO/rLpQZG7lqdnlPtWbZOviWfRzjTKY6VDnY6dWqzbruyl31S2enOTv3U6GW3yLNNn2nTDm3iGdI/92Hezc900jhdoAvT2oXnucz6TxaoExfmcIyfTwBlWZxLw6mbW8Rjo5+L86MJx0QlTCwNJxTs9Kw7ffNtwljOmOY0yICyq3h4LuOKni84TWal5662MeR0k+S1Oos1+bVth31l7y0Xl9YnmXrbvMVpot5y1cqj8tuKp3FpVOVL82z1lN38nDYvpI5Qdos82/aZfTq0ice+f+6VG3QUJCQXH3/+fXJTI0xC8s0y0ukmgtBRmdrOXrBwgPT9sjV3giB+BjISxLfBxBZ7/3zOMY2CxqtDCIK4d/6DmlIQBEEQRAtyOkQQBEEYISNBEARBGCEjQRAEQRghI0EQBEEY6TAShd/k4vah0f9yry9Wu3gIgiCI++O6mcRo/qIJgiCIe6TjnoTmXfHNF0wtlXepuVDvFEmSOfCQYbPkQBhax0MQBEHcJ1fMJEb0F00QBEHcJb1GojQCH1+XuLEaPx6CIAjitlz44qfv8RdNQkJCQnI/MtIR2PvwF00QBEGMyzhGIhSYT+YQ5JeUIAjir4Iu0xEEQRBGrjASA/1FEwRBEL+Oq2YS4/oEJgiCIO6Nq/1JMC6x3bhQrmVSRMEzViHNIwiCIP4GyOkQQRAEYYQ2rgmCIAgjZCQIgiAII2QkCIIgCCNkJAiCIAgjZCQIgiAII2QkCIIgCCNkJAiCIAgjPUai8E+dnX1Ut0KILh/Xld+3JIYY6Jmo35/2beOx0c8QjH7ERazV4TlJez2PV/Z+WmlpKtw2P6UOYk0cXLbL3EyrFSaWg9vfmDAR2/t6Z0LpqNHGWu1C0wZtwhBEH4b3iPNcxlmeZXEex1meSd4OU/iRiAXPGeO5kHGeZXEuWBmm9DnBc8bYWbhshLOQWlos5yI++bCwjmPMeGz0c0G+9Plgdf2Jpv7s9MyKsjbLHgs2/nvomcjjLMtjKXJu0nNZF7KvLlT5sizT+irhUum/LDcXUqVdKVc9jK6t3lYG+V0pdNluY+e6LsvX1XbMYUhIOkX/Dy7PD6S+cRUPbu375ncVx0TNuAc2Vt1vfjyeTv0MkUJvNp1G0WHUO1IbPevDfJeTKF28TT1VddhdFzyXWZZLIfMskzm3qNNm+u0wen3cSsbWu00bJCNBcomYl5sOAby56Hyb6+d7hN2h6uNavRm2+lk8e3gW1Vg4loNfAjiWP+0R/XJb6OeUasdSCQCAv8B3gOi1Jz4mEO99YOdhVVOfjZ5nUC/oraeQqFf5onyXLxcSYoQlKN3bgMOVB+9Po96bYf4ECA71+gF7xBQRDm9fSDHFo0X2muXShNC+xdiG+hJrhlhqlggtltra8cbIMgle+1xJ5wbrY73Leo3lKt13F+mn2ea4VLqohNPFQ3w/RiMRhmFPB5ggFCuI2sv8NJ1wktTj4Uu4iPDbXxTbr58zswf1+kN9h8Qg1i6Q7tDsP1vhtj4cpDhi1n5YLPU8bfSw7HFa+/wBYLHZqzX7K4xF+Ybg+sOfIOlTWhIibLwgkj0t4KRf+Eje8J46WDxZdLiNco0Gl9j7Lo67AJ7nwQt2gOtjX+0oucR+4wKRCqOC7NG5HcAEtr6DKFihrLJEPKs0vAC7G7mG726rFgzRz66in81Ws0fkYr38wqvnwQuidjzETRj3dBN/ge+keH8z9QRFhxgdcLGN4LKxafvD8VgQriaYTCaYrDSlLmYR6fEB29OIiWtHTJ/vEaIImPob7CsjzjY6PYc4RIDjb0+dP+OqY6qGS8QK84mH4P1KYxGuEEQp3M3+NAq81OacZyWWo3/G8dIo11iwx6ky6CJEkiRIQoH5xINXqVu+VAZivlJhQjFHEAHu0lRjxQCgNVBIVBrJh+F349PZVi0YpB9R1Y8D/6WpnxTvfwTCJEESrvC8SwF32dHuie9gPCPBBOKNi3T3DGG0EU9YONf6mxjLn/Z9+OXmSxdAiuPhD55PI6aNZsSkZm6r1RzzSYAILtam5QeDnsNVgCh14Bcd93a9gANdfai0asbiAmsaruaYeAF2UQq4Pjb74SfaymWzcnb68WXoKNzNeWlmv4Gb7mod01ioZSwfWynAGSuMedI7qwxXHR1vMbjaPdstX94zl+pHzxHV1dHk84j0RjMq4sxIRoJD7n04UYC50UIUywbXLjWN5U/7LvxyFx3gTvngSKxHTMWswDCiNus5xGo+wcTz4HkeXo9OzzJXgo/PLxyveTCTEGI1x3ziYZfqRos9sEdMcZ6dJm/v+n2JYmnH20UAIgSW+0WDCVenpY/Nfo99cZz2otGt46vfb1wgejUPrn4TtvqpGvUsw8a1i3s+X40+OyS6GcFIMIjYZuTG8LT4niWA3452M/kEA+N8wFKNhZ6TBAmesHbNm+WMC8g4w36zAF694csPp1HkKVG8vVscEGAcvFJYZfAc+PtyluDDgX5fIkkSJOLQPcsagSRcYT5RyzKeFyByXGwuWbdMdwg8D94uBdz1j97bGBMr/ZRGvSrfMPMjrudqI8HlHr5jMXJjT1g4KXZdu7NcIo5jzT7BQH/a3x7PWHxAHazSbCanXyhXop/WG6xrnaL+lJb6l4WeAfAX3Rp4ceqkahwm8ws8DTKI7R5bm16vYTT4ywab5bl+Zg9qtlPtTHZp175EiD+7FI7/0jO679Bh168aRixJVHp9xk93CggAPpIEiXhWs6ztfZ/eaZ8CbOtwiH7Ufksp35174hq0Z2MZ4znnSsoz/OXn8my3upwV55I3LntpLijpzsRrw2gvDWHQJbhbxGOjH6t4LC64nfRsvLQ4TM/6uxbl71V9Gn9rKe1ytS+49V+ms7vb0T7/r+5VfMdlunpdsJxxkctm3VpcEmzdkzDcfznlt3FZUp8vmYvKc3hJmM5n53RBsiiXRoeD9NPbNtp3Ykh+RPT/ODWWlpwbhTFMq5NqP7Q6YT03gBlXjanMh6kzu0U8Nvq5OD+acExUwsTS0LnZ6dnKkIwgtTybytVVFyZjxkQeN9uh7oJkpZNp1ZdRh31Sdo7nuGLZ1mVfneou05WduDHPFdHeSm/k65Iw1z874+iHjMT9CPm4JgiCIIzQW2AJgiAII2QkCIIgCCNkJAiCIAgjZCQIgiAII2QkCIIgCCNkJAiCIAgjg4wE45e/yfOvg/FR/C4QBEHcM3ZGgvHTe3wetS4R9D54h8FGc3hzE2aPp1dpX5Plfv/VRTgLX9C39F9NEMS/Q8+NO366Vm+8oWv0wTtEftad5KV5bt7sHSrlzVvO6q82qYWzeZXIaL67SUhISGrSHeBWr3D4nUbinO9LDaSNr2Mbv9xj+e4mISEhqUrPclPhJ9n0OmkLH7zl2y+rYWvhyqWqbA/fARx/f44zrr8V02rJpZqO5HofvKP6100gXqNv9Jhl45d7RN/dBEEQFbqNROHwxfQ2ZWsfvNM1Xh5elT/bKIVT9febvOE1CBAEO0QpkEY7BEGg5PXtbJxs/OJyib3vIC3CvGKJddPV8Xf41/340jvCGcCTrBs3giCIe+DKI7C2Pnjf8af097t6hnK8drISCMMQYfimXIl+vRWfQ4QVPwY2fnG5cvOG5zLM6g/eGzm5S/+6jo8FCiO6S+G4G70PCxu/3Df03U0QxN/P/26SSs2hj3L8c/9p3ca/bvL2iuDzAx+h8gOcJHPgIcNmyYGw6ThIzVi6/XLbhCEIgrDjNkZiLNwNsmxT/y66UTzhCvPv8K6YhLB2/BYKzEMBAGDiijAEQRCW/C4jEQXw/jSWtjr9HqoNXTRnE4PjIQiC+Dfp3pNIPnGEA6M74R+gyy/ux1fhUL44rcT4ExYXxDOY2QOcxvKULVzGPRvVNn65B/ruJgiCsKRn4zrEIapuMjdhYIyBsbJzmhWfLznmU3R0ixdwzpVU4gkPEeBuEAsOxtTt7DjbY1s5lnRyKL9Rx2j3a+C9MYuwiWcoajP8gEtWo8LDEU4tPzE2LhAdwkqYZp4vC0MQBHEJ3ZcpSufng/w8n2/6DrrkxXgu40o8jTA2vqBVPCxnDLnpotuY/nVLx++X+Us25Efjc3usMCQkJCQDxSJQ2flc7Dz+p+S629CdwkRh0GJ69QUJCclfK3Yb1+EK8w8G/rJVL/i760VuhtMq1ewFCwdI3/vucVzADJgeA3jPIe15EwTx1/IflLX4a2Aixt53Tp/TKMDzKrxvu0YQBHGn/HVGgiAIghiP/wetxWFGT+oMsAAAAABJRU5ErkJggg==" alt="image.png"></p> <blockquote><p>å¯ä»¥çœ‹åˆ° åœ¨ä½¿ç”¨Luaè„šæœ¬å ç»è¿‡ç§’æ€æœåŠ¡ äº§å“åº“å­˜ä¸º0 ç§’æ€ç”¨æˆ·ä¸º500
æ‚²è§‚é”å®ç°æ–¹å¼</p></blockquote> <h2 id="redisæŒä¹…åŒ–"><a href="#redisæŒä¹…åŒ–" class="header-anchor">#</a> RedisæŒä¹…åŒ–</h2> <blockquote><p>RedisæŒä¹…åŒ–çš„æ–¹å¼æœ‰ä¸¤ç§ RDB AOF</p></blockquote> <h3 id="rdb"><a href="#rdb" class="header-anchor">#</a> RDB</h3> <blockquote><p>RDBæ˜¯å°†æŸä¸€æ—¶åˆ»çš„å†…å­˜å¿«ç…§ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å†™å…¥ç£ç›˜ä¸­ æ¢å¤æ—¶å°†å¿«ç…§å†…å®¹è¯»åˆ°å†…å­˜ä¸­
æœ‰ä¸¤ç§è§¦å‘æ–¹å¼ ä¸€ç§æ˜¯æ‰‹åŠ¨è§¦å‘ ä¸€ç§æ˜¯è‡ªåŠ¨è§¦å‘</p></blockquote> <blockquote><p>æ‰§è¡Œè¿‡ç¨‹: Redisä¸ä¼šç›´æ¥å°†æ•°æ®å†™å…¥dump.rdbæ–‡ä»¶ä¸­ è€Œæ˜¯å…ˆforkä¸€ä¸ªå­è¿›ç¨‹ ç„¶ååˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ Rediså°†æ•°æ®åŒæ­¥åˆ°ä¸´æ—¶æ–‡ä»¶ æœ€ç»ˆä¼šå°†ä¸´æ—¶æ–‡ä»¶è¦†ç›–åˆ°dump.rdbæ–‡ä»¶
ä¼˜åŠ¿: ä¿è¯äº†æŸä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šçš„æ•°æ®é›† é€‚åˆç”¨äºå¤‡ä»½å’Œç¾éš¾æ¢å¤ æ¢å¤å¤§æ•°æ®é›†ç›¸å¯¹AOFæ¥è¯´è¾ƒå¿«
ç¼ºç‚¹: æ²¡åŠæ³•åšåˆ°å®æ—¶æŒä¹…åŒ– é—´éš”ä¸€æ®µæ—¶é—´å¤‡ä»½ä¸€æ¬¡ æ‰€æœ‰æœ€åä¸€æ¬¡æŒä¹…åŒ–æ“ä½œå Redisçªç„¶downæ‰äº† æœ€åä¸€æ¬¡å¿«ç…§ä¹‹åæ‰€æ“ä½œçš„æ•°æ®ä¼šä¸¢å¤±</p></blockquote> <p><img src="/study/assets/img/18.66bd9c75.jpeg" alt="image.jpeg"></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># é…ç½®RDBæ–‡ä»¶</span>
$ dbfilename dump.rdb <span class="token comment"># é»˜è®¤åç§°dump.rdb</span>
$ <span class="token function">dir</span> ./ <span class="token comment"># ç”Ÿæˆæ–‡ä»¶è·¯å¾„</span>
$ stop-writes-on-bgsave-error <span class="token function">yes</span> <span class="token comment"># å½“Redisæ— æ³•å†™å…¥ç£ç›˜æ—¶ ç›´æ¥å…³é—­å†™æ“ä½œ</span>
$ rdbcompression <span class="token function">yes</span> <span class="token comment"># æ˜¯å¦å¯¹å¿«ç…§è¿›è¡Œå‹ç¼©</span>
$ rdbchecksum <span class="token function">yes</span> <span class="token comment"># æ£€æŸ¥æ•°æ®å®Œæ•´æ€§ å‡†ç¡®æ€§</span>
<span class="token comment"># Snapshotting can be completely disabled with a single empty string argument</span>
<span class="token comment"># as in following example:</span>
<span class="token comment">#</span>
<span class="token comment"># save &quot;&quot;</span>
<span class="token comment">#</span>
<span class="token comment"># Unless specified otherwise, by default Redis will save the DB:</span>
<span class="token comment">#   * After 3600 seconds (an hour) if at least 1 change was performed</span>
<span class="token comment">#   * After 300 seconds (5 minutes) if at least 100 changes were performed</span>
<span class="token comment">#   * After 60 seconds if at least 10000 changes were performed</span>
<span class="token comment">#</span>
<span class="token comment"># You can set these explicitly by uncommenting the following line.</span>
<span class="token comment">#</span>
<span class="token comment"># save 3600 1 300 100 60 10000</span>
$ save ç§’ ä¿®æ”¹keyé˜ˆå€¼<span class="token punctuation">(</span>æŒ‡å®šæ—¶é—´å†… keyçš„ä¿®æ”¹æ¬¡æ•°åˆ°è¾¾æŒ‡å®šæ¬¡æ•°æ—¶ è§¦å‘æŒä¹…åŒ–æ“ä½œ<span class="token punctuation">)</span>
<span class="token comment"># save 10 3</span>
<span class="token comment"># 10ç§’ä¹‹å†… æ“ä½œäº†ä¸‰æ¬¡ä»¥ä¸Šçš„key å°±æ‰§è¡ŒæŒä¹…åŒ–æ“ä½œ</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># ä¿®æ”¹é…ç½®</span>
save <span class="token number">10</span> <span class="token number">3</span>
<span class="token comment"># é‡å¯Redis æŒ‡å®šé…ç½®æ–‡ä»¶é‡å¯</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="image.png"><br><img src="data:image/png;base64,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" alt="image.png"></p> <blockquote><p>å¯ä»¥çœ‹åˆ°rdbæ–‡ä»¶å¤§å°å·²ç»å‘ç”Ÿäº†å˜åŒ–</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># å°†rdbæ–‡ä»¶copyä¸€ä»½ å¹¶å°†åŸdump.rdbæ–‡ä»¶åˆ é™¤ å…³é—­redisè¿›ç¨‹ æ¨¡æ‹Ÿdownæœºåœºæ™¯ ä½¿ç”¨rdbæ–‡ä»¶æ¢å¤</span>
<span class="token function">cp</span> dump.rdb cdump.rdb
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> dump.rdb
<span class="token function">mv</span> cdump.rdb dump.rdb
<span class="token comment"># é‡å¯redisä¼šå‘ç°æ•°æ®å·²ç»å›æ¥äº†</span>
systemctl daemon-reload
</code></pre></div><blockquote><p>æ‰‹åŠ¨æŒä¹…åŒ–RDB
å€ŸåŠ©<code>save</code>å’Œ<code>bgsave</code>å‘½ä»¤
<code>save</code>å’Œ<code>bgsave</code>éƒ½ä¼šè°ƒç”¨rdbSaveå‡½æ•°è¿›è¡ŒæŒä¹…åŒ–, ä½†<code>save</code>æ˜¯ç›´æ¥è°ƒç”¨, è€Œ<code>bgsave</code>æ˜¯forkä¸€ä¸ªå­è¿›ç¨‹è°ƒç”¨, å½“ä¿å­˜æˆåŠŸåä¼šå‘ä¸»è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·</p></blockquote> <h3 id="aof"><a href="#aof" class="header-anchor">#</a> AOF</h3> <blockquote><p>AOFä»¥æ—¥å¿—çš„å½¢å¼å°†æ¯ä¸ªå†™æ“ä½œè®°å½•ä¸‹æ¥, åªè¿½åŠ æ–‡ä»¶ä¸ä¼šä¿®æ”¹æ–‡ä»¶, Rediså¯åŠ¨å, ä¼šè¯»å–AOFæ–‡ä»¶å¹¶æ‰§è¡Œè®°å½•çš„å‘½ä»¤</p></blockquote> <h4 id="æŒä¹…åŒ–æµç¨‹"><a href="#æŒä¹…åŒ–æµç¨‹" class="header-anchor">#</a> æŒä¹…åŒ–æµç¨‹</h4> <blockquote><p>å®¢æˆ·ç«¯çš„è¯·æ±‚å†™å‘½ä»¤ä¼šè¢«appendåˆ°AOFç¼“å†²åŒºå†…
AOFç¼“å†²åŒºæ ¹æ®AOFæŒä¹…åŒ–ç­–ç•¥[always, everysec, no]å°†æ“ä½œåŒæ­¥åˆ°ç£ç›˜çš„AOFæ–‡ä»¶ä¸­
å½“AOFæ–‡ä»¶å¤§å°è¶…è¿‡é‡å†™ç­–ç•¥æˆ–æ‰‹åŠ¨é‡å†™æ—¶, ä¼šå¯¹AOFæ–‡ä»¶é‡å†™, å‹ç¼©AOFæ–‡ä»¶å¤§å°
RedisæœåŠ¡é‡å¯æ—¶, ä¼šé‡æ–°åŠ è½½AOFæ–‡ä»¶ä¸­çš„å‘½ä»¤ä»¥è¾¾åˆ°æ¢å¤æ•°æ®çš„ç›®çš„</p></blockquote> <p><img src="/study/assets/img/21.2befefe2.jpeg" alt="image.jpeg"></p> <blockquote><p>AOFé»˜è®¤æ˜¯ä¸å¼€å¯çš„
éœ€è¦åœ¨<code>redis.conf</code>ä¸­é…ç½®
<img src="/study/assets/img/22.fcecefbd.png" alt="é»˜è®¤æ–‡ä»¶åä¸ºappendonly.aof" title="é»˜è®¤æ–‡ä»¶åä¸ºappendonly.aof"></p></blockquote> <h4 id="å¼€å¯aof"><a href="#å¼€å¯aof" class="header-anchor">#</a> å¼€å¯AOF</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å°†appendonlyçš„å€¼æ”¹ä¸ºyeså³å¯</span>
appendonly <span class="token function">yes</span>
<span class="token comment"># AOFæ–‡ä»¶ä¸dumpæ–‡ä»¶åŒä½ç½®</span>
<span class="token comment"># æˆ–åœ¨appenddirnameé…ç½®çš„ç›®å½•ä¸‹</span>
</code></pre></div><blockquote><p>å½“AOFå’ŒRDBåŒæ—¶å¼€å¯æ—¶, ç³»ç»Ÿé»˜è®¤å–AOFæ–‡ä»¶ä¸­çš„æ•°æ®</p></blockquote> <blockquote><p>é…ç½®å®ŒAOFå, é‡å¯ä¸‹Redis
<img src="/study/assets/img/23.779abf50.png" alt="image.png">
è®¾ç½®å‡ ä¸ªkeyåå†æ¬¡æŸ¥çœ‹AOFæ–‡ä»¶å¤§å°
<img src="/study/assets/img/24.ef0c9c78.png" alt="image.png"> <img src="/study/assets/img/25.4daee718.png" alt="åªæœ‰å†™å‘½ä»¤, æ²¡æœ‰è¯»å‘½ä»¤" title="åªæœ‰å†™å‘½ä»¤, æ²¡æœ‰è¯»å‘½ä»¤">
è¿˜åŸæ—¶, é€šè¿‡å¤‡ä»½çš„æ–¹å¼è¿›è¡Œæ•°æ®æ¢å¤</p></blockquote> <h4 id="å¼‚å¸¸ä¿®å¤"><a href="#å¼‚å¸¸ä¿®å¤" class="header-anchor">#</a> å¼‚å¸¸ä¿®å¤</h4> <blockquote><p>å½“AOFæ–‡ä»¶æŸåæ—¶, å¯ä»¥é€šè¿‡<code>redis-check-aof</code>å‘½ä»¤è¿›è¡Œæ–‡ä»¶ä¿®å¤
ç¤ºä¾‹:
æ‰‹åŠ¨ç»™AOFæ–‡ä»¶è¿½åŠ ä¸€äº›å†…å®¹
<img src="/study/assets/img/26.0386f35a.png" alt="image.png">
è¿™æ—¶, å†é‡æ–°å¯åŠ¨Redisæ—¶, å¯åŠ¨å¤±è´¥
<img src="/study/assets/img/27.157619b6.png" alt="å¹¶æ²¡æœ‰å¯åŠ¨æˆåŠŸ" title="å¹¶æ²¡æœ‰å¯åŠ¨æˆåŠŸ">
å› ä¸ºæ˜¯åå°å¯åŠ¨, æ‰€ä»¥æ²¡æœ‰æŠ¥é”™ä¿¡æ¯, å¦‚æœæ˜¯å‰å°å¯åŠ¨çš„è¯, åº”è¯¥ä¼šæç¤ºé”™è¯¯åŸå› 
ä½¿ç”¨<code>redis-check-aof --fix</code>å‘½ä»¤ä¿®å¤AOFæ–‡ä»¶</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>./redis-check-aof <span class="token parameter variable">--fix</span> appendonlydir/appendonly.aof.1.incr.aof
</code></pre></div><p><img src="/study/assets/img/28.ee9f6b82.png" alt="image.png"><br><img src="/study/assets/img/29.9cb501a5.png" alt="image.png"><br><img src="/study/assets/img/30.982414ca.png" alt="é‡æ–°å¯åŠ¨Redis, æˆåŠŸ" title="é‡æ–°å¯åŠ¨Redis, æˆåŠŸ"></p> <h4 id="aofåŒæ­¥é¢‘ç‡"><a href="#aofåŒæ­¥é¢‘ç‡" class="header-anchor">#</a> AOFåŒæ­¥é¢‘ç‡</h4> <p><code>appendfsync</code> [always/everysec/no]</p> <ul><li>always: å§‹ç»ˆåŒæ­¥, Redisçš„æ¯ä¸€æ¬¡å†™æ“ä½œéƒ½ä¼šè®°å½•AOFæ–‡ä»¶, æ€§èƒ½è¾ƒå·®, æ•°æ®å®Œæ•´æ€§å¥½<img src="data:image/png;base64,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" alt="292102E1.png"></li> <li>everysec: æ¯ç§’åŒæ­¥ä¸€æ¬¡, å¦‚æœå®•æœº, æŸä¸€ç§’çš„æ•°æ®å¯èƒ½ä¸¢å¤±ğŸ˜­</li> <li>no: éä¸»åŠ¨åŒæ­¥, ä»€ä¹ˆæ—¶å€™åŒæ­¥ç”±æ“ä½œç³»ç»Ÿå†³å®š</li></ul> <h4 id="é‡å†™æœºåˆ¶"><a href="#é‡å†™æœºåˆ¶" class="header-anchor">#</a> é‡å†™æœºåˆ¶</h4> <blockquote><p>AOFé‡‡ç”¨è¿½åŠ æ–¹å¼, è¿™æ ·æ–‡ä»¶å°±ä¼šè¶Šæ¥è¶Šå¤§, rewriteæ“ä½œå¯ä»¥é¿å…è¿™ç§é—®é¢˜
å½“AOFæ–‡ä»¶å¤§å°è¶…è¿‡è®¾ç½®çš„é˜ˆå€¼, Rediså°±ä¼šå¯åŠ¨AOFæ–‡ä»¶å†…å®¹å‹ç¼©, åªä¿ç•™éƒ¨åˆ†æŒ‡ä»¤
ç›¸å…³æŒ‡ä»¤: <code>bgrewriteaof</code></p></blockquote> <blockquote><p>AOFæ–‡ä»¶æŒç»­å¢é•¿è€Œè¿‡å¤§æ—¶, ä¼šforkä¸€ä¸ªæ–°è¿›ç¨‹å°†æ–‡ä»¶è¿›è¡Œé‡å†™
é‡å†™è™½ç„¶å¯ä»¥èŠ‚çœå¤§é‡ç£ç›˜ç©ºé—´, å‡å°‘æ¢å¤æ—¶é—´, ä½†æ¯æ¬¡é‡å†™æœ‰ä¸€å®šè´Ÿæ‹…, å› æ­¤è®¾å®šRedisæ»¡è¶³ä¸€å®šæ¡ä»¶åæ‰ä¼šè¿›è¡Œé‡å†™
<code>auto-aof-rewrite-percentage 100</code>è®¾ç½®é‡å†™çš„ç™¾åˆ†æ¯”, æ–‡ä»¶è¾¾åˆ°100%æ—¶å¼€å§‹é‡å†™
<code>auto-aof-rewrite-min-size 64mb</code>è®¾ç½®é‡å†™çš„æœ€å°å€¼, å½“æ–‡ä»¶å¤§å°è¾¾åˆ°64MBæ—¶å¼€å§‹é‡å†™
æ¯”å¦‚, AOFä¸Šæ¬¡é‡å†™å®Œæ¯•æ—¶, Redisä¼šè®°å½•æ­¤æ—¶AOFçš„å¤§å°, å³ä¸ºbase_size, å¦‚æœAOFæ–‡ä»¶å½“å‰å¤§å°</p> <blockquote><p>= base_size + base_size * 100%å¹¶ä¸”å½“å‰AOFæ–‡ä»¶å¤§å° &gt;= 64MBæ—¶, Redisä¼šå¯¹AOFè¿›è¡Œé‡å†™</p></blockquote></blockquote> <h4 id="é‡å†™æµç¨‹"><a href="#é‡å†™æµç¨‹" class="header-anchor">#</a> é‡å†™æµç¨‹</h4> <blockquote><p>æ‰§è¡Œ<code>bgrewriteaof</code>å‘½ä»¤å, åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰<code>bgsave</code>æˆ–<code>bgrewriteaof</code>æ­£åœ¨è¿è¡Œ, å¦‚æœæœ‰åˆ™ç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæ¯•ååœ¨æ‰§è¡Œ
ä¸»è¿›ç¨‹forkå­è¿›ç¨‹æ‰§è¡Œé‡å†™æ“ä½œ ä»¥ä¿è¯ä¸»è¿›ç¨‹ä¸ä¼šé˜»å¡
å­è¿›ç¨‹éå†Rediså†…å­˜ä¸­çš„æ•°æ®åˆ°ä¸´æ—¶æ–‡ä»¶, å®¢æˆ·ç«¯çš„å†™æ“ä½œåŒæ—¶å†™å…¥AOFç¼“å†²åŒºå’ŒAOFé‡å†™ç¼“å†²åŒºä¿è¯AOFæ–‡ä»¶çš„å®Œæ•´åŠæ–°AOFæ–‡ä»¶ç”ŸæˆæœŸé—´ æ–°æ•°æ®çš„ä¿®æ”¹ä¸ä¼šä¸¢å¤±
å­è¿›ç¨‹å†™å®Œæ–°çš„AOFæ–‡ä»¶åä¼šå‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·, ç„¶åå°†é‡å†™ç¼“å­˜åŒºä¸­çš„æ•°æ®å†™å…¥åˆ°AOFæ–‡ä»¶ä¸­
æ–°AOFæ–‡ä»¶æ›¿æ¢æ—§AOFæ–‡ä»¶ å®Œæˆé‡å†™</p></blockquote> <h4 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="header-anchor">#</a> ä¼˜åŠ¿</h4> <ul><li>æ•°æ®ä¸¢å¤±å¯èƒ½æ€§å°</li> <li>å¯è¯»æ—¥å¿—æ–‡æœ¬, å¯ä»¥é€šè¿‡æ“ä½œAOFå¤„ç†è¯¯æ“ä½œ</li></ul> <h4 id="åŠ£åŠ¿"><a href="#åŠ£åŠ¿" class="header-anchor">#</a> åŠ£åŠ¿</h4> <ul><li>ç›¸æ¯”RDBæ¥è®², æ›´å ç”¨ç£ç›˜ç©ºé—´</li> <li>æ¢å¤æ•°æ®é€Ÿåº¦è¾ƒæ…¢</li> <li>æ¯æ¬¡è¯»å†™éƒ½åŒæ­¥çš„è¯, æœ‰ä¸€å®šçš„æ€§èƒ½å‹åŠ›</li></ul> <h2 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="header-anchor">#</a> ä¸»ä»å¤åˆ¶</h2> <blockquote><p>ä¸»æœºæ•°æ®æ›´æ–°åæ ¹æ®é…ç½®ç­–ç•¥è‡ªåŠ¨å°†æ•°æ®åŒæ­¥åˆ°ä»æœºä¸­
Masterè´Ÿè´£å†™æ“ä½œ, Slaveè´Ÿè´£è¯»æ“ä½œ</p></blockquote> <p><img src="/study/assets/img/32.728f1902.jpeg" alt="image.jpeg"></p> <blockquote><p>è¯»å†™åˆ†ç¦», ä¸€ä¸»å¤šä»
è§£å†³å®¹ç¾å¿«é€Ÿæ¢å¤
: å½“ä¸€å°ä»æœºå®•æœºå, å¦ä¸€å°ä»æœºå¯ä»¥ç»§ç»­æä¾›æœåŠ¡</p></blockquote> <blockquote><p>å½“å”¯ä¸€çš„ä¸€å°ä¸»æœºå®•æ‰å, è¯¥æ€ä¹ˆåŠå‘¢?
è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°é›†ç¾¤äº†
é›†ç¾¤ä¸­æ¯ä¸€ç»„éƒ½æ˜¯ä¸€ä¸»å¤šä»çš„é…ç½®, å¹¶ä¸”æ¯ç»„ä¹‹é—´éƒ½æœ‰è”ç³»</p></blockquote> <p><img src="/study/assets/img/33.d0c0879f.jpeg" alt="image.jpeg"></p> <hr> <blockquote><p>æ¨¡æ‹Ÿä¸€ä¸»å¤šä»é…ç½®</p></blockquote> <p>:::tips
å¤åˆ¶ä¸‰ä»½redis.conf<br>å‡è®¾æœ‰ä¸€å°ä¸»æœº(6379)å’Œä¸¤å°ä»æœº(6380/6381)
:::</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å…ˆå¤åˆ¶redis.confæ–‡ä»¶, åœ¨æ­¤åŸºç¡€ä¸Šåšcopy, è®°å¾—æŠŠAOFå…³é—­</span>
<span class="token comment"># 6379</span>
include /home/naihe/jiqun/redis.conf
pidfile redis6379.pid
port <span class="token number">6379</span>
dbfilename dump6379.rdb
<span class="token comment"># 6380</span>
include /home/naihe/jiqun/redis.conf
pidfile redis6380.pid
port <span class="token number">6380</span>
dbfilename dump6380.rdb
<span class="token comment"># 6381</span>
include /home/naihe/jiqun/redis.conf
pidfile redis6381.pid
port <span class="token number">6381</span>
dbfilename dump6381.rdb
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># å¯åŠ¨ä¸‰å°RedisæœåŠ¡å™¨</span>
redis-server ./redis6379.conf
redis-server ./redis6380.conf
redis-server ./redis6381.conf
</code></pre></div><p><img src="/study/assets/img/34.c866c8f4.png" alt="image.png"><br><code>info replication</code>æŸ¥çœ‹å½“å‰æœºå™¨ä¸»ä»å¤åˆ¶ä¿¡æ¯<br><img src="/study/assets/img/35.9942c96c.png" alt="6379" title="6379"><br><img src="/study/assets/img/36.58eb59fe.png" alt="6380" title="6380"><br><img src="/study/assets/img/37.1e371408.png" alt="6381" title="6381"></p> <blockquote><p>ä¸‰å°æœåŠ¡å™¨éƒ½æ˜¯ä¸»æœº(Master), æ¥ä¸‹æ¥é…ç½®ä»æœº
<code>slaveof &lt;ip&gt; &lt;port&gt;</code>
æ–°ç‰ˆæœ¬ä¸º<code>replicaof &lt;ip&gt; &lt;port&gt;</code></p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> SLAVEOF <span class="token number">127.0</span>.0.1 <span class="token number">6379</span>
</code></pre></div><p><img src="/study/assets/img/38.a67a3840.png" alt="image.png"></p> <blockquote><p>å¦ä¸€å°81ä¸»æœºåŒæ ·é…ç½®
<code>slaveof 127.0.0.1 6381</code></p></blockquote> <blockquote><p>åˆ‡åˆ°ä¸»æœº6379æ‰§è¡Œ<code>info replication</code></p></blockquote> <p><img src="/study/assets/img/39.11827827.png" alt="image.png"></p> <blockquote><p>å¦‚æœä¸»æœºæ²¡æœ‰é…ç½®å¯†ç  é‚£ä¹ˆä»¥ä¸Šé…ç½®å®Œå…¨æ˜¯okçš„
å¦‚æœé…ç½®äº†å¯†ç  éœ€è¦åœ¨ä»æœºé…ç½®æ–‡ä»¶ä¸­åŠ ä¸Š<code>masterauth [password]</code>é…ç½®æ‰å¯ä»¥</p></blockquote> <blockquote><p>åœ¨ä¸»æœºä¸­è®¾ç½®key çœ‹çœ‹ä¼šä¸ä¼šå°†æ•°æ®åŒæ­¥åˆ°ä»æœºä¸Š
<img src="/study/assets/img/40.a43fe9fe.png" alt="image.png"> <img src="/study/assets/img/41.894499d3.png" alt="image.png"> <img src="/study/assets/img/42.3405d60e.png" alt="image.png"> <img src="data:image/png;base64,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" alt="299313DE.png">æ•°æ®å·²ç»åŒæ­¥äº†</p></blockquote> <blockquote><p>ä¸»æœºä¸Šå¯ä»¥è¿›è¡Œè¯»å†™æ“ä½œ
ä»æœºä¸Šåªèƒ½è¿›è¡Œè¯»æ“ä½œ
<img src="/study/assets/img/44.b3211f5e.png" alt="image.png"></p></blockquote> <h4 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q/A</h4> <blockquote><p>q: ä¸€å°ä»æœºå®•æ‰äº†, é‡å¯åæ•°æ®è¿˜ä¼šåŒæ­¥å—?
a: ä»æœºå®•æœºå, èº«ä»½ä¼šå˜ä¸ºä¸»æœºMaster, é‡æ–°é…ç½®<code>slaveof</code>å, æ•°æ®ä¼šåŒæ­¥</p></blockquote> <blockquote><p>q: ä¸»æœºå®•æ‰å, ä»æœºèº«ä»½ä¼šå‘ç”Ÿå˜åŒ–å—?
a: ä¸ä¼š, å½“ä¸»æœºå®•æœºå, ä»æœºä¾æ—§æ˜¯ä»æœº å¹¶ä¸ä¼šç¯¡ä½, è€Œä¸»æœºé‡å¯åä»æ˜¯ä¸»æœº</p></blockquote> <h4 id="åŸç†"><a href="#åŸç†" class="header-anchor">#</a> åŸç†</h4> <blockquote><p>ä»æœºè¿æ¥åˆ°ä¸»æœºå å‘ä¸»æœºå‘é€syncå‘½ä»¤ ä¸»æœºæ”¶åˆ°åŒæ­¥å‘½ä»¤å å¼€å§‹æ‰§è¡Œ<code>bgsave</code>å‘½ä»¤ç”ŸæˆRDBå¿«ç…§ ç„¶åå‘ä»æœºå‘é€å¿«ç…§æ–‡ä»¶ ä»æœºæ¥æ”¶åå¼€å§‹è¯»å–æ•°æ®
è‹¥MasteråŒæ—¶æ”¶åˆ°å¤šä¸ªSlaveè¿æ¥è¯·æ±‚, åªä¼šè¿›è¡Œä¸€æ¬¡æŒä¹…åŒ–, ç„¶åå°†è¿™ä¸€ä»½æŒä¹…åŒ–çš„æ•°æ®å‘é€ç»™æ¯ä¸€ä¸ªè¿æ¥çš„Slave</p></blockquote> <h2 id="åå®¢ä¸ºä¸»"><a href="#åå®¢ä¸ºä¸»" class="header-anchor">#</a> åå®¢ä¸ºä¸»</h2> <blockquote><p>å½“ä¸»æœºå®•æ‰å, å¯ä»¥è®©æŸä¸€ä¸ªä»æœºå˜ä¸ºä¸»æœº
<code>slaveof no one</code></p></blockquote> <blockquote><p>ç¼ºç‚¹: éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ</p></blockquote> <h2 id="å“¨å…µæ¨¡å¼"><a href="#å“¨å…µæ¨¡å¼" class="header-anchor">#</a> å“¨å…µæ¨¡å¼</h2> <blockquote><p>ç›‘å¬ä¸»æœºçš„çŠ¶æ€ å½“ä¸»æœºå®•æ‰å é€šè¿‡æŠ•ç¥¨é€‰ä¸¾çš„æ–¹å¼å°†ä»æœºå‡ä¸ºä¸»æœº
<a href="https://redis.io/docs/management/sentinel/" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="header-anchor">#</a> ç¤ºä¾‹</h3> <blockquote><p>åˆ›å»º<code>sentinel.conf</code>æ–‡ä»¶, é…ç½®ç›‘æ§çš„ä¸»æœº</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>sentinel monitor naihemaster <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">1</span>
naihemaster: ç»™ä¸»æœºèµ·åˆ«å
<span class="token number">127.0</span>.0.1: æŒ‡å®šä¸»æœºipåŠç«¯å£
<span class="token number">1</span>: éœ€è¦å°±æ— æ³•è®¿é—®ä¸»æœºçš„äº‹å®è¾¾æˆä¸€è‡´çš„å“¨å…µæ•°é‡
</code></pre></div><blockquote><p>å¯åŠ¨å“¨å…µ
<code>redis-sentinel sentinel.conf</code>
or
<code>redis-server sentinel.conf --sentinel</code>
å¯åŠ¨å‰è¦ç»™sentinel.confæ–‡ä»¶èµ‹å†™æƒé™
<img src="/study/assets/img/45.82609281.png" alt="image.png">
å…³é—­ä¸»æœº, ç­‰æ®µæ—¶é—´å çœ‹å…¶æ˜¯å¦ä¼šé€‰æ‹©æŸä¸ªä»æœºå‡ä¸ºä¸»æœº
<img src="/study/assets/img/46.629d084e.png" alt="å·²é€‰æ‹©80ä¸ºä¸»æœº" title="å·²é€‰æ‹©80ä¸ºä¸»æœº"> <img src="/study/assets/img/47.56c9e4bc.png" alt="image.png"> <img src="/study/assets/img/48.d1271dc8.png" alt="image.png"><br>
å¹¶ä¸” å½“åŸä¸»æœº6379é‡å¯å å…¶èº«ä»½è¿˜æ˜¯ä»æœº</p></blockquote> <h3 id="é€‰æ‹©æ¡ä»¶"><a href="#é€‰æ‹©æ¡ä»¶" class="header-anchor">#</a> é€‰æ‹©æ¡ä»¶</h3> <ul><li>ä¼˜å…ˆçº§è¾ƒå‰
<ul><li><code>replica-priority</code>å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</li> <li>ä¸åŒç‰ˆæœ¬, <code>replica-priority</code>å¯¹åº”çš„åç§°ä¸åŒ</li></ul></li> <li>åç§»é‡æœ€å¤§, æŒ‡æ•°æ®ä¿å­˜æœ€å®Œæ•´çš„</li> <li>runidæœ€å°çš„ä»æœº
<ul><li>æ¯å°Redisæœºå™¨å¯åŠ¨åä¼šç”Ÿæˆ40ä½çš„runid</li></ul></li></ul> <blockquote><p>å½“é€‰å‡ºæ–°ä¸»æœºå sentinelä¼šå‘åŸä¸»æœºå‘é€<code>replicaof</code>å‘½ä»¤
å½“åŸä¸»æœºé‡å¯å sentinelä¼šå‘å…¶å‘é€<code>replicaof</code>å‘½ä»¤ è®©å…¶æˆä¸ºæ–°ä¸»æœºçš„ä»æœº</p></blockquote> <hr> <p>å­¦ä¸åŠ¨äº†, å°±è¿™æ ·å§~<br><img src="/study/assets/img/49.51e6bf9f.png" alt="image.png"></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/study/assets/js/app.5ae4c37b.js" defer></script><script src="/study/assets/js/6.75122126.js" defer></script><script src="/study/assets/js/3.a4d08efe.js" defer></script>
  </body>
</html>
