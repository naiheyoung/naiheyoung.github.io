<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | Study Notes</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/study/logo.svg">
    <meta name="description" content="">
    
    <link rel="preload" href="/study/assets/css/0.styles.7d302c8d.css" as="style"><link rel="preload" href="/study/assets/js/app.6d3630f5.js" as="script"><link rel="preload" href="/study/assets/js/2.40365491.js" as="script"><link rel="preload" href="/study/assets/js/1.eec64618.js" as="script"><link rel="preload" href="/study/assets/js/18.ba9636f0.js" as="script"><link rel="prefetch" href="/study/assets/js/10.bfd158aa.js"><link rel="prefetch" href="/study/assets/js/11.ee769b27.js"><link rel="prefetch" href="/study/assets/js/12.c5502306.js"><link rel="prefetch" href="/study/assets/js/13.772ba8b8.js"><link rel="prefetch" href="/study/assets/js/14.eb7a6da8.js"><link rel="prefetch" href="/study/assets/js/15.04415536.js"><link rel="prefetch" href="/study/assets/js/16.b81b8892.js"><link rel="prefetch" href="/study/assets/js/17.faf137c3.js"><link rel="prefetch" href="/study/assets/js/19.2a36490d.js"><link rel="prefetch" href="/study/assets/js/20.cb0fe819.js"><link rel="prefetch" href="/study/assets/js/21.fdfe156a.js"><link rel="prefetch" href="/study/assets/js/22.aaf6fed9.js"><link rel="prefetch" href="/study/assets/js/23.fc8322ab.js"><link rel="prefetch" href="/study/assets/js/24.bfc40fb7.js"><link rel="prefetch" href="/study/assets/js/25.688b920d.js"><link rel="prefetch" href="/study/assets/js/26.9b302a72.js"><link rel="prefetch" href="/study/assets/js/27.0ba8ed8f.js"><link rel="prefetch" href="/study/assets/js/28.48655c0b.js"><link rel="prefetch" href="/study/assets/js/29.6726a437.js"><link rel="prefetch" href="/study/assets/js/3.e37420f1.js"><link rel="prefetch" href="/study/assets/js/30.185b360a.js"><link rel="prefetch" href="/study/assets/js/31.dfbef273.js"><link rel="prefetch" href="/study/assets/js/32.1382e380.js"><link rel="prefetch" href="/study/assets/js/33.5e7d748d.js"><link rel="prefetch" href="/study/assets/js/34.fde6461c.js"><link rel="prefetch" href="/study/assets/js/35.ca6fc384.js"><link rel="prefetch" href="/study/assets/js/36.29151333.js"><link rel="prefetch" href="/study/assets/js/37.6504d9c5.js"><link rel="prefetch" href="/study/assets/js/4.26fde88e.js"><link rel="prefetch" href="/study/assets/js/5.5e14a162.js"><link rel="prefetch" href="/study/assets/js/6.a5c47722.js"><link rel="prefetch" href="/study/assets/js/7.d769642e.js"><link rel="prefetch" href="/study/assets/js/vendors~docsearch.ca4cd80d.js">
    <link rel="stylesheet" href="/study/assets/css/0.styles.7d302c8d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study/" class="home-link router-link-active"><img src="/study/logo.svg" alt="Study Notes" class="logo"> <span class="site-name can-hide">Study Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/study/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/study/spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/study/springboot/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/study/es/" class="nav-link">
  Elasticsearch
</a></div><div class="nav-item"><a href="/study/docker/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><span class="title">More</span> <span class="arrow down"></span></button> <button type="button" aria-label="More" class="mobile-dropdown-title"><span class="title">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/study/mybatisplus/" class="nav-link">
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/study/springcloudgateway/" class="nav-link">
  SpringCloudGateway
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/study/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/study/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/study/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/study/jvm/" class="nav-link">
  Jvm
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/study/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/study/spring/" class="nav-link">
  Spring
</a></div><div class="nav-item"><a href="/study/springboot/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/study/es/" class="nav-link">
  Elasticsearch
</a></div><div class="nav-item"><a href="/study/docker/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Docker
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><span class="title">More</span> <span class="arrow down"></span></button> <button type="button" aria-label="More" class="mobile-dropdown-title"><span class="title">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/mybatis/" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/study/mybatisplus/" class="nav-link">
  MybatisPlus
</a></li><li class="dropdown-item"><!----> <a href="/study/springcloudgateway/" class="nav-link">
  SpringCloudGateway
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/study/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/study/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/study/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/study/jvm/" class="nav-link">
  Jvm
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/docker/#ä»€ä¹ˆæ˜¯docker" class="sidebar-link">ä»€ä¹ˆæ˜¯Docker?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker" class="sidebar-link">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Docker?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#ä¼˜åŠ¿" class="sidebar-link">ä¼˜åŠ¿</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerç›¸å¯¹äºè™šæ‹Ÿæœºçš„ä¼˜åŠ¿" class="sidebar-link">Dockerç›¸å¯¹äºè™šæ‹Ÿæœºçš„ä¼˜åŠ¿</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#åŸºæœ¬ç»„æˆ" class="sidebar-link">åŸºæœ¬ç»„æˆ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerå·¥ä½œåŸç†" class="sidebar-link">Dockerå·¥ä½œåŸç†</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#å®‰è£…-ubuntu" class="sidebar-link">å®‰è£…(Ubuntu)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/docker/#æ›´æ–°è½¯ä»¶åŒ…" class="sidebar-link">æ›´æ–°è½¯ä»¶åŒ…</a></li><li class="sidebar-sub-header"><a href="/study/docker/#å®‰è£…dockerä¾èµ–" class="sidebar-link">å®‰è£…dockerä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/study/docker/#æ·»åŠ å®˜æ–¹gpgå¯†é’¥" class="sidebar-link">æ·»åŠ å®˜æ–¹GPGå¯†é’¥</a></li><li class="sidebar-sub-header"><a href="/study/docker/#æ·»åŠ dockerè½¯ä»¶æº" class="sidebar-link">æ·»åŠ dockerè½¯ä»¶æº</a></li><li class="sidebar-sub-header"><a href="/study/docker/#å®‰è£…docker" class="sidebar-link">å®‰è£…docker</a></li><li class="sidebar-sub-header"><a href="/study/docker/#é…ç½®ç”¨æˆ·ç»„-å¯é€‰" class="sidebar-link">é…ç½®ç”¨æˆ·ç»„(å¯é€‰)</a></li><li class="sidebar-sub-header"><a href="/study/docker/#éªŒè¯dockerå¼•æ“æ˜¯å¦å®‰è£…æˆåŠŸ" class="sidebar-link">éªŒè¯dockerå¼•æ“æ˜¯å¦å®‰è£…æˆåŠŸ</a></li></ul></li><li><a href="/study/docker/#å®‰è£…å®Œæˆåå°±å¸è½½å§-ä¸æ€€å¥½æ„çš„ç¬‘" class="sidebar-link">å®‰è£…å®Œæˆåå°±å¸è½½å§~(ä¸æ€€å¥½æ„çš„ç¬‘)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#é•œåƒåŠ é€Ÿ" class="sidebar-link">é•œåƒåŠ é€Ÿ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#åˆ†æhello-world" class="sidebar-link">åˆ†æhello-world</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerä¸ºä»€ä¹ˆæ¯”è™šæ‹Ÿæœºå¿«" class="sidebar-link">Dockerä¸ºä»€ä¹ˆæ¯”è™šæ‹Ÿæœºå¿«?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerå‘½ä»¤" class="sidebar-link">Dockerå‘½ä»¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/docker/#service-docker-start" class="sidebar-link">service docker start</a></li><li class="sidebar-sub-header"><a href="/study/docker/#service-docker-restart" class="sidebar-link">service docker restart</a></li><li class="sidebar-sub-header"><a href="/study/docker/#service-docker-stop" class="sidebar-link">service docker stop</a></li><li class="sidebar-sub-header"><a href="/study/docker/#service-docker-status" class="sidebar-link">service docker status</a></li><li class="sidebar-sub-header"><a href="/study/docker/#systemctl-enable-docker" class="sidebar-link">systemctl enable docker</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-info" class="sidebar-link">docker info</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-help" class="sidebar-link">docker --help</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-å‘½ä»¤-help" class="sidebar-link">docker [å‘½ä»¤] --help</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-images" class="sidebar-link">docker images</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-search-images" class="sidebar-link">docker search [images]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-pull-images" class="sidebar-link">docker pull [images]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#ç»™é•œåƒè®¾ç½®åˆ«å-æ‰“æ ‡ç­¾" class="sidebar-link">ç»™é•œåƒè®¾ç½®åˆ«å/æ‰“æ ‡ç­¾</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-system-df" class="sidebar-link">docker system df</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-rmi-é•œåƒåç§°-é•œåƒid" class="sidebar-link">docker rmi [é•œåƒåç§°|é•œåƒID]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#ä»€ä¹ˆæ˜¯dockerè™šæ‚¬é•œåƒ" class="sidebar-link">ä»€ä¹ˆæ˜¯dockerè™šæ‚¬é•œåƒ?</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-run-options-image" class="sidebar-link">docker run [options] image</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-ps" class="sidebar-link">docker ps</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-start-å®¹å™¨åç§°-id" class="sidebar-link">docker start [å®¹å™¨åç§°|ID]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-restart" class="sidebar-link">docker restart ...</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-stop" class="sidebar-link">docker stop ...</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-kill" class="sidebar-link">docker kill ...</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-rm-å®¹å™¨id" class="sidebar-link">docker rm [å®¹å™¨ID]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-logs-å®¹å™¨id" class="sidebar-link">docker logs [å®¹å™¨ID]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-top-å®¹å™¨id" class="sidebar-link">docker top [å®¹å™¨ID]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-inspect-container-id-or-name" class="sidebar-link">docker inspect [container_id_or_name]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-exec-it-å®¹å™¨id" class="sidebar-link">docker exec -it [å®¹å™¨ID]</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-attach-å®¹å™¨id" class="sidebar-link">docker attach [å®¹å™¨ID]</a></li></ul></li><li><a href="/study/docker/#é•œåƒå’Œå®¹å™¨çš„å…³ç³»" class="sidebar-link">é•œåƒå’Œå®¹å™¨çš„å…³ç³»?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/docker/#docker-network-ls" class="sidebar-link">docker network ls</a></li><li class="sidebar-sub-header"><a href="/study/docker/#docker-network-create-network-name" class="sidebar-link">docker network create &lt;network_name&gt;</a></li></ul></li><li><a href="/study/docker/#dockerç½‘ç»œ" class="sidebar-link">Dockerç½‘ç»œ?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/docker/#docker-network-connect-network-name-container-id-or-name" class="sidebar-link">docker network connect  &lt;container_id_or_name&gt;</a></li></ul></li><li><a href="/study/docker/#æ–‡ä»¶æ‹·è´" class="sidebar-link">æ–‡ä»¶æ‹·è´</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#å¯¼å‡ºå®¹å™¨" class="sidebar-link">å¯¼å‡ºå®¹å™¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#å¯¼å…¥å®¹å™¨" class="sidebar-link">å¯¼å…¥å®¹å™¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockeré•œåƒå±‚éƒ½æ˜¯åªè¯»çš„-å®¹å™¨å±‚æ˜¯å¯å†™çš„" class="sidebar-link">Dockeré•œåƒå±‚éƒ½æ˜¯åªè¯»çš„, å®¹å™¨å±‚æ˜¯å¯å†™çš„</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#docker-commit" class="sidebar-link">docker commit</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockeræ¨é€é•œåƒåˆ°ç§æœ" class="sidebar-link">dockeræ¨é€é•œåƒåˆ°ç§æœ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerå®¹å™¨æ•°æ®" class="sidebar-link">dockerå®¹å™¨æ•°æ®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/docker/#å¯ä»¥é€šè¿‡roæˆ–rwæŒ‡å®šå®¹å™¨å¯¹æ•°æ®å·çš„æƒé™" class="sidebar-link">å¯ä»¥é€šè¿‡roæˆ–rwæŒ‡å®šå®¹å™¨å¯¹æ•°æ®å·çš„æƒé™</a></li><li class="sidebar-sub-header"><a href="/study/docker/#æ•°æ®å·ä¹‹é—´çš„ç»§æ‰¿å’Œå…±äº«" class="sidebar-link">æ•°æ®å·ä¹‹é—´çš„ç»§æ‰¿å’Œå…±äº«</a></li></ul></li><li><a href="/study/docker/#dockerå®‰è£…mysql" class="sidebar-link">dockerå®‰è£…mysql</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerå®‰è£…redis" class="sidebar-link">dockerå®‰è£…redis</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerå®‰è£…mongodb" class="sidebar-link">dockerå®‰è£…mongodb</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockeréƒ¨ç½²springbootåº”ç”¨" class="sidebar-link">dockeréƒ¨ç½²SpringBootåº”ç”¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/docker/#dockerfile" class="sidebar-link">Dockerfile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/docker/#dockeræ‰§è¡Œdockerfileçš„æµç¨‹" class="sidebar-link">dockeræ‰§è¡ŒDockerfileçš„æµç¨‹</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <h2 id="ä»€ä¹ˆæ˜¯docker"><a href="#ä»€ä¹ˆæ˜¯docker" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯Docker?</h2> <blockquote><p>Dockeræ˜¯ç”±goè¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºåº”ç”¨å®¹å™¨å¼•æ“</p> <p>Dockerå¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…åº”ç”¨ç¨‹åºåˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­, ç„¶åéƒ¨ç½²åˆ°ä»»ä½•ç³»ç»Ÿä¸Š</p></blockquote> <p><strong>Dockeræ˜¯ä¸€ç§å®¹å™¨åŒ–å¹³å°ï¼Œå¯ä»¥å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œä»è€Œå®ç°å¿«é€Ÿéƒ¨ç½²ã€å¯ç§»æ¤æ€§å’Œå¯ä¼¸ç¼©æ€§</strong></p> <h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨docker" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Docker?</h2> <blockquote><p>åœ¨Dockerä¹‹å‰, nä¸ªå¼€å‘äººå‘˜å°±ä¼šæœ‰nä¸ªé…ç½®æ–‡ä»¶, å†éƒ¨ç½²ç¯å¢ƒæ—¶, é€šå¸¸ä¼šæœ‰å¼€å‘è¿™è¾¹å¯ä»¥æ­£å¸¸è·‘é€š, è€Œæµ‹è¯•äººå‘˜å´è¯´ä¸è¡Œ, è¿™å°±ä¼šå‡ºç°ç¯å¢ƒä¸ç»Ÿä¸€é—®é¢˜</p> <p>å½“éœ€è¦éƒ¨ç½²å¤šå°æœåŠ¡å™¨æ—¶, æ¯å°æœåŠ¡å™¨å•ç‹¬é…ç½®ç¯å¢ƒå¤ªç¹ç, è€Œä¸”ä¼šå‡ºç°ç¯å¢ƒä¸åŒ¹é…é—®é¢˜</p> <p>ä½¿ç”¨Dockerä¹‹å, è¿™äº›é—®é¢˜éƒ½è¿åˆƒè€Œè§£</p></blockquote> <img src="/study/assets/img/image-20231110162101499.687af80d.png" alt="image-20231110162101499" style="zoom:80%;"> <p>ä»¥Dockerçš„è§’åº¦æ¥è®², æˆ‘ä»¬æ‰€éƒ¨ç½²çš„å¼€å‘ç¯å¢ƒéƒ½å¯ä»¥æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒæ–‡ä»¶, åœ¨ä½¿ç”¨æ—¶ åªéœ€è¦æ‹‰å–è¿™ä¸ªé•œåƒæ–‡ä»¶å³å¯</p> <h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="header-anchor">#</a> ä¼˜åŠ¿</h2> <ul><li>ä¸€æ¬¡æ„å»º, éšå¤„è¿è¡Œ</li> <li>æ›´å¿«é€Ÿçš„åº”ç”¨äº¤ä»˜å’Œéƒ¨ç½²</li> <li>æ›´ç®€å•çš„ç³»ç»Ÿè¿ç»´</li> <li>æ›´ä¾¿æ·çš„ç³»ç»Ÿå‡çº§å’Œæ‰©å±•</li> <li>ä¸ç”¨æ‹…å¿ƒç¯å¢ƒä¸ç»Ÿä¸€é—®é¢˜</li></ul> <p><strong>dockeråªåšä¸‰ä»¶äº‹, æ‰“åŒ…ã€å‘å¸ƒã€è¿è¡Œ</strong></p> <h2 id="dockerç›¸å¯¹äºè™šæ‹Ÿæœºçš„ä¼˜åŠ¿"><a href="#dockerç›¸å¯¹äºè™šæ‹Ÿæœºçš„ä¼˜åŠ¿" class="header-anchor">#</a> Dockerç›¸å¯¹äºè™šæ‹Ÿæœºçš„ä¼˜åŠ¿</h2> <ul><li>è½»é‡çº§</li> <li>å¯åŠ¨å¿«</li> <li>èµ„æºå ç”¨å°‘</li></ul> <p><strong>dockerå®¹å™¨åœ¨æ“ä½œç³»ç»Ÿå±‚é¢å®ç°è™šæ‹ŸåŒ–, ç›´æ¥å¤ç”¨æœ¬åœ°æ“ä½œç³»ç»Ÿ, è€Œä¼ ç»Ÿè™šæ‹Ÿæœºåˆ™æ˜¯åœ¨ç¡¬ä»¶å±‚é¢è¿›è¡Œè™šæ‹ŸåŒ–, ä¸ä¼ ç»Ÿè™šæ‹Ÿæœºç›¸æ¯”, dockerå¯åŠ¨æ›´å¿«, ä½“ç§¯æ›´å°</strong></p> <h2 id="åŸºæœ¬ç»„æˆ"><a href="#åŸºæœ¬ç»„æˆ" class="header-anchor">#</a> åŸºæœ¬ç»„æˆ</h2> <ul><li><p>é•œåƒã€Œimagesã€</p> <blockquote><p>å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªLinuxçš„æ–‡ä»¶ç³»ç»Ÿ, é‡Œé¢åŒ…å«äº†å¯ä»¥è¿è¡Œåœ¨Linuxå†…æ ¸çš„ç¨‹åºä»¥åŠåº”ç”¨æ•°æ®</p></blockquote> <p>æ‰©å±•ä¸€ä¸‹LinuxçŸ¥è¯†:</p> <blockquote><p>é€šå¸¸Linuxåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†, Linuxå†…æ ¸å’Œç”¨æˆ·ç©ºé—´, è€ŒçœŸæ­£çš„Linuxç³»ç»ŸæŒ‡çš„å…¶å®å°±æ˜¯Linuxå†…æ ¸</p> <p>å¸¸ç”¨çš„Ubuntuã€CentOSç­‰ç‰ˆæœ¬å…¶å®å°±æ˜¯ä¸åŒå‚å•†åœ¨Linuxå†…æ ¸çš„åŸºç¡€ä¸Šæ‰©å±•äº†è‡ªå·±çš„è½¯ä»¶å’Œå·¥å…·æ‰€å½¢æˆçš„ç‰ˆæœ¬</p></blockquote> <p><strong>å› æ­¤æˆ‘ä»¬å¯ä»¥å°†é•œåƒçœ‹ä½œæ˜¯ä¸Šé¢æ‰€è®²çš„ç”¨æˆ·ç©ºé—´, å½“dockeré€šè¿‡é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨æ—¶, å°±æ˜¯å°†é•œåƒå®šä¹‰å¥½çš„ç”¨æˆ·ç©ºé—´ä½œä¸ºç‹¬ç«‹éš”ç¦»çš„è¿›ç¨‹è¿è¡Œåœ¨å®¿ä¸»æœºçš„Linuxå†…æ ¸ä¹‹ä¸Š</strong></p> <ul><li>é•œåƒæ˜¯åˆ†å±‚çš„, ä¸€ä¸ªé•œåƒå¯ä»¥ç”±å¤šä¸ªä¸­é—´å±‚ç»„æˆ, å¤šä¸ªé•œåƒå¯ä»¥å…±äº«åŒä¸€ä¸­é—´å±‚, ä¹Ÿå¯ä»¥é€šè¿‡åœ¨é•œåƒä¸­æ·»åŠ å¤šä¸€å±‚æ¥ç”Ÿæˆä¸€ä¸ªæ–°é•œåƒ</li> <li>é•œåƒæ˜¯<strong>åªè¯»</strong>çš„, é•œåƒåœ¨æ„å»ºå®Œæˆä¹‹åå°±ä¸å¯ä»¥åœ¨è¿›è¡Œä¿®æ”¹, è€Œä¸Šé¢æ‰€è¯´çš„æ·»åŠ ä¸€å±‚æ„å»ºæ–°é•œåƒæ˜¯æŒ‡é€šè¿‡åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„å®¹å™¨, åœ¨å®¹å™¨ä¸Šè¿›è¡Œæ–‡ä»¶çš„æ“ä½œè¡Œä¸º, ä»è€Œå½¢æˆæ–°çš„é•œåƒ, è€Œ<strong>å®¹å™¨æ˜¯å¯ä»¥åŠ¨æ€æ”¹å˜çš„</strong></li></ul></li> <li><p>å®¹å™¨ã€Œcontainerã€</p> <blockquote><p>å®¹å™¨ä¸é•œåƒçš„å…³ç³»å°±å¦‚åŒJavaä¸­å¯¹è±¡ä¸ç±»çš„å…³ç³»</p> <p>å®¹å™¨æ˜¯é€šè¿‡é•œåƒæ¥åˆ›å»ºçš„, æ‰€ä»¥å¿…é¡»è¦æœ‰é•œåƒæ‰å¯ä»¥åˆ›å»ºå®¹å™¨, è€Œç”Ÿæˆçš„å®¹å™¨æ˜¯ç‹¬ç«‹äºå®¿ä¸»æœºçš„éš”ç¦»è¿›ç¨‹, å¹¶ä¸”æœ‰å±äºè‡ªå·±çš„ç½‘ç»œå’Œå‘½åç©ºé—´</p></blockquote> <p><strong>é•œåƒç”±å¤šä¸ªä¸­é—´å±‚ç»„æˆ, ç”Ÿæˆçš„é•œåƒæ˜¯åªè¯»çš„, ä½†å®¹å™¨å´æ˜¯å¯è¯»å†™çš„, è¿™æ˜¯å› ä¸ºå®¹å™¨æ˜¯åœ¨é•œåƒä¸Šé¢æ·»åŠ çš„ä¸€å±‚è¯»å†™å±‚æ¥å®ç°çš„</strong></p> <img src="/study/assets/img/image-20231111134731464.605aad82.png" alt="image-20231111134731464" style="zoom:80%;"></li> <li><p>ä»“åº“ã€Œrepositoryã€</p> <ul><li><p>ç”¨æ¥å­˜å‚¨é•œåƒçš„åœ°æ–¹</p> <blockquote><p>ä»“åº“åˆåˆ†ä¸ºå…¬å…±ä»“åº“å’Œç§æœ‰ä»“åº“</p> <p>å…¬å…±ä»“åº“ä¸€èˆ¬æŒ‡DockerHub, æˆ‘ä»¬å¯ä»¥ä»å…¬å…±ä»“åº“ä¸­è·å–é•œåƒ, å¦‚: nginxã€redisã€mysqlç­‰, ä¹Ÿå¯ä»¥ä¸Šä¼ è‡ªå·±çš„é•œåƒ</p> <p>ç§æœ‰ä»“åº“ä¸€èˆ¬åœ¨å›¢é˜Ÿå†…éƒ¨éœ€è¦å…±äº«é•œåƒæ—¶, ä½†ç›´æ¥å¯¼å‡ºå‘ç»™å…¶ä»–å¼€å‘äººå‘˜åˆæ¯”è¾ƒéº»çƒ¦, å› æ­¤å¯ä»¥æ­å»ºè‡ªå·±çš„ç§æœ‰ä»“åº“, ç”¨äºå­˜å‚¨å’Œå‘å¸ƒè‡ªå·±çš„é•œåƒ</p></blockquote></li> <li><p>https://hub.docker.com/</p></li> <li><p>https://docker.mirrors.ustc.edu.cn/</p></li> <li><p>é˜¿é‡Œäº‘</p></li> <li><p>åä¸ºäº‘</p></li> <li><p>...</p></li></ul></li></ul> <blockquote><p>ä¸‰ä¸ªå…ƒç´ å¯¹åº”ä¸‰ä¸ªå‘½ä»¤, buildã€shipã€run</p></blockquote> <h2 id="dockerå·¥ä½œåŸç†"><a href="#dockerå·¥ä½œåŸç†" class="header-anchor">#</a> Dockerå·¥ä½œåŸç†</h2> <blockquote><p>dockeråœ¨è¿è¡Œå®¹å™¨æ—¶, ä¼šå…ˆå»æœ¬åœ°æŸ¥æ‰¾é•œåƒ, å¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿è¡Œ, å¦åˆ™ä¼šå»è¿œç¨‹ä»“åº“æ‹‰å–é•œåƒ, ç„¶åå†å»è¿è¡Œ</p> <p>è¿™ç‚¹åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¿è¡Œhello-worldæ—¶ä¼šä½“éªŒ</p></blockquote> <img src="/study/assets/img/image-20231115161438827.e1e10778.png" alt="image-20231115161438827" style="zoom:80%;"> <h2 id="å®‰è£…-ubuntu"><a href="#å®‰è£…-ubuntu" class="header-anchor">#</a> å®‰è£…(Ubuntu)</h2> <p><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docker.p2hp.com/" target="_blank" rel="noopener noreferrer">ä¸­æ–‡å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">CentOS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Ubuntu<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>==æ³¨æ„æˆ‘ä»¬å®‰è£…çš„æ˜¯å¼•æ“ã€ŒEngineã€ä¸æ˜¯æ¡Œé¢ç¨‹åºã€ŒDesktopã€==</p> <blockquote><p>å¦‚æœæ‚¨çš„æœºå™¨ä¸Šå®‰è£…è¿‡docker, è¯·å…ˆæŒ‰ç…§å®˜ç½‘æ­¥éª¤åˆ é™¤æ®‹ç•™dockeræ–‡ä»¶</p></blockquote> <h3 id="æ›´æ–°è½¯ä»¶åŒ…"><a href="#æ›´æ–°è½¯ä»¶åŒ…" class="header-anchor">#</a> æ›´æ–°è½¯ä»¶åŒ…</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="å®‰è£…dockerä¾èµ–"><a href="#å®‰è£…dockerä¾èµ–" class="header-anchor">#</a> å®‰è£…dockerä¾èµ–</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> ca-certificates <span class="token function">curl</span> gnupg lsb-release
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="æ·»åŠ å®˜æ–¹gpgå¯†é’¥"><a href="#æ·»åŠ å®˜æ–¹gpgå¯†é’¥" class="header-anchor">#</a> æ·»åŠ å®˜æ–¹GPGå¯†é’¥</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># å®˜æ–¹ä¸‹è½½(å¯èƒ½ä¼šæ¯”è¾ƒæ…¢)</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
<span class="token comment"># é˜¿é‡Œäº‘é•œåƒä¸‹è½½</span>
<span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="æ·»åŠ dockerè½¯ä»¶æº"><a href="#æ·»åŠ dockerè½¯ä»¶æº" class="header-anchor">#</a> æ·»åŠ dockerè½¯ä»¶æº</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> add-apt-repository <span class="token string">&quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release <span class="token parameter variable">-cs</span><span class="token variable">)</span></span> stable&quot;</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="header-anchor">#</a> å®‰è£…docker</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="é…ç½®ç”¨æˆ·ç»„-å¯é€‰"><a href="#é…ç½®ç”¨æˆ·ç»„-å¯é€‰" class="header-anchor">#</a> é…ç½®ç”¨æˆ·ç»„(å¯é€‰)</h3> <blockquote><p>é»˜è®¤æƒ…å†µä¸‹åªæœ‰rootç”¨æˆ·å’Œdockerç»„çš„ç”¨æˆ·æ‰èƒ½ä½¿ç”¨dockerå‘½ä»¤, æˆ‘ä»¬å¯ä»¥å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç»„</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-aG</span> <span class="token function">docker</span> <span class="token environment constant">$USER</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>éœ€è¦é‡æ–°ç™»å½•æ‰èƒ½ç”Ÿæ•ˆ</strong></p> <h3 id="éªŒè¯dockerå¼•æ“æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#éªŒè¯dockerå¼•æ“æ˜¯å¦å®‰è£…æˆåŠŸ" class="header-anchor">#</a> éªŒè¯dockerå¼•æ“æ˜¯å¦å®‰è£…æˆåŠŸ</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># æŸ¥çœ‹dockerç‰ˆæœ¬</span>
<span class="token function">sudo</span> <span class="token function">docker</span> version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="/study/assets/img/image-20231115161023803.fba1fc94.png" alt="image-20231115161023803" style="zoom:80%;"> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># å¯åŠ¨docker</span>
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> start
<span class="token comment"># åœæ­¢docker</span>
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> stop
<span class="token comment"># é‡å¯docker</span>
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> restart
<span class="token comment"># è¿è¡Œhello-world</span>
<span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><img src="/study/assets/img/image-20231115160338325.b9b9ea0d.png" alt="image-20231115160338325" style="zoom:80%;"> <blockquote><p>å¾ˆæ¬£æ…°, åœ¨å®‰è£…æ—¶å¾ˆç»™åŠ›, ä¸€è·¯ç»¿ç¯ğŸ˜</p></blockquote> <h2 id="å®‰è£…å®Œæˆåå°±å¸è½½å§-ä¸æ€€å¥½æ„çš„ç¬‘"><a href="#å®‰è£…å®Œæˆåå°±å¸è½½å§-ä¸æ€€å¥½æ„çš„ç¬‘" class="header-anchor">#</a> å®‰è£…å®Œæˆåå°±å¸è½½å§~(ä¸æ€€å¥½æ„çš„ç¬‘)</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> stop
<span class="token function">sudo</span> <span class="token function">apt-get</span> purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/containerd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="é•œåƒåŠ é€Ÿ"><a href="#é•œåƒåŠ é€Ÿ" class="header-anchor">#</a> é•œåƒåŠ é€Ÿ</h2> <blockquote><p>é•œåƒæºå¯ä»¥æœ‰å¤šä¸ªé€‰æ‹©, æ¯”å¦‚é˜¿é‡Œäº‘ã€åä¸ºäº‘ã€ç½‘æ˜“äº‘ç­‰</p> <p>è¿™é‡Œä»¥**==åä¸ºäº‘==**åšä¾‹</p></blockquote> <p>åœ¨é€‰æ‹©å¥½é•œåƒå‚å®¶å, éœ€è¦å…ˆè¿›è¡Œ<strong>ç™»å½•</strong>, ç„¶ååœ¨<strong>äº§å“åŒºåŸŸ</strong>æ‰¾åˆ°<strong>é•œåƒåŠ é€ŸæœåŠ¡/å®¹å™¨é•œåƒæœåŠ¡</strong></p> <img src="/study/assets/img/image-20231115162431186.10d89e21.png" alt="image-20231115162431186" style="zoom:80%;"> <p>å¤åˆ¶åŠ é€Ÿå™¨åœ°å€å¹¶è¿›è¡Œé…ç½®</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># è¿›å…¥/etc/dockerç›®å½•ä¸‹</span>
<span class="token builtin class-name">cd</span> /etc/docker
<span class="token function">vi</span> /etc/docker/daemon.json
<span class="token comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;registry-mirror-url&quot;</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment"># é‡å¯docker</span>
<span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">docker</span> restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>è¾“å…¥<code>sudo docker info</code>æŸ¥çœ‹é•œåƒä»“åº“æ˜¯å¦é…ç½®æˆåŠŸ</p></blockquote> <img src="/study/assets/img/image-20231115163918931.694fa8f0.png" alt="image-20231115163918931" style="zoom:80%;"> <p><strong>å¦‚æœé…ç½®å¤±è´¥, æ£€æŸ¥å…¶ä»–ç›®å½•(/etc/sysconfig/dockerã€/etc/default/docker)ä¸­æ˜¯å¦é…ç½®äº†<code>registry-mirros</code>å‚æ•°</strong></p> <h2 id="åˆ†æhello-world"><a href="#åˆ†æhello-world" class="header-anchor">#</a> åˆ†æhello-world</h2> <blockquote><p><code>run hello-world</code>åšäº†ä»€ä¹ˆäº‹</p></blockquote> <blockquote><p>é¦–å…ˆdockerä¼šåœ¨æœ¬åœ°æŸ¥æ‰¾hello-worldé•œåƒ, å¦‚æœæœ¬åœ°å­˜åœ¨åˆ™ç›´æ¥ä»¥è¯¥é•œåƒä¸ºæ¨¡æ¿ç”Ÿäº§å®¹å™¨å®ä¾‹å¹¶è¿è¡Œ</p> <p>ä¸å­˜åœ¨åˆ™ä¼šå»é•œåƒä»“åº“ä¸­å»æŸ¥æ‰¾hello-world, å¦‚æœèƒ½æ‰¾åˆ°, å°†hello-worldæ‹‰å–åˆ°æœ¬åœ°å¹¶ç”Ÿäº§å®¹å™¨å®ä¾‹è¿è¡Œ</p> <p>å¦åˆ™è¿”å›å¤±è´¥é”™è¯¯, æ‰¾ä¸åˆ°hello-world</p></blockquote> <img src="/study/assets/img/image-20231115165537935.4e4b57b6.png" alt="image-20231115165537935" style="zoom:80%;"> <h2 id="dockerä¸ºä»€ä¹ˆæ¯”è™šæ‹Ÿæœºå¿«"><a href="#dockerä¸ºä»€ä¹ˆæ¯”è™šæ‹Ÿæœºå¿«" class="header-anchor">#</a> Dockerä¸ºä»€ä¹ˆæ¯”è™šæ‹Ÿæœºå¿«?</h2> <ul><li><p>dockeræœ‰æ›´å°‘çš„æŠ½è±¡å±‚</p> <p>è™šæ‹ŸæœºåŠ è½½çš„<code>iso</code>æ–‡ä»¶åŒ…å«äº†è½¯ä»¶ã€ç¡¬ä»¶ã€é©±åŠ¨ç­‰ç­‰, ä¸ç®¡ç”¨ä¸ç”¨çš„åˆ°, éƒ½ä¼šå»è¿›è¡ŒåŠ è½½, è€Œdockerä¸ä¼š, dockerå®¹å™¨ä¸Šçš„ç¨‹åºç›´æ¥ä½¿ç”¨å®é™…ç‰©ç†æœºçš„ç¡¬ä»¶èµ„æº, å› æ­¤åœ¨CPUä»¥åŠå†…å­˜åˆ©ç”¨ç‡ä¸Šæœ‰æ˜æ˜¾çš„ä¼˜åŠ¿</p></li> <li><p>dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸, ä¸éœ€è¦é‡æ–°åŠ è½½æ“ä½œç³»ç»ŸOSå†…æ ¸</p> <p>å½“æ–°å»ºä¸€ä¸ªå®¹å™¨æ—¶, dockerä¸éœ€è¦åƒè™šæ‹Ÿæœºä¸€æ ·é‡æ–°åŠ è½½ä¸€ä¸ªæ“ä½œç³»ç»Ÿå†…æ ¸, è¿›è€Œé¿å…äº†å¼•å¯¼ã€åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸çš„æ—¶é—´</p></li></ul> <h2 id="dockerå‘½ä»¤"><a href="#dockerå‘½ä»¤" class="header-anchor">#</a> Dockerå‘½ä»¤</h2> <h3 id="service-docker-start"><a href="#service-docker-start" class="header-anchor">#</a> <code>service docker start</code></h3> <blockquote><p>å¯åŠ¨docker</p></blockquote> <h3 id="service-docker-restart"><a href="#service-docker-restart" class="header-anchor">#</a> <code>service docker restart</code></h3> <blockquote><p>é‡å¯docker</p></blockquote> <h3 id="service-docker-stop"><a href="#service-docker-stop" class="header-anchor">#</a> <code>service docker stop</code></h3> <blockquote><p>åœæ­¢docker</p></blockquote> <h3 id="service-docker-status"><a href="#service-docker-status" class="header-anchor">#</a> <code>service docker status</code></h3> <blockquote><p>æŸ¥çœ‹dockerè¿è¡ŒçŠ¶æ€</p></blockquote> <h3 id="systemctl-enable-docker"><a href="#systemctl-enable-docker" class="header-anchor">#</a> <code>systemctl enable docker</code></h3> <blockquote><p>è®¾ç½®å¼€æœºè‡ªå¯</p></blockquote> <h3 id="docker-info"><a href="#docker-info" class="header-anchor">#</a> <code>docker info</code></h3> <blockquote><p>æŸ¥çœ‹dockerä¿¡æ¯</p></blockquote> <h3 id="docker-help"><a href="#docker-help" class="header-anchor">#</a> <code>docker --help</code></h3> <blockquote><p>æŸ¥çœ‹dockerå¸®åŠ©æ–‡æ¡£</p></blockquote> <h3 id="docker-å‘½ä»¤-help"><a href="#docker-å‘½ä»¤-help" class="header-anchor">#</a> <code>docker [å‘½ä»¤] --help</code></h3> <blockquote><p>æŸ¥çœ‹ç›¸å…³å‘½ä»¤å¸®åŠ©æ–‡æ¡£</p></blockquote> <h3 id="docker-images"><a href="#docker-images" class="header-anchor">#</a> <code>docker images</code></h3> <blockquote><p>æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰é•œåƒ</p> <p><code>docker image ls</code></p></blockquote> <ul><li><code>-a</code>æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰é•œåƒ</li> <li><code>-q</code>åªæŸ¥çœ‹é•œåƒID</li></ul> <h3 id="docker-search-images"><a href="#docker-search-images" class="header-anchor">#</a> <code>docker search [images]</code></h3> <blockquote><p>æŸ¥è¯¢æŸä¸ªé•œåƒ</p></blockquote> <img src="/study/assets/img/image-20231118142340774.91efecaa.png" alt="image-20231118142340774" style="zoom:80%;"> <p><strong>OFFICIALçš„å€¼ä¸º<code>OK</code>è¡¨ç¤ºè¯¥é•œåƒä¸ºå®˜æ–¹è®¤è¯</strong></p> <ul><li><code>--limit &lt;num&gt;</code>åªæ˜¾ç¤º&lt;num&gt;ä¸ªé•œåƒ</li></ul> <h3 id="docker-pull-images"><a href="#docker-pull-images" class="header-anchor">#</a> <code>docker pull [images]</code></h3> <blockquote><p>æ‹‰å–æŸä¸ªé•œåƒ</p></blockquote> <ul><li><code>docker pull [images]:TAG</code>æŒ‡å®šé•œåƒçš„ç‰ˆæœ¬, ä¸åŠ <code>:TAG</code>é»˜è®¤ä¸ºæœ€æ–°ç‰ˆ, ç­‰ä»·äº<code>docker pull [images]:latest</code></li></ul> <img src="/study/assets/img/image-20231118143715975.0917c07d.png" alt="image-20231118143715975" style="zoom:80%;"> <h3 id="ç»™é•œåƒè®¾ç½®åˆ«å-æ‰“æ ‡ç­¾"><a href="#ç»™é•œåƒè®¾ç½®åˆ«å-æ‰“æ ‡ç­¾" class="header-anchor">#</a> ç»™é•œåƒè®¾ç½®åˆ«å/æ‰“æ ‡ç­¾</h3> <blockquote><p>dockerä¸èƒ½ç›´æ¥ç»™é•œåƒè®¾ç½®åˆ«å, ä½†å¯ä»¥é€šè¿‡è®¾ç½®æ ‡ç­¾æ¥è¾¾åˆ°è®¾ç½®åˆ«åçš„ç›®çš„</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> tag <span class="token operator">&lt;</span>image_id<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>repository<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span>
<span class="token comment"># image_id:    è¦æ‰“æ ‡ç­¾çš„é•œåƒ</span>
<span class="token comment"># repository:  ä»“åº“åç§°&lt;è¿™ä¸ªç©æ„é€šå¸¸ä¸ç”¨æŒ‡å®š&gt;</span>
<span class="token comment"># tag: 		   åˆ«å</span>

<span class="token comment"># example</span>
<span class="token function">docker</span> tag 967ca3be8ed4 mynginx
<span class="token comment"># ç„¶åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªåå­—åˆ›å»ºå®¹å™¨äº†</span>
<span class="token function">docker</span> run <span class="token punctuation">..</span>. mynginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><img src="/study/assets/img/image-20240423163634328.e008e5dc.png" alt="image-20240423163634328" style="zoom:80%;"> <p>æ‰§è¡Œ<code>docker images</code>ä¼šå‘ç°å¤šäº†ä¸€ä¸ªé•œåƒ</p> <p>é‚£ä¹ˆæ˜¯ä¸æ˜¯å¯ä»¥è®¤ä¸ºæ‰§è¡Œ<code>docker tag</code>å‘½ä»¤å, ä¼šå¤åˆ¶å·²æœ‰çš„é•œåƒå–ä¸ªåˆ«åæˆ–è€…è½¯é“¾æ¥ä¹‹ç±»çš„???</p> <p>==æ‰§è¡Œ<code>tag</code>å‘½ä»¤æ²¡æœ‰å¤åˆ¶ä¹Ÿæ²¡æœ‰åˆ›å»ºé¢å¤–çš„æ–‡ä»¶, è€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ ‡ç­¾æ˜ å°„, å¤šä¸ªæ ‡ç­¾å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªé•œåƒ, å› æ­¤, <code>docker tag</code>å‘½ä»¤åˆ›å»ºçš„æ ‡ç­¾ä¸ä¼šå¯¼è‡´é¢å¤–çš„ç©ºé—´æ¶ˆè€—==</p> <img src="/study/assets/img/image-20240423164301885.e21c380f.png" alt="image-20240423164301885" style="zoom:80%;"> <p>å®ƒä»¬ä¸¤ä¸ªçš„é•œåƒIDéƒ½æ˜¯ä¸€æ ·çš„, æ‰€ä»¥åªæ˜¯æŒ‡å‘, <s>æœ‰ç‚¹è½¯é“¾æ¥çš„æ„æ€</s></p> <p>åˆ é™¤æºé•œåƒæ—¶, ä¼šæç¤ºæœ‰å¼•ç”¨æ— æ³•åˆ é™¤, å¿…é¡»å¼ºåˆ¶åˆ é™¤</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Error response from daemon: conflict: unable to delete 7614ae9453d1 <span class="token punctuation">(</span>must be forced<span class="token punctuation">)</span> - image is referenced <span class="token keyword">in</span> multiple repositories
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å…ˆåˆ é™¤tagåˆ«åé•œåƒ, ç„¶åå†åˆ é™¤æºé•œåƒ</p> <h3 id="docker-system-df"><a href="#docker-system-df" class="header-anchor">#</a> <code>docker system df</code></h3> <blockquote><p>æŸ¥çœ‹é•œåƒå®¹å™¨æ‰€å ç©ºé—´</p></blockquote> <img src="/study/assets/img/image-20231118144403185.4c9a08d6.png" alt="image-20231118144403185" style="zoom:80%;"> <h3 id="docker-rmi-é•œåƒåç§°-é•œåƒid"><a href="#docker-rmi-é•œåƒåç§°-é•œåƒid" class="header-anchor">#</a> <code>docker rmi [é•œåƒåç§°|é•œåƒID]</code></h3> <blockquote><p>åˆ é™¤æŒ‡å®šé•œåƒ</p> <p>åœ¨åˆ é™¤å‰éœ€è¦å…ˆåœæ­¢å¼•ç”¨å®¹å™¨</p></blockquote> <ul><li><code>-f</code>å¼ºåˆ¶åˆ é™¤</li> <li><code>docker rmi &lt;image&gt; &lt;image&gt;</code>ä¸€æ¬¡åˆ é™¤å¤šä¸ªé•œåƒ, é•œåƒåæˆ–é•œåƒIDç”¨<strong>ç©ºæ ¼</strong>éš”å¼€</li> <li><code>docker rmi $(docker images -qa)</code>åˆ é™¤å…¨éƒ¨é•œåƒ, dockerå‘½ä»¤æ˜¯æ”¯æŒå‚æ•°ç»­ä¼ çš„, ä¸€èˆ¬ä¼šåŠ <code>-f</code>ä¸€èµ·ä½¿ç”¨</li></ul> <h3 id="ä»€ä¹ˆæ˜¯dockerè™šæ‚¬é•œåƒ"><a href="#ä»€ä¹ˆæ˜¯dockerè™šæ‚¬é•œåƒ" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯dockerè™šæ‚¬é•œåƒ?</h3> <blockquote><p>è™šæ‚¬é•œåƒæ˜¯æŒ‡dockeré•œåƒçš„ä»“åº“åã€é•œåƒåã€æ ‡ç­¾éƒ½ä¸º&lt;none&gt;çš„é•œåƒ</p></blockquote> <p>æŒ‡é‚£äº›ä¸åœ¨ä¸ä»»ä½•å®¹å™¨ç›¸å…³è”çš„é•œåƒ, è¿™äº›é•œåƒçš„äº§ç”Ÿå¯èƒ½æ˜¯å› ä¸ºæ„å»ºçš„ç‰ˆæœ¬æˆ–é•œåƒåˆ é™¤ä¸å½»åº•æ‰€ç•™ä¸‹çš„</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># å¯ä»¥é€šè¿‡æ­¤å‘½ä»¤æŸ¥çœ‹è™šæ‚¬é•œåƒ</span>
<span class="token function">docker</span> image <span class="token function">ls</span> <span class="token parameter variable">-f</span> <span class="token assign-left variable">dangling</span><span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¯ä»¥ä½¿ç”¨<code>docker image prune</code>æ¸…ç†æ®‹ç•™é•œåƒ</p> <p>==<strong>å¯¹äºå®¹å™¨, æ­¤å‘½ä»¤ä¼šå°†å·²åœæ­¢çš„å®¹å™¨åˆ é™¤, å› æ­¤ä¸ºäº†é˜²æ­¢æ•°æ®çš„ä¸¢å¤±, å³æ—¶åšå¥½å¤‡ä»½</strong>==</p> <h3 id="docker-run-options-image"><a href="#docker-run-options-image" class="header-anchor">#</a> <code>docker run [options] image</code></h3> <blockquote><p>åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªé•œåƒ</p></blockquote> <p>è¿™ä¸ªå‘½ä»¤åœ¨è¿è¡Œæ—¶ä¼šå…ˆå»æœ¬åœ°æŸ¥æ‰¾, æ‰¾ä¸åˆ°å†å»ä»“åº“æ‹‰å–</p> <ul><li><p><code>options: --name</code>ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªæ–°åç§°</p></li> <li><p><code>options: -d</code>å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨, ä¹Ÿæ˜¯åå°å¯åŠ¨, å¯åŠ¨æˆåŠŸä¼šè¿”å›å®¹å™¨ID</p></li> <li><p><code>options: -i</code>ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨</p></li> <li><p><code>options: -t</code>ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯, é€šå¸¸&lt;i&gt;å’Œ&lt;t&gt;ä¸€èµ·ä½¿ç”¨</p></li> <li><p><code>options: -P</code>éšæœºç«¯å£æ˜ å°„</p></li> <li><p><code>options: -p</code>æŒ‡å®šç«¯å£æ˜ å°„</p></li> <li><p><code>options: --rm</code>å®¹å™¨åœæ­¢å, è‡ªåŠ¨åˆ é™¤</p> <table><thead><tr><th style="text-align:left;">å‚æ•°</th> <th style="text-align:left;">è¯´æ˜</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>-p hostPort:containerPort</code></td> <td style="text-align:left;">ç«¯å£æ˜ å°„ -p 8080:80</td></tr></tbody></table></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># example</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> mynginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 nginx
<span class="token comment"># example</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">--rm</span> nginx
<span class="token comment"># è¿è¡Œnginxå®¹å™¨ä¸”æ˜ å°„ç«¯å£80 å½“å®¹å™¨åœæ­¢å, è‡ªåŠ¨åˆ é™¤å®¹å™¨å®ä¾‹</span>
<span class="token comment"># è¿˜æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹, å¦‚æœå®¹å™¨ä¸æŒ‡å®šç‰ˆæœ¬åˆ™é»˜è®¤ä¼šæ‰¾latestç‰ˆæœ¬, è€Œä½ åˆæ²¡æœ‰å®‰è£…latestç‰ˆ, æ‰€ä»¥æå¤§æ¦‚ç‡ä¼šUnable to find image 'nginx:latest' locallyé”™è¯¯!!!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><img src="/study/assets/img/image-20240423150640835.48175b1e.png" alt="image-20240423150640835" style="zoom:80%;"> <h3 id="docker-ps"><a href="#docker-ps" class="header-anchor">#</a> <code>docker ps</code></h3> <blockquote><p>æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨</p> <p><strong>-a</strong> æŸ¥çœ‹æ‰€æœ‰å®¹å™¨åŒ…å«å·²åœæ­¢å®¹å™¨</p></blockquote> <h3 id="docker-start-å®¹å™¨åç§°-id"><a href="#docker-start-å®¹å™¨åç§°-id" class="header-anchor">#</a> <code>docker start [å®¹å™¨åç§°|ID]</code></h3> <blockquote><p>å¯åŠ¨å®¹å™¨</p></blockquote> <h3 id="docker-restart"><a href="#docker-restart" class="header-anchor">#</a> <code>docker restart ...</code></h3> <blockquote><p>é‡å¯å®¹å™¨</p></blockquote> <h3 id="docker-stop"><a href="#docker-stop" class="header-anchor">#</a> <code>docker stop ...</code></h3> <blockquote><p>åœæ­¢å®¹å™¨</p></blockquote> <h3 id="docker-kill"><a href="#docker-kill" class="header-anchor">#</a> <code>docker kill ...</code></h3> <blockquote><p>æ€æ­»å®¹å™¨|å¼ºåˆ¶åœæ­¢å®¹å™¨</p></blockquote> <h3 id="docker-rm-å®¹å™¨id"><a href="#docker-rm-å®¹å™¨id" class="header-anchor">#</a> <code>docker rm [å®¹å™¨ID]</code></h3> <ul><li><p><code>docker rm -f $(docker ps -qa)</code></p></li> <li><p><code>docker ps -qa | xargs docker rm</code>åŒä¸Šåˆ é™¤å¤šä¸ªå®¹å™¨</p> <p>xargs: å°†ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°</p> <p>-f: å¼ºåˆ¶åˆ é™¤</p></li></ul> <h3 id="docker-logs-å®¹å™¨id"><a href="#docker-logs-å®¹å™¨id" class="header-anchor">#</a> <code>docker logs [å®¹å™¨ID]</code></h3> <blockquote><p>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</p></blockquote> <h3 id="docker-top-å®¹å™¨id"><a href="#docker-top-å®¹å™¨id" class="header-anchor">#</a> <code>docker top [å®¹å™¨ID]</code></h3> <blockquote><p>æŸ¥çœ‹å®¹å™¨å®ä¾‹ä¿¡æ¯</p></blockquote> <h3 id="docker-inspect-container-id-or-name"><a href="#docker-inspect-container-id-or-name" class="header-anchor">#</a> <code>docker inspect [container_id_or_name]</code></h3> <blockquote><p>æŸ¥çœ‹å®¹å™¨å®ä¾‹è¯¦ç»†ä¿¡æ¯</p></blockquote> <img src="/study/assets/img/image-20231118185524246.01cfa2d5.png" alt="image-20231118185524246" style="zoom:80%;"> <h3 id="docker-exec-it-å®¹å™¨id"><a href="#docker-exec-it-å®¹å™¨id" class="header-anchor">#</a> <code>docker exec -it [å®¹å™¨ID]</code></h3> <blockquote><p>è¿›å…¥æŒ‡å®šå®¹å™¨</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> container <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>arg<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token comment"># options:   å¯é€‰å‘½ä»¤å‚æ•°</span>
<span class="token comment"># container: å®¹å™¨åç§°æˆ–ID</span>
<span class="token comment"># command:   è¦åœ¨å®¹å™¨ä¸­æ‰§è¡Œçš„æŒ‡ä»¤</span>
<span class="token comment"># arg:		 commandæ‰€é™„å¸¦çš„æŒ‡ä»¤å‚æ•°</span>

<span class="token comment"># è¿™ä¸ªå‘½ä»¤é€šå¸¸è¿™ä¹ˆä½¿ç”¨</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> container /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>docker exec</code>éœ€è¦è‡³å°‘ä¸¤ä¸ªå‚æ•°æ‰å¯ä»¥æ‰§è¡Œ</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> nginx	<span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;docker exec&quot;</span> requires at least <span class="token number">2</span> arguments.
<span class="token comment"># -it ä¸ç®—å‚æ•°, æ‰€ä»¥éœ€è¦æŒ‡å®šbashè·¯å¾„   docker exec -it nginx /bin/bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="docker-attach-å®¹å™¨id"><a href="#docker-attach-å®¹å™¨id" class="header-anchor">#</a> <code>docker attach [å®¹å™¨ID]</code></h3> <blockquote><p>åŒä¸Š</p></blockquote> <p><strong>ä¸åŒçš„æ˜¯: attachè¿›å…¥å®¹å™¨ä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹, æ‰§è¡Œ<code>exit</code>å‘½ä»¤åä¼šåœæ­¢å®¹å™¨, è€Œä½¿ç”¨execè¿›å…¥å®¹å™¨ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹, æ‰§è¡Œ<code>exit</code>å‘½ä»¤åå®¹å™¨ä¸ä¼šåœæ­¢</strong></p> <p>==è¿›å…¥å®¹å™¨å, å¯ä»¥ä½¿ç”¨<code>ctrl</code>+<code>p</code>+<code>q</code>é€€å‡º==</p> <h2 id="é•œåƒå’Œå®¹å™¨çš„å…³ç³»"><a href="#é•œåƒå’Œå®¹å™¨çš„å…³ç³»" class="header-anchor">#</a> é•œåƒå’Œå®¹å™¨çš„å…³ç³»?</h2> <blockquote><p>å®¹å™¨æ˜¯é•œåƒçš„å®ä¾‹, æ˜¯åŸºäºé•œåƒè€Œåˆ›å»ºçš„å®ä¾‹</p></blockquote> <p>ä»¥Javaè§’åº¦æ¥è®², é•œåƒå°±æ˜¯ç±»Class, è€Œå®¹å™¨å°±æ˜¯ç±»çš„å¯¹è±¡å®ä¾‹</p> <p>é•œåƒ: ä¸€ä¸ªåªè¯»çš„æ–‡ä»¶ç³»ç»Ÿå¿«ç…§, åŒ…å«è¿è¡Œå®¹å™¨æ‰€éœ€è¦çš„æ‰€æœ‰å†…å®¹, æ˜¯å®¹å™¨çš„åŸºç¡€, å¯ä»¥çœ‹åšæ˜¯å®¹å™¨çš„è“å›¾æˆ–æ¨¡æ¿</p> <p>å®¹å™¨: åŸºäºé•œåƒè€Œåˆ›å»ºçš„å®ä¾‹, å¯åŠ¨å®¹å™¨æ—¶, Dockerä¼šåŸºäºæŒ‡å®šçš„é•œåƒåˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å®ä¾‹å¹¶åœ¨å…¶ä¸Šè¿è¡ŒæŒ‡å®šçš„å‘½ä»¤, å®¹å™¨å¯ä»¥è¢«å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ç­‰æ“ä½œ, å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒ, æ‹¥æœ‰è‡ªå·±çš„ä¸€å¥—ä¸œè¥¿, æ¯”å¦‚: æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œç¯å¢ƒã€è¿›ç¨‹ç©ºé—´ç­‰.</p> <h3 id="docker-network-ls"><a href="#docker-network-ls" class="header-anchor">#</a> <code>docker network ls</code></h3> <blockquote><p>åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ</p></blockquote> <h3 id="docker-network-create-network-name"><a href="#docker-network-create-network-name" class="header-anchor">#</a> <code>docker network create &lt;network_name&gt;</code></h3> <blockquote><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œ</p></blockquote> <h2 id="dockerç½‘ç»œ"><a href="#dockerç½‘ç»œ" class="header-anchor">#</a> Dockerç½‘ç»œ?</h2> <blockquote><p>ä¸€ä¸ªè™šæ‹Ÿçš„ç½‘ç»œ, å¯ä»¥è®©å¤šä¸ªdockerå®¹å™¨ç›¸äº’é€šä¿¡äº¤äº’</p></blockquote> <p>ä½¿ç”¨dockerç½‘ç»œå¯ä»¥å®ç°ä»¥ä¸‹ç›®çš„</p> <ul><li><p>éš”ç¦»å®¹å™¨</p> <p>æ¯ä¸€ä¸ªdockerç½‘ç»œéƒ½ä¸€ä¸ªç‹¬ç«‹éš”ç¦»çš„ç½‘ç»œç¯å¢ƒ, ä¸åŒç½‘ç»œä¹‹é—´æ— æ³•ç›´æ¥é€šä¿¡, é™¤éè¿›è¡Œç½‘ç»œè¿æ¥</p></li> <li><p>å®¹å™¨é€šä¿¡</p> <p>å°†å®¹å™¨è¿æ¥åˆ°åŒä¸€ä¸ªç½‘ç»œä¸‹, å¯ä»¥ä½¿å®¹å™¨é—´ç›¸äº’é€šä¿¡, è€Œä¸éœ€è¦å°†ç«¯å£æš´éœ²åˆ°ä¸»æœºä¸Š</p></li> <li><p>è·¨ä¸»æœºé€šä¿¡</p></li></ul> <h3 id="docker-network-connect-network-name-container-id-or-name"><a href="#docker-network-connect-network-name-container-id-or-name" class="header-anchor">#</a> <code>docker network connect &lt;network_name&gt; &lt;container_id_or_name&gt;</code></h3> <blockquote><p>æŒ‡å®šå®¹å™¨è¿æ¥æŒ‡å®šç½‘ç»œ</p> <p><code>disconnect</code>: æ–­å¼€è¿æ¥</p></blockquote> <h2 id="æ–‡ä»¶æ‹·è´"><a href="#æ–‡ä»¶æ‹·è´" class="header-anchor">#</a> æ–‡ä»¶æ‹·è´</h2> <blockquote><p>å®¹å™¨å†…æ–‡ä»¶å¤‡ä»½åˆ°ä¸»æœº</p></blockquote> <p><code>docker cp &lt;container_id&gt;:&lt;path&gt; &lt;path&gt;</code></p> <p>container_id: å®¹å™¨ID</p> <p>ç¬¬ä¸€ä¸ªpath:   å®¹å™¨å†…æ–‡ä»¶çš„è·¯å¾„&lt;å¯ä»¥æ˜¯ä¸€ä¸ªç›®å½•&gt;</p> <p>ç¬¬äºŒä¸ªpath:   ç›®æ ‡è·¯å¾„</p> <h2 id="å¯¼å‡ºå®¹å™¨"><a href="#å¯¼å‡ºå®¹å™¨" class="header-anchor">#</a> å¯¼å‡ºå®¹å™¨</h2> <blockquote><p>è¿™ä¸ªæ“ä½œå¯ä»¥è®©æˆ‘ä»¬çš„å®¹å™¨åœ¨ä¸åŒç¯å¢ƒä¸‹è¿è¡Œä¸”å¯ä»¥å…±äº«å®¹å™¨</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">export</span> <span class="token operator">&lt;</span>container_id<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>.tar
<span class="token comment"># è¿™ä¸ªæ“ä½œå¯ä»¥ç›´æ¥å¤‡ä»½æ•´ä¸ªå®¹å™¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="å¯¼å…¥å®¹å™¨"><a href="#å¯¼å…¥å®¹å™¨" class="header-anchor">#</a> å¯¼å…¥å®¹å™¨</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">import</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>.tar <span class="token operator">&lt;</span>repository<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span>
<span class="token comment"># å¦‚æœä¸æŒ‡å®šä»“åº“, å°±ä¼šå‡ºç°è™šæ‚¬é•œåƒ</span>
<span class="token comment"># åœ¨å¯åŠ¨æ—¶, éœ€è¦ä½¿ç”¨docker run -it &lt;image_id&gt; /bin/bash</span>
<span class="token comment"># å› ä¸ºå®ƒæ˜¯ä¸ªå®¹å™¨æ‰€ä»¥ä¸èƒ½å•çº¯ä½¿ç”¨runå‘½ä»¤</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="dockeré•œåƒå±‚éƒ½æ˜¯åªè¯»çš„-å®¹å™¨å±‚æ˜¯å¯å†™çš„"><a href="#dockeré•œåƒå±‚éƒ½æ˜¯åªè¯»çš„-å®¹å™¨å±‚æ˜¯å¯å†™çš„" class="header-anchor">#</a> Dockeré•œåƒå±‚éƒ½æ˜¯åªè¯»çš„, å®¹å™¨å±‚æ˜¯å¯å†™çš„</h2> <blockquote><p>dockeråœ¨å¯åŠ¨æ—¶, ä¸€ä¸ªæœ€æ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒçš„æœ€é¡¶å±‚, <strong>è¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä¸ºå®¹å™¨å±‚, å®¹å™¨å±‚ä¹‹ä¸‹çš„éƒ½æ˜¯é•œåƒå±‚</strong></p></blockquote> <img src="/study/assets/img/image-20240430165415446.f59619cc.png" alt="image-20240430165415446" style="zoom:80%;"> <p><strong>æ‰€æœ‰å¯¹å®¹å™¨çš„æ“ä½œ, ä¸ç®¡æ˜¯æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ–‡ä»¶ç­‰éƒ½åªæ˜¯å‘ç”Ÿåœ¨å®¹å™¨å±‚ä¸­, åªæœ‰å®¹å™¨æ˜¯å¯å†™çš„, å®¹å™¨å±‚ä¹‹ä¸‹é•œåƒå±‚éƒ½æ˜¯åªè¯»çš„</strong></p> <p><strong>æ‹“å±•:</strong>==bootfsæ˜¯dockeré•œåƒä¸­æœ€åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿ, é€šå¸¸æƒ…å†µä¸‹è¯¥æ–‡ä»¶æ˜¯åªè¯»çš„, ç±»ä¼¼äºä¸€ä¸ªåŸºæœ¬çš„linuxå‘è¡Œç‰ˆ, è¿™ä¸ªæ–‡ä»¶ç³»ç»ŸåŒ…å«äº†æœ€åŸºæœ¬çš„ç³»ç»Ÿæ–‡ä»¶å’Œç›®å½•, ä¾‹å¦‚:/bin/sbin/libç­‰ bootfsæ˜¯dockeré•œåƒçš„åŸºç¡€, ä¸Šå±‚çš„å±‚å æ–‡ä»¶ç³»ç»Ÿåœ¨å…¶ä¹‹ä¸Šè¿›è¡Œæ„å»º, ä»è€Œå®ç°é•œåƒçš„åˆ†å±‚å’Œå¯ä¿®æ”¹æ€§==</p> <h2 id="docker-commit"><a href="#docker-commit" class="header-anchor">#</a> <code>docker commit</code></h2> <blockquote><p>ä»¥å½“å‰é•œåƒä¸ºåŸºç¡€ä¿å­˜ä¸ºä¸€ä¸ªæ–°çš„é•œåƒ</p></blockquote> <p>æ¯”å¦‚, æˆ‘ä»¬æ‹‰å–äº†ä¸€ä¸ªæ–°çš„ubuntué•œåƒ, ä½†è¿™ä¸ªé•œåƒæ²¡æœ‰vimå‘½ä»¤, æˆ‘ä»¬å°±å¯ä»¥å®‰è£…ä¸€ä¸ªvimä¾èµ–, å¹¶å°†å«æœ‰vimå‘½ä»¤çš„é•œåƒå‘å¸ƒä¸ºä¸€ä¸ªæ–°çš„é•œåƒ, è¿™æ ·åœ¨æ‹‰å–æ–°ubuntué•œåƒæ—¶, å°±å«æœ‰vimå‘½ä»¤äº†</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> commit <span class="token punctuation">[</span>options<span class="token punctuation">]</span> container <span class="token punctuation">[</span>repository<span class="token punctuation">]</span>:<span class="token punctuation">[</span>tag<span class="token punctuation">]</span>
<span class="token comment"># container:  è¦ä¿å­˜ä¸ºé•œåƒçš„å·²è¿è¡ŒçŠ¶æ€çš„å®¹å™¨åç§°æˆ–ID</span>
<span class="token comment"># repository: è¦åˆ›å»ºçš„æ–°é•œåƒåç§°</span>
<span class="token comment"># tag:		  é•œåƒæ ‡ç­¾, å¯é€‰</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æ‹‰å–centosé•œåƒ</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull centos:7
<span class="token comment"># è®¾ç½®åˆ«å</span>
<span class="token function">docker</span> tag eeb6ee3f44bd mylinux
<span class="token comment"># è¿è¡Œå®¹å™¨å¹¶æ‰§è¡Œvimå‘½ä»¤</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> mylinux /bin/bash
<span class="token punctuation">[</span>root@b5bcf936781c /<span class="token punctuation">]</span><span class="token comment"># vim test.txt</span>
<span class="token comment"># ç„¶åå°±ä¼šå‡ºç°æ‰¾ä¸åˆ°vim</span>
bash: vim: <span class="token builtin class-name">command</span> not found
<span class="token comment"># å®‰è£…vim</span>
yum update <span class="token operator">&amp;&amp;</span> <span class="token function">yes</span> <span class="token operator">|</span> yum <span class="token function">install</span> <span class="token function">vim</span>
<span class="token comment"># ç„¶åå†ä½¿ç”¨vimå‘½ä»¤å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†</span>
<span class="token comment"># æ¥ä¸‹æ¥, ä»¥å®‰è£…vimå‘½ä»¤çš„centosé•œåƒä¸ºåŸºç¡€, commitä¸€ä¸ªæ–°çš„centosé•œåƒ</span>
<span class="token function">docker</span> commit <span class="token parameter variable">-a</span> <span class="token string">&quot;naihe&quot;</span> <span class="token parameter variable">-m</span> <span class="token string">&quot;add vim&quot;</span> mycentos havevimcentos
<span class="token comment"># ç„¶åè¿è¡Œè¿™ä¸ªå®¹å™¨å¹¶æ‰§è¡Œvimå‘½ä»¤, ç„¶åå°±ä¼šå‘ç°åœ¨æ–°çš„é•œåƒä¸­æ²¡æœ‰å®‰è£…vimå‘½ä»¤ä¹Ÿå¯ä»¥ä½¿ç”¨vimäº†</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>==é€šå¸¸ä¸ä¼šè¿™ä¹ˆå»åš, ä¸€èˆ¬é‡‡ç”¨<code>Dockerfile</code>æ–‡ä»¶æ„å»ºé•œåƒ==</p> <h2 id="dockeræ¨é€é•œåƒåˆ°ç§æœ"><a href="#dockeræ¨é€é•œåƒåˆ°ç§æœ" class="header-anchor">#</a> dockeræ¨é€é•œåƒåˆ°ç§æœ</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># ä¸‹è½½registry</span>
<span class="token function">docker</span> pull registry
<span class="token comment"># è¿è¡Œç§æœ</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">5000</span>:5000 <span class="token parameter variable">-v</span> /naihe/myregistry/:/tmp/registry <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true registry
<span class="token comment"># æŸ¥çœ‹ç§æœé•œåƒ</span>
<span class="token function">curl</span> <span class="token parameter variable">-XGET</span> http://localhost:5000/v2/_catalog
<span class="token punctuation">{</span><span class="token string">&quot;repositories&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token comment"># åˆšå¼€å§‹ç»“æœè‚¯å®šä¸ºç©º, å› ä¸ºè¿˜æ²¡æœ‰ä¸Šä¼ ç§æœé•œåƒ</span>
<span class="token comment"># ä¸Šä¼ ç§æœé•œåƒ</span>
<span class="token function">docker</span> tag 967ca3be8ed4 localhost:5000/nginx
<span class="token function">docker</span> push localhost:5000/nginx
<span class="token comment"># è¿™æ—¶æŸ¥çœ‹ç§æœé•œåƒå·²ç»æœ‰nginxé•œåƒäº†</span>
<span class="token function">curl</span> <span class="token parameter variable">-XGET</span> http://localhost:5000/v2/_catalog
<span class="token punctuation">{</span><span class="token string">&quot;repositories&quot;</span>:<span class="token punctuation">[</span><span class="token string">&quot;nginx&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token comment"># æ‹‰å–ç§æœnginxé•œåƒ</span>
<span class="token function">docker</span> pull localhost:5000/nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="dockerå®¹å™¨æ•°æ®"><a href="#dockerå®¹å™¨æ•°æ®" class="header-anchor">#</a> dockerå®¹å™¨æ•°æ®</h2> <blockquote><p>Dockeræä¾›çš„ä¸€ç§æ•°æ®æŒä¹…åŒ–å­˜å‚¨æœºåˆ¶, ç”¨äºåœ¨å®¹å™¨å’Œå®¿ä¸»æœºä¹‹å‰è¿›è¡Œæ•°æ®å…±äº«, å¹¶ä¸”å¯ä»¥åœ¨==å®¹å™¨åˆ é™¤åä¿ç•™æ•°æ®==</p> <p>å¯¹æ–‡ä»¶çš„ä¿®æ”¹éƒ½æ˜¯ç›¸äº’çš„, åœ¨å®¿ä¸»æœºä¸Šæ‰€åšçš„ä¿®æ”¹ä¼šåŒæ­¥åˆ°å®¹å™¨ä¸­, åä¹‹ä¹Ÿæ˜¯ä¸€æ ·</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-v</span> <span class="token punctuation">[</span>å®¿ä¸»æœºç›®å½•<span class="token punctuation">]</span>:<span class="token punctuation">[</span>å®¹å™¨ç›®å½•<span class="token punctuation">]</span> <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token punctuation">[</span>ImageID<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä»¥nginxä¸ºä¾‹</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> mynginx <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-v</span> /home/naihe/docker_nginx/html:/data/html <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_nginx/logs:/data/logs <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_nginx/nginx.conf:/etc/nginx/nginx.conf <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true mynginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¯ä»¥é€šè¿‡<code>docker inspect &lt;container&gt;</code>æ¥æŸ¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸ</p> <img src="/study/assets/img/image-20240501102511216.25badb9f.png" alt="image-20240501102511216" style="zoom:80%;"> <p><strong>å¦‚æœä¿®æ”¹æ–‡ä»¶åæ²¡æœ‰ç”Ÿæ•ˆ, é‡å¯å®¹å™¨å°±å¥½<code>docker restart mynginx</code></strong></p> <div class="language-nginx line-numbers-mode"><pre class="language-nginx"><code><span class="token comment"># nginxä¸å…è®¸location /é…ç½®å—ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„root</span>
<span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">server_name</span> example.com</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">root</span> /var/www</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> /var/www/images</span><span class="token punctuation">;</span> <span class="token comment"># è¦ä¹ˆä¸å†™, è¦ä¹ˆå†™ç»å¯¹è·¯å¾„</span>
        <span class="token comment"># å°†ä¼šä½¿ç”¨ /var/www/images ä½œä¸ºæ ¹ç›®å½•</span>
    <span class="token punctuation">}</span>

    <span class="token directive"><span class="token keyword">location</span> /./image/</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">root</span> images</span><span class="token punctuation">;</span>
        <span class="token comment"># å°†ä¼šä½¿ç”¨ /var/www/images ä½œä¸ºæ ¹ç›®å½•</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="å¯ä»¥é€šè¿‡roæˆ–rwæŒ‡å®šå®¹å™¨å¯¹æ•°æ®å·çš„æƒé™"><a href="#å¯ä»¥é€šè¿‡roæˆ–rwæŒ‡å®šå®¹å™¨å¯¹æ•°æ®å·çš„æƒé™" class="header-anchor">#</a> å¯ä»¥é€šè¿‡roæˆ–rwæŒ‡å®šå®¹å™¨å¯¹æ•°æ®å·çš„æƒé™</h3> <ul><li>rw: å¯è¯»å¯å†™</li> <li>ro: åªè¯»</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-v</span> /home/naihe/docker_nginx/html:/data/html:ro mynginx
<span class="token comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨--mountå‘½ä»¤</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--mount</span> <span class="token assign-left variable">type</span><span class="token operator">=</span>bind,source<span class="token operator">=</span>/home/naihe/docker_nginx/html,target<span class="token operator">=</span>/data/html,readonly<span class="token operator">=</span>true mynginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æ•°æ®å·ä¹‹é—´çš„ç»§æ‰¿å’Œå…±äº«"><a href="#æ•°æ®å·ä¹‹é—´çš„ç»§æ‰¿å’Œå…±äº«" class="header-anchor">#</a> æ•°æ®å·ä¹‹é—´çš„ç»§æ‰¿å’Œå…±äº«</h3> <blockquote><p>å¯ä»¥è®©ä¸€ä¸ªå®¹å™¨å…±äº«å¦ä¸€ä¸ªå®¹å™¨çš„æ•°æ®</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true --volumes-from mynginx1 mynginx2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>å‡è®¾mynginx1åœæ­¢äº†, æ˜¯ä¸å½±å“mynginx2çš„, åœ¨mynginx2ä¸­ä¿®æ”¹æ–‡ä»¶ä¾æ—§å¯ä»¥åŒæ­¥åˆ°å®¿ä¸»æœºä¸Š
è¿™æ—¶mynginx1å¯åŠ¨, æ˜¯å¯ä»¥åŒæ­¥mynginx2çš„ä¿®æ”¹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="dockerå®‰è£…mysql"><a href="#dockerå®‰è£…mysql" class="header-anchor">#</a> dockerå®‰è£…mysql</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 mysql
<span class="token comment"># æŸ¥çœ‹ä¸€ä¸‹mysqlçš„ç¼–ç </span>
show variables like <span class="token string">'character%'</span><span class="token punctuation">;</span>
<span class="token comment"># å¦‚æœä¸æ˜¯utf8, åœ¨æ’å…¥ä¸­æ–‡æ•°æ®æ—¶ä¼šæœ‰ç¼–ç é”™è¯¯</span>
<span class="token comment"># ä¸€èˆ¬æ¥è®²mysql8ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜, 5ç‰ˆæœ¬å‡ºç°çš„å‡ ç‡æ¯”è¾ƒå¤§</span>

<span class="token comment"># æŒä¹…åŒ–mysqlæ•°æ®</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_mysql/data:/var/lib/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_mysql/log:/var/log/mysql <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_mysql/conf/mysql.conf:/etc/mysql/conf.d/mysql.conf mysql
<span class="token comment"># é…ç½®æ–‡ä»¶ä¸èƒ½å‡ºé”™ ä¸ç„¶å¯åŠ¨å¤±è´¥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="dockerå®‰è£…redis"><a href="#dockerå®‰è£…redis" class="header-anchor">#</a> dockerå®‰è£…redis</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull redis:6
<span class="token comment"># å¯åŠ¨redis</span>
<span class="token function">docker</span> run <span class="token parameter variable">--name</span> myredis <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> /home/naihe/docker_redis/data:/data <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_redis/conf/redis.conf:/etc/redis/redis.conf <span class="token parameter variable">-d</span> <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true myredis redis-server /etc/redis/redis.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="dockerå®‰è£…mongodb"><a href="#dockerå®‰è£…mongodb" class="header-anchor">#</a> dockerå®‰è£…mongodb</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull mongo
/data/db
/var/log/mongodb
/etc/mongod.conf

<span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">--name</span> mongodb <span class="token parameter variable">-p</span> <span class="token number">27017</span>:27017 <span class="token parameter variable">-d</span> <span class="token parameter variable">-v</span> /home/naihe/docker_mongo/data:/data/db <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_mongo/config/mongod.conf:/etc/mongod.conf <span class="token punctuation">\</span>
<span class="token parameter variable">-v</span> /home/naihe/docker_mongo/log:/var/log/mongodb <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true dfda7a2cf273 <span class="token parameter variable">--auth</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="dockeréƒ¨ç½²springbootåº”ç”¨"><a href="#dockeréƒ¨ç½²springbootåº”ç”¨" class="header-anchor">#</a> dockeréƒ¨ç½²SpringBootåº”ç”¨</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>FROM openjdk:11-jre-slim

COPY my-site.jar app.jar

EXPOSE <span class="token number">8088</span>

ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span>, <span class="token string">&quot;-jar&quot;</span>, <span class="token string">&quot;app.jar&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h2> <blockquote><p>æ„å»ºdockeré•œåƒçš„æ–‡ä»¶</p> <p>åªæ˜¯æ„å»º</p></blockquote> <p><a href="https://docs.docker.com/reference/dockerfile" target="_blank" rel="noopener noreferrer">æ„å»ºå‚æ•°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="dockeræ‰§è¡Œdockerfileçš„æµç¨‹"><a href="#dockeræ‰§è¡Œdockerfileçš„æµç¨‹" class="header-anchor">#</a> dockeræ‰§è¡ŒDockerfileçš„æµç¨‹</h3> <ul><li>dockerä»åŸºç¡€é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li> <li>æ‰§è¡Œç›¸å…³æŒ‡ä»¤å¯¹å®¹å™¨åšå‡ºä¿®æ”¹</li> <li>æ‰§è¡Œç±»ä¼¼commitçš„æ“ä½œæäº¤ä¸€ä¸ªæ–°çš„é•œåƒå±‚</li> <li>åŸºç¡€æ–°çš„é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</li> <li>æ‰§è¡ŒDockerfileä¸‹ä¸€æ¡æŒ‡ä»¤ç›´åˆ°æ‰€æœ‰çš„æŒ‡ä»¤è¿è¡Œå®Œæˆ</li></ul> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token comment"># ä¸åŒºåˆ†å¤§å°å†™</span>
<span class="token comment"># ä½¿ç”¨å®˜æ–¹ Nginx é•œåƒä½œä¸ºåŸºç¡€é•œåƒ</span>
<span class="token instruction"><span class="token keyword">FROM</span> nginx:1.24.0</span>

<span class="token comment"># å°†æœ¬åœ°çš„ Nginx é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨å†…çš„ /etc/nginx/ ç›®å½•ä¸‹</span>
<span class="token instruction"><span class="token keyword">COPY</span> nginx.conf /etc/nginx/nginx.conf</span>

<span class="token comment"># å¤åˆ¶é™æ€ç½‘é¡µæ–‡ä»¶åˆ° Nginx é»˜è®¤çš„ç½‘é¡µç›®å½• /usr/share/nginx/html/</span>
<span class="token instruction"><span class="token keyword">COPY</span> ./html /usr/share/nginx/html/</span>

<span class="token comment"># æš´éœ² Nginx ç›‘å¬çš„ç«¯å£ï¼ˆé»˜è®¤ä¸º 80ï¼‰</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>

<span class="token comment"># æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤ï¼Œå¯åŠ¨ Nginx æœåŠ¡</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;nginx&quot;</span>, <span class="token string">&quot;-g&quot;</span>, <span class="token string">&quot;daemon off;&quot;</span>]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> myblog <span class="token builtin class-name">.</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 myblog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/study/assets/js/app.6d3630f5.js" defer></script><script src="/study/assets/js/2.40365491.js" defer></script><script src="/study/assets/js/1.eec64618.js" defer></script><script src="/study/assets/js/18.ba9636f0.js" defer></script>
  </body>
</html>
